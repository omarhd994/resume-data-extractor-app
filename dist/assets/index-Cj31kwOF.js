var eS=Object.defineProperty;var G0=s=>{throw TypeError(s)};var nS=(s,t,e)=>t in s?eS(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var I=(s,t,e)=>nS(s,typeof t!="symbol"?t+"":t,e),Up=(s,t,e)=>t.has(s)||G0("Cannot "+e);var o=(s,t,e)=>(Up(s,t,"read from private field"),e?e.call(s):t.get(s)),A=(s,t,e)=>t.has(s)?G0("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(s):t.set(s,e),g=(s,t,e,n)=>(Up(s,t,"write to private field"),n?n.call(s,e):t.set(s,e),e),x=(s,t,e)=>(Up(s,t,"access private method"),e);var Ie=(s,t,e,n)=>({set _(i){g(s,t,i,e)},get _(){return o(s,t,n)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function e(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(i){if(i.ep)return;i.ep=!0;const r=e(i);fetch(i.href,r)}})();var Mw={exports:{}},Ap={},Iw={exports:{}},nt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yh=Symbol.for("react.element"),sS=Symbol.for("react.portal"),iS=Symbol.for("react.fragment"),rS=Symbol.for("react.strict_mode"),aS=Symbol.for("react.profiler"),oS=Symbol.for("react.provider"),lS=Symbol.for("react.context"),cS=Symbol.for("react.forward_ref"),uS=Symbol.for("react.suspense"),hS=Symbol.for("react.memo"),dS=Symbol.for("react.lazy"),X0=Symbol.iterator;function fS(s){return s===null||typeof s!="object"?null:(s=X0&&s[X0]||s["@@iterator"],typeof s=="function"?s:null)}var Lw={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Dw=Object.assign,Fw={};function pc(s,t,e){this.props=s,this.context=t,this.refs=Fw,this.updater=e||Lw}pc.prototype.isReactComponent={};pc.prototype.setState=function(s,t){if(typeof s!="object"&&typeof s!="function"&&s!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,s,t,"setState")};pc.prototype.forceUpdate=function(s){this.updater.enqueueForceUpdate(this,s,"forceUpdate")};function Ow(){}Ow.prototype=pc.prototype;function Ly(s,t,e){this.props=s,this.context=t,this.refs=Fw,this.updater=e||Lw}var Dy=Ly.prototype=new Ow;Dy.constructor=Ly;Dw(Dy,pc.prototype);Dy.isPureReactComponent=!0;var q0=Array.isArray,jw=Object.prototype.hasOwnProperty,Fy={current:null},zw={key:!0,ref:!0,__self:!0,__source:!0};function Bw(s,t,e){var n,i={},r=null,a=null;if(t!=null)for(n in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(r=""+t.key),t)jw.call(t,n)&&!zw.hasOwnProperty(n)&&(i[n]=t[n]);var l=arguments.length-2;if(l===1)i.children=e;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}if(s&&s.defaultProps)for(n in l=s.defaultProps,l)i[n]===void 0&&(i[n]=l[n]);return{$$typeof:Yh,type:s,key:r,ref:a,props:i,_owner:Fy.current}}function pS(s,t){return{$$typeof:Yh,type:s.type,key:t,ref:s.ref,props:s.props,_owner:s._owner}}function Oy(s){return typeof s=="object"&&s!==null&&s.$$typeof===Yh}function gS(s){var t={"=":"=0",":":"=2"};return"$"+s.replace(/[=:]/g,function(e){return t[e]})}var Y0=/\/+/g;function Vp(s,t){return typeof s=="object"&&s!==null&&s.key!=null?gS(""+s.key):t.toString(36)}function Nd(s,t,e,n,i){var r=typeof s;(r==="undefined"||r==="boolean")&&(s=null);var a=!1;if(s===null)a=!0;else switch(r){case"string":case"number":a=!0;break;case"object":switch(s.$$typeof){case Yh:case sS:a=!0}}if(a)return a=s,i=i(a),s=n===""?"."+Vp(a,0):n,q0(i)?(e="",s!=null&&(e=s.replace(Y0,"$&/")+"/"),Nd(i,t,e,"",function(u){return u})):i!=null&&(Oy(i)&&(i=pS(i,e+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(Y0,"$&/")+"/")+s)),t.push(i)),1;if(a=0,n=n===""?".":n+":",q0(s))for(var l=0;l<s.length;l++){r=s[l];var c=n+Vp(r,l);a+=Nd(r,t,e,c,i)}else if(c=fS(s),typeof c=="function")for(s=c.call(s),l=0;!(r=s.next()).done;)r=r.value,c=n+Vp(r,l++),a+=Nd(r,t,e,c,i);else if(r==="object")throw t=String(s),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function od(s,t,e){if(s==null)return s;var n=[],i=0;return Nd(s,n,"","",function(r){return t.call(e,r,i++)}),n}function mS(s){if(s._status===-1){var t=s._result;t=t(),t.then(function(e){(s._status===0||s._status===-1)&&(s._status=1,s._result=e)},function(e){(s._status===0||s._status===-1)&&(s._status=2,s._result=e)}),s._status===-1&&(s._status=0,s._result=t)}if(s._status===1)return s._result.default;throw s._result}var Ve={current:null},Md={transition:null},yS={ReactCurrentDispatcher:Ve,ReactCurrentBatchConfig:Md,ReactCurrentOwner:Fy};function Hw(){throw Error("act(...) is not supported in production builds of React.")}nt.Children={map:od,forEach:function(s,t,e){od(s,function(){t.apply(this,arguments)},e)},count:function(s){var t=0;return od(s,function(){t++}),t},toArray:function(s){return od(s,function(t){return t})||[]},only:function(s){if(!Oy(s))throw Error("React.Children.only expected to receive a single React element child.");return s}};nt.Component=pc;nt.Fragment=iS;nt.Profiler=aS;nt.PureComponent=Ly;nt.StrictMode=rS;nt.Suspense=uS;nt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=yS;nt.act=Hw;nt.cloneElement=function(s,t,e){if(s==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+s+".");var n=Dw({},s.props),i=s.key,r=s.ref,a=s._owner;if(t!=null){if(t.ref!==void 0&&(r=t.ref,a=Fy.current),t.key!==void 0&&(i=""+t.key),s.type&&s.type.defaultProps)var l=s.type.defaultProps;for(c in t)jw.call(t,c)&&!zw.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=e;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:Yh,type:s.type,key:i,ref:r,props:n,_owner:a}};nt.createContext=function(s){return s={$$typeof:lS,_currentValue:s,_currentValue2:s,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},s.Provider={$$typeof:oS,_context:s},s.Consumer=s};nt.createElement=Bw;nt.createFactory=function(s){var t=Bw.bind(null,s);return t.type=s,t};nt.createRef=function(){return{current:null}};nt.forwardRef=function(s){return{$$typeof:cS,render:s}};nt.isValidElement=Oy;nt.lazy=function(s){return{$$typeof:dS,_payload:{_status:-1,_result:s},_init:mS}};nt.memo=function(s,t){return{$$typeof:hS,type:s,compare:t===void 0?null:t}};nt.startTransition=function(s){var t=Md.transition;Md.transition={};try{s()}finally{Md.transition=t}};nt.unstable_act=Hw;nt.useCallback=function(s,t){return Ve.current.useCallback(s,t)};nt.useContext=function(s){return Ve.current.useContext(s)};nt.useDebugValue=function(){};nt.useDeferredValue=function(s){return Ve.current.useDeferredValue(s)};nt.useEffect=function(s,t){return Ve.current.useEffect(s,t)};nt.useId=function(){return Ve.current.useId()};nt.useImperativeHandle=function(s,t,e){return Ve.current.useImperativeHandle(s,t,e)};nt.useInsertionEffect=function(s,t){return Ve.current.useInsertionEffect(s,t)};nt.useLayoutEffect=function(s,t){return Ve.current.useLayoutEffect(s,t)};nt.useMemo=function(s,t){return Ve.current.useMemo(s,t)};nt.useReducer=function(s,t,e){return Ve.current.useReducer(s,t,e)};nt.useRef=function(s){return Ve.current.useRef(s)};nt.useState=function(s){return Ve.current.useState(s)};nt.useSyncExternalStore=function(s,t,e){return Ve.current.useSyncExternalStore(s,t,e)};nt.useTransition=function(){return Ve.current.useTransition()};nt.version="18.3.1";Iw.exports=nt;var Hn=Iw.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vS=Hn,wS=Symbol.for("react.element"),AS=Symbol.for("react.fragment"),xS=Object.prototype.hasOwnProperty,bS=vS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,SS={key:!0,ref:!0,__self:!0,__source:!0};function $w(s,t,e){var n,i={},r=null,a=null;e!==void 0&&(r=""+e),t.key!==void 0&&(r=""+t.key),t.ref!==void 0&&(a=t.ref);for(n in t)xS.call(t,n)&&!SS.hasOwnProperty(n)&&(i[n]=t[n]);if(s&&s.defaultProps)for(n in t=s.defaultProps,t)i[n]===void 0&&(i[n]=t[n]);return{$$typeof:wS,type:s,key:r,ref:a,props:i,_owner:bS.current}}Ap.Fragment=AS;Ap.jsx=$w;Ap.jsxs=$w;Mw.exports=Ap;var C=Mw.exports,Uw={exports:{}},kn={},Vw={exports:{}},Ww={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(s){function t(D,W){var X=D.length;D.push(W);t:for(;0<X;){var ct=X-1>>>1,tt=D[ct];if(0<i(tt,W))D[ct]=W,D[X]=tt,X=ct;else break t}}function e(D){return D.length===0?null:D[0]}function n(D){if(D.length===0)return null;var W=D[0],X=D.pop();if(X!==W){D[0]=X;t:for(var ct=0,tt=D.length,wt=tt>>>1;ct<wt;){var Ge=2*(ct+1)-1,Pn=D[Ge],be=Ge+1,vt=D[be];if(0>i(Pn,X))be<tt&&0>i(vt,Pn)?(D[ct]=vt,D[be]=X,ct=be):(D[ct]=Pn,D[Ge]=X,ct=Ge);else if(be<tt&&0>i(vt,X))D[ct]=vt,D[be]=X,ct=be;else break t}}return W}function i(D,W){var X=D.sortIndex-W.sortIndex;return X!==0?X:D.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var r=performance;s.unstable_now=function(){return r.now()}}else{var a=Date,l=a.now();s.unstable_now=function(){return a.now()-l}}var c=[],u=[],h=1,d=null,f=3,p=!1,w=!1,y=!1,S=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(D){for(var W=e(u);W!==null;){if(W.callback===null)n(u);else if(W.startTime<=D)n(u),W.sortIndex=W.expirationTime,t(c,W);else break;W=e(u)}}function _(D){if(y=!1,b(D),!w)if(e(c)!==null)w=!0,B(E);else{var W=e(u);W!==null&&$(_,W.startTime-D)}}function E(D,W){w=!1,y&&(y=!1,m(P),P=-1),p=!0;var X=f;try{for(b(W),d=e(c);d!==null&&(!(d.expirationTime>W)||D&&!L());){var ct=d.callback;if(typeof ct=="function"){d.callback=null,f=d.priorityLevel;var tt=ct(d.expirationTime<=W);W=s.unstable_now(),typeof tt=="function"?d.callback=tt:d===e(c)&&n(c),b(W)}else n(c);d=e(c)}if(d!==null)var wt=!0;else{var Ge=e(u);Ge!==null&&$(_,Ge.startTime-W),wt=!1}return wt}finally{d=null,f=X,p=!1}}var k=!1,T=null,P=-1,R=5,N=-1;function L(){return!(s.unstable_now()-N<R)}function st(){if(T!==null){var D=s.unstable_now();N=D;var W=!0;try{W=T(!0,D)}finally{W?rt():(k=!1,T=null)}}else k=!1}var rt;if(typeof v=="function")rt=function(){v(st)};else if(typeof MessageChannel<"u"){var Q=new MessageChannel,ce=Q.port2;Q.port1.onmessage=st,rt=function(){ce.postMessage(null)}}else rt=function(){S(st,0)};function B(D){T=D,k||(k=!0,rt())}function $(D,W){P=S(function(){D(s.unstable_now())},W)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(D){D.callback=null},s.unstable_continueExecution=function(){w||p||(w=!0,B(E))},s.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<D?Math.floor(1e3/D):5},s.unstable_getCurrentPriorityLevel=function(){return f},s.unstable_getFirstCallbackNode=function(){return e(c)},s.unstable_next=function(D){switch(f){case 1:case 2:case 3:var W=3;break;default:W=f}var X=f;f=W;try{return D()}finally{f=X}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(D,W){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var X=f;f=D;try{return W()}finally{f=X}},s.unstable_scheduleCallback=function(D,W,X){var ct=s.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?ct+X:ct):X=ct,D){case 1:var tt=-1;break;case 2:tt=250;break;case 5:tt=1073741823;break;case 4:tt=1e4;break;default:tt=5e3}return tt=X+tt,D={id:h++,callback:W,priorityLevel:D,startTime:X,expirationTime:tt,sortIndex:-1},X>ct?(D.sortIndex=X,t(u,D),e(c)===null&&D===e(u)&&(y?(m(P),P=-1):y=!0,$(_,X-ct))):(D.sortIndex=tt,t(c,D),w||p||(w=!0,B(E))),D},s.unstable_shouldYield=L,s.unstable_wrapCallback=function(D){var W=f;return function(){var X=f;f=W;try{return D.apply(this,arguments)}finally{f=X}}}})(Ww);Vw.exports=Ww;var _S=Vw.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ES=Hn,Cn=_S;function M(s){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+s,e=1;e<arguments.length;e++)t+="&args[]="+encodeURIComponent(arguments[e]);return"Minified React error #"+s+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Gw=new Set,ou={};function yo(s,t){oc(s,t),oc(s+"Capture",t)}function oc(s,t){for(ou[s]=t,s=0;s<t.length;s++)Gw.add(t[s])}var Ri=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_g=Object.prototype.hasOwnProperty,CS=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,K0={},Q0={};function kS(s){return _g.call(Q0,s)?!0:_g.call(K0,s)?!1:CS.test(s)?Q0[s]=!0:(K0[s]=!0,!1)}function TS(s,t,e,n){if(e!==null&&e.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:e!==null?!e.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function PS(s,t,e,n){if(t===null||typeof t>"u"||TS(s,t,e,n))return!0;if(n)return!1;if(e!==null)switch(e.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function We(s,t,e,n,i,r,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=e,this.propertyName=s,this.type=t,this.sanitizeURL=r,this.removeEmptyString=a}var xe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){xe[s]=new We(s,0,!1,s,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var t=s[0];xe[t]=new We(t,1,!1,s[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(s){xe[s]=new We(s,2,!1,s.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){xe[s]=new We(s,2,!1,s,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){xe[s]=new We(s,3,!1,s.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(s){xe[s]=new We(s,3,!0,s,null,!1,!1)});["capture","download"].forEach(function(s){xe[s]=new We(s,4,!1,s,null,!1,!1)});["cols","rows","size","span"].forEach(function(s){xe[s]=new We(s,6,!1,s,null,!1,!1)});["rowSpan","start"].forEach(function(s){xe[s]=new We(s,5,!1,s.toLowerCase(),null,!1,!1)});var jy=/[\-:]([a-z])/g;function zy(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var t=s.replace(jy,zy);xe[t]=new We(t,1,!1,s,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var t=s.replace(jy,zy);xe[t]=new We(t,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(s){var t=s.replace(jy,zy);xe[t]=new We(t,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(s){xe[s]=new We(s,1,!1,s.toLowerCase(),null,!1,!1)});xe.xlinkHref=new We("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(s){xe[s]=new We(s,1,!1,s.toLowerCase(),null,!0,!0)});function By(s,t,e,n){var i=xe.hasOwnProperty(t)?xe[t]:null;(i!==null?i.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(PS(t,e,i,n)&&(e=null),n||i===null?kS(t)&&(e===null?s.removeAttribute(t):s.setAttribute(t,""+e)):i.mustUseProperty?s[i.propertyName]=e===null?i.type===3?!1:"":e:(t=i.attributeName,n=i.attributeNamespace,e===null?s.removeAttribute(t):(i=i.type,e=i===3||i===4&&e===!0?"":""+e,n?s.setAttributeNS(n,t,e):s.setAttribute(t,e))))}var Fi=ES.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ld=Symbol.for("react.element"),No=Symbol.for("react.portal"),Mo=Symbol.for("react.fragment"),Hy=Symbol.for("react.strict_mode"),Eg=Symbol.for("react.profiler"),Xw=Symbol.for("react.provider"),qw=Symbol.for("react.context"),$y=Symbol.for("react.forward_ref"),Cg=Symbol.for("react.suspense"),kg=Symbol.for("react.suspense_list"),Uy=Symbol.for("react.memo"),zi=Symbol.for("react.lazy"),Yw=Symbol.for("react.offscreen"),Z0=Symbol.iterator;function wc(s){return s===null||typeof s!="object"?null:(s=Z0&&s[Z0]||s["@@iterator"],typeof s=="function"?s:null)}var Lt=Object.assign,Wp;function Nc(s){if(Wp===void 0)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);Wp=t&&t[1]||""}return`
`+Wp+s}var Gp=!1;function Xp(s,t){if(!s||Gp)return"";Gp=!0;var e=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(s,[],t)}else{try{t.call()}catch(u){n=u}s.call(t.prototype)}else{try{throw Error()}catch(u){n=u}s()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),r=n.stack.split(`
`),a=i.length-1,l=r.length-1;1<=a&&0<=l&&i[a]!==r[l];)l--;for(;1<=a&&0<=l;a--,l--)if(i[a]!==r[l]){if(a!==1||l!==1)do if(a--,l--,0>l||i[a]!==r[l]){var c=`
`+i[a].replace(" at new "," at ");return s.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",s.displayName)),c}while(1<=a&&0<=l);break}}}finally{Gp=!1,Error.prepareStackTrace=e}return(s=s?s.displayName||s.name:"")?Nc(s):""}function RS(s){switch(s.tag){case 5:return Nc(s.type);case 16:return Nc("Lazy");case 13:return Nc("Suspense");case 19:return Nc("SuspenseList");case 0:case 2:case 15:return s=Xp(s.type,!1),s;case 11:return s=Xp(s.type.render,!1),s;case 1:return s=Xp(s.type,!0),s;default:return""}}function Tg(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case Mo:return"Fragment";case No:return"Portal";case Eg:return"Profiler";case Hy:return"StrictMode";case Cg:return"Suspense";case kg:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case qw:return(s.displayName||"Context")+".Consumer";case Xw:return(s._context.displayName||"Context")+".Provider";case $y:var t=s.render;return s=s.displayName,s||(s=t.displayName||t.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case Uy:return t=s.displayName||null,t!==null?t:Tg(s.type)||"Memo";case zi:t=s._payload,s=s._init;try{return Tg(s(t))}catch{}}return null}function NS(s){var t=s.type;switch(s.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=t.render,s=s.displayName||s.name||"",t.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Tg(t);case 8:return t===Hy?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Fr(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Kw(s){var t=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function MS(s){var t=Kw(s)?"checked":"value",e=Object.getOwnPropertyDescriptor(s.constructor.prototype,t),n=""+s[t];if(!s.hasOwnProperty(t)&&typeof e<"u"&&typeof e.get=="function"&&typeof e.set=="function"){var i=e.get,r=e.set;return Object.defineProperty(s,t,{configurable:!0,get:function(){return i.call(this)},set:function(a){n=""+a,r.call(this,a)}}),Object.defineProperty(s,t,{enumerable:e.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){s._valueTracker=null,delete s[t]}}}}function cd(s){s._valueTracker||(s._valueTracker=MS(s))}function Qw(s){if(!s)return!1;var t=s._valueTracker;if(!t)return!0;var e=t.getValue(),n="";return s&&(n=Kw(s)?s.checked?"true":"false":s.value),s=n,s!==e?(t.setValue(s),!0):!1}function xf(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function Pg(s,t){var e=t.checked;return Lt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:e??s._wrapperState.initialChecked})}function J0(s,t){var e=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;e=Fr(t.value!=null?t.value:e),s._wrapperState={initialChecked:n,initialValue:e,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Zw(s,t){t=t.checked,t!=null&&By(s,"checked",t,!1)}function Rg(s,t){Zw(s,t);var e=Fr(t.value),n=t.type;if(e!=null)n==="number"?(e===0&&s.value===""||s.value!=e)&&(s.value=""+e):s.value!==""+e&&(s.value=""+e);else if(n==="submit"||n==="reset"){s.removeAttribute("value");return}t.hasOwnProperty("value")?Ng(s,t.type,e):t.hasOwnProperty("defaultValue")&&Ng(s,t.type,Fr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(s.defaultChecked=!!t.defaultChecked)}function tv(s,t,e){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+s._wrapperState.initialValue,e||t===s.value||(s.value=t),s.defaultValue=t}e=s.name,e!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,e!==""&&(s.name=e)}function Ng(s,t,e){(t!=="number"||xf(s.ownerDocument)!==s)&&(e==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+e&&(s.defaultValue=""+e))}var Mc=Array.isArray;function Go(s,t,e,n){if(s=s.options,t){t={};for(var i=0;i<e.length;i++)t["$"+e[i]]=!0;for(e=0;e<s.length;e++)i=t.hasOwnProperty("$"+s[e].value),s[e].selected!==i&&(s[e].selected=i),i&&n&&(s[e].defaultSelected=!0)}else{for(e=""+Fr(e),t=null,i=0;i<s.length;i++){if(s[i].value===e){s[i].selected=!0,n&&(s[i].defaultSelected=!0);return}t!==null||s[i].disabled||(t=s[i])}t!==null&&(t.selected=!0)}}function Mg(s,t){if(t.dangerouslySetInnerHTML!=null)throw Error(M(91));return Lt({},t,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function ev(s,t){var e=t.value;if(e==null){if(e=t.children,t=t.defaultValue,e!=null){if(t!=null)throw Error(M(92));if(Mc(e)){if(1<e.length)throw Error(M(93));e=e[0]}t=e}t==null&&(t=""),e=t}s._wrapperState={initialValue:Fr(e)}}function Jw(s,t){var e=Fr(t.value),n=Fr(t.defaultValue);e!=null&&(e=""+e,e!==s.value&&(s.value=e),t.defaultValue==null&&s.defaultValue!==e&&(s.defaultValue=e)),n!=null&&(s.defaultValue=""+n)}function nv(s){var t=s.textContent;t===s._wrapperState.initialValue&&t!==""&&t!==null&&(s.value=t)}function tA(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ig(s,t){return s==null||s==="http://www.w3.org/1999/xhtml"?tA(t):s==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var ud,eA=function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,e,n,i){MSApp.execUnsafeLocalFunction(function(){return s(t,e,n,i)})}:s}(function(s,t){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=t;else{for(ud=ud||document.createElement("div"),ud.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ud.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;t.firstChild;)s.appendChild(t.firstChild)}});function lu(s,t){if(t){var e=s.firstChild;if(e&&e===s.lastChild&&e.nodeType===3){e.nodeValue=t;return}}s.textContent=t}var Zc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},IS=["Webkit","ms","Moz","O"];Object.keys(Zc).forEach(function(s){IS.forEach(function(t){t=t+s.charAt(0).toUpperCase()+s.substring(1),Zc[t]=Zc[s]})});function nA(s,t,e){return t==null||typeof t=="boolean"||t===""?"":e||typeof t!="number"||t===0||Zc.hasOwnProperty(s)&&Zc[s]?(""+t).trim():t+"px"}function sA(s,t){s=s.style;for(var e in t)if(t.hasOwnProperty(e)){var n=e.indexOf("--")===0,i=nA(e,t[e],n);e==="float"&&(e="cssFloat"),n?s.setProperty(e,i):s[e]=i}}var LS=Lt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Lg(s,t){if(t){if(LS[s]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(M(137,s));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(M(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(M(61))}if(t.style!=null&&typeof t.style!="object")throw Error(M(62))}}function Dg(s,t){if(s.indexOf("-")===-1)return typeof t.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fg=null;function Vy(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Og=null,Xo=null,qo=null;function sv(s){if(s=Zh(s)){if(typeof Og!="function")throw Error(M(280));var t=s.stateNode;t&&(t=Ep(t),Og(s.stateNode,s.type,t))}}function iA(s){Xo?qo?qo.push(s):qo=[s]:Xo=s}function rA(){if(Xo){var s=Xo,t=qo;if(qo=Xo=null,sv(s),t)for(s=0;s<t.length;s++)sv(t[s])}}function aA(s,t){return s(t)}function oA(){}var qp=!1;function lA(s,t,e){if(qp)return s(t,e);qp=!0;try{return aA(s,t,e)}finally{qp=!1,(Xo!==null||qo!==null)&&(oA(),rA())}}function cu(s,t){var e=s.stateNode;if(e===null)return null;var n=Ep(e);if(n===null)return null;e=n[t];t:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(s=s.type,n=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!n;break t;default:s=!1}if(s)return null;if(e&&typeof e!="function")throw Error(M(231,t,typeof e));return e}var jg=!1;if(Ri)try{var Ac={};Object.defineProperty(Ac,"passive",{get:function(){jg=!0}}),window.addEventListener("test",Ac,Ac),window.removeEventListener("test",Ac,Ac)}catch{jg=!1}function DS(s,t,e,n,i,r,a,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(e,u)}catch(h){this.onError(h)}}var Jc=!1,bf=null,Sf=!1,zg=null,FS={onError:function(s){Jc=!0,bf=s}};function OS(s,t,e,n,i,r,a,l,c){Jc=!1,bf=null,DS.apply(FS,arguments)}function jS(s,t,e,n,i,r,a,l,c){if(OS.apply(this,arguments),Jc){if(Jc){var u=bf;Jc=!1,bf=null}else throw Error(M(198));Sf||(Sf=!0,zg=u)}}function vo(s){var t=s,e=s;if(s.alternate)for(;t.return;)t=t.return;else{s=t;do t=s,t.flags&4098&&(e=t.return),s=t.return;while(s)}return t.tag===3?e:null}function cA(s){if(s.tag===13){var t=s.memoizedState;if(t===null&&(s=s.alternate,s!==null&&(t=s.memoizedState)),t!==null)return t.dehydrated}return null}function iv(s){if(vo(s)!==s)throw Error(M(188))}function zS(s){var t=s.alternate;if(!t){if(t=vo(s),t===null)throw Error(M(188));return t!==s?null:s}for(var e=s,n=t;;){var i=e.return;if(i===null)break;var r=i.alternate;if(r===null){if(n=i.return,n!==null){e=n;continue}break}if(i.child===r.child){for(r=i.child;r;){if(r===e)return iv(i),s;if(r===n)return iv(i),t;r=r.sibling}throw Error(M(188))}if(e.return!==n.return)e=i,n=r;else{for(var a=!1,l=i.child;l;){if(l===e){a=!0,e=i,n=r;break}if(l===n){a=!0,n=i,e=r;break}l=l.sibling}if(!a){for(l=r.child;l;){if(l===e){a=!0,e=r,n=i;break}if(l===n){a=!0,n=r,e=i;break}l=l.sibling}if(!a)throw Error(M(189))}}if(e.alternate!==n)throw Error(M(190))}if(e.tag!==3)throw Error(M(188));return e.stateNode.current===e?s:t}function uA(s){return s=zS(s),s!==null?hA(s):null}function hA(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var t=hA(s);if(t!==null)return t;s=s.sibling}return null}var dA=Cn.unstable_scheduleCallback,rv=Cn.unstable_cancelCallback,BS=Cn.unstable_shouldYield,HS=Cn.unstable_requestPaint,zt=Cn.unstable_now,$S=Cn.unstable_getCurrentPriorityLevel,Wy=Cn.unstable_ImmediatePriority,fA=Cn.unstable_UserBlockingPriority,_f=Cn.unstable_NormalPriority,US=Cn.unstable_LowPriority,pA=Cn.unstable_IdlePriority,xp=null,Bs=null;function VS(s){if(Bs&&typeof Bs.onCommitFiberRoot=="function")try{Bs.onCommitFiberRoot(xp,s,void 0,(s.current.flags&128)===128)}catch{}}var ds=Math.clz32?Math.clz32:XS,WS=Math.log,GS=Math.LN2;function XS(s){return s>>>=0,s===0?32:31-(WS(s)/GS|0)|0}var hd=64,dd=4194304;function Ic(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function Ef(s,t){var e=s.pendingLanes;if(e===0)return 0;var n=0,i=s.suspendedLanes,r=s.pingedLanes,a=e&268435455;if(a!==0){var l=a&~i;l!==0?n=Ic(l):(r&=a,r!==0&&(n=Ic(r)))}else a=e&~i,a!==0?n=Ic(a):r!==0&&(n=Ic(r));if(n===0)return 0;if(t!==0&&t!==n&&!(t&i)&&(i=n&-n,r=t&-t,i>=r||i===16&&(r&4194240)!==0))return t;if(n&4&&(n|=e&16),t=s.entangledLanes,t!==0)for(s=s.entanglements,t&=n;0<t;)e=31-ds(t),i=1<<e,n|=s[e],t&=~i;return n}function qS(s,t){switch(s){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function YS(s,t){for(var e=s.suspendedLanes,n=s.pingedLanes,i=s.expirationTimes,r=s.pendingLanes;0<r;){var a=31-ds(r),l=1<<a,c=i[a];c===-1?(!(l&e)||l&n)&&(i[a]=qS(l,t)):c<=t&&(s.expiredLanes|=l),r&=~l}}function Bg(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function gA(){var s=hd;return hd<<=1,!(hd&4194240)&&(hd=64),s}function Yp(s){for(var t=[],e=0;31>e;e++)t.push(s);return t}function Kh(s,t,e){s.pendingLanes|=t,t!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,t=31-ds(t),s[t]=e}function KS(s,t){var e=s.pendingLanes&~t;s.pendingLanes=t,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=t,s.mutableReadLanes&=t,s.entangledLanes&=t,t=s.entanglements;var n=s.eventTimes;for(s=s.expirationTimes;0<e;){var i=31-ds(e),r=1<<i;t[i]=0,n[i]=-1,s[i]=-1,e&=~r}}function Gy(s,t){var e=s.entangledLanes|=t;for(s=s.entanglements;e;){var n=31-ds(e),i=1<<n;i&t|s[n]&t&&(s[n]|=t),e&=~i}}var ft=0;function mA(s){return s&=-s,1<s?4<s?s&268435455?16:536870912:4:1}var yA,Xy,vA,wA,AA,Hg=!1,fd=[],Tr=null,Pr=null,Rr=null,uu=new Map,hu=new Map,Hi=[],QS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function av(s,t){switch(s){case"focusin":case"focusout":Tr=null;break;case"dragenter":case"dragleave":Pr=null;break;case"mouseover":case"mouseout":Rr=null;break;case"pointerover":case"pointerout":uu.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":hu.delete(t.pointerId)}}function xc(s,t,e,n,i,r){return s===null||s.nativeEvent!==r?(s={blockedOn:t,domEventName:e,eventSystemFlags:n,nativeEvent:r,targetContainers:[i]},t!==null&&(t=Zh(t),t!==null&&Xy(t)),s):(s.eventSystemFlags|=n,t=s.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),s)}function ZS(s,t,e,n,i){switch(t){case"focusin":return Tr=xc(Tr,s,t,e,n,i),!0;case"dragenter":return Pr=xc(Pr,s,t,e,n,i),!0;case"mouseover":return Rr=xc(Rr,s,t,e,n,i),!0;case"pointerover":var r=i.pointerId;return uu.set(r,xc(uu.get(r)||null,s,t,e,n,i)),!0;case"gotpointercapture":return r=i.pointerId,hu.set(r,xc(hu.get(r)||null,s,t,e,n,i)),!0}return!1}function xA(s){var t=Jr(s.target);if(t!==null){var e=vo(t);if(e!==null){if(t=e.tag,t===13){if(t=cA(e),t!==null){s.blockedOn=t,AA(s.priority,function(){vA(e)});return}}else if(t===3&&e.stateNode.current.memoizedState.isDehydrated){s.blockedOn=e.tag===3?e.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Id(s){if(s.blockedOn!==null)return!1;for(var t=s.targetContainers;0<t.length;){var e=$g(s.domEventName,s.eventSystemFlags,t[0],s.nativeEvent);if(e===null){e=s.nativeEvent;var n=new e.constructor(e.type,e);Fg=n,e.target.dispatchEvent(n),Fg=null}else return t=Zh(e),t!==null&&Xy(t),s.blockedOn=e,!1;t.shift()}return!0}function ov(s,t,e){Id(s)&&e.delete(t)}function JS(){Hg=!1,Tr!==null&&Id(Tr)&&(Tr=null),Pr!==null&&Id(Pr)&&(Pr=null),Rr!==null&&Id(Rr)&&(Rr=null),uu.forEach(ov),hu.forEach(ov)}function bc(s,t){s.blockedOn===t&&(s.blockedOn=null,Hg||(Hg=!0,Cn.unstable_scheduleCallback(Cn.unstable_NormalPriority,JS)))}function du(s){function t(i){return bc(i,s)}if(0<fd.length){bc(fd[0],s);for(var e=1;e<fd.length;e++){var n=fd[e];n.blockedOn===s&&(n.blockedOn=null)}}for(Tr!==null&&bc(Tr,s),Pr!==null&&bc(Pr,s),Rr!==null&&bc(Rr,s),uu.forEach(t),hu.forEach(t),e=0;e<Hi.length;e++)n=Hi[e],n.blockedOn===s&&(n.blockedOn=null);for(;0<Hi.length&&(e=Hi[0],e.blockedOn===null);)xA(e),e.blockedOn===null&&Hi.shift()}var Yo=Fi.ReactCurrentBatchConfig,Cf=!0;function t_(s,t,e,n){var i=ft,r=Yo.transition;Yo.transition=null;try{ft=1,qy(s,t,e,n)}finally{ft=i,Yo.transition=r}}function e_(s,t,e,n){var i=ft,r=Yo.transition;Yo.transition=null;try{ft=4,qy(s,t,e,n)}finally{ft=i,Yo.transition=r}}function qy(s,t,e,n){if(Cf){var i=$g(s,t,e,n);if(i===null)rg(s,t,n,kf,e),av(s,n);else if(ZS(i,s,t,e,n))n.stopPropagation();else if(av(s,n),t&4&&-1<QS.indexOf(s)){for(;i!==null;){var r=Zh(i);if(r!==null&&yA(r),r=$g(s,t,e,n),r===null&&rg(s,t,n,kf,e),r===i)break;i=r}i!==null&&n.stopPropagation()}else rg(s,t,n,null,e)}}var kf=null;function $g(s,t,e,n){if(kf=null,s=Vy(n),s=Jr(s),s!==null)if(t=vo(s),t===null)s=null;else if(e=t.tag,e===13){if(s=cA(t),s!==null)return s;s=null}else if(e===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;s=null}else t!==s&&(s=null);return kf=s,null}function bA(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($S()){case Wy:return 1;case fA:return 4;case _f:case US:return 16;case pA:return 536870912;default:return 16}default:return 16}}var Cr=null,Yy=null,Ld=null;function SA(){if(Ld)return Ld;var s,t=Yy,e=t.length,n,i="value"in Cr?Cr.value:Cr.textContent,r=i.length;for(s=0;s<e&&t[s]===i[s];s++);var a=e-s;for(n=1;n<=a&&t[e-n]===i[r-n];n++);return Ld=i.slice(s,1<n?1-n:void 0)}function Dd(s){var t=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&t===13&&(s=13)):s=t,s===10&&(s=13),32<=s||s===13?s:0}function pd(){return!0}function lv(){return!1}function Tn(s){function t(e,n,i,r,a){this._reactName=e,this._targetInst=i,this.type=n,this.nativeEvent=r,this.target=a,this.currentTarget=null;for(var l in s)s.hasOwnProperty(l)&&(e=s[l],this[l]=e?e(r):r[l]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?pd:lv,this.isPropagationStopped=lv,this}return Lt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():typeof e.returnValue!="unknown"&&(e.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():typeof e.cancelBubble!="unknown"&&(e.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),t}var gc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ky=Tn(gc),Qh=Lt({},gc,{view:0,detail:0}),n_=Tn(Qh),Kp,Qp,Sc,bp=Lt({},Qh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Qy,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Sc&&(Sc&&s.type==="mousemove"?(Kp=s.screenX-Sc.screenX,Qp=s.screenY-Sc.screenY):Qp=Kp=0,Sc=s),Kp)},movementY:function(s){return"movementY"in s?s.movementY:Qp}}),cv=Tn(bp),s_=Lt({},bp,{dataTransfer:0}),i_=Tn(s_),r_=Lt({},Qh,{relatedTarget:0}),Zp=Tn(r_),a_=Lt({},gc,{animationName:0,elapsedTime:0,pseudoElement:0}),o_=Tn(a_),l_=Lt({},gc,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),c_=Tn(l_),u_=Lt({},gc,{data:0}),uv=Tn(u_),h_={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},d_={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},f_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function p_(s){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(s):(s=f_[s])?!!t[s]:!1}function Qy(){return p_}var g_=Lt({},Qh,{key:function(s){if(s.key){var t=h_[s.key]||s.key;if(t!=="Unidentified")return t}return s.type==="keypress"?(s=Dd(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?d_[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Qy,charCode:function(s){return s.type==="keypress"?Dd(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Dd(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),m_=Tn(g_),y_=Lt({},bp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),hv=Tn(y_),v_=Lt({},Qh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Qy}),w_=Tn(v_),A_=Lt({},gc,{propertyName:0,elapsedTime:0,pseudoElement:0}),x_=Tn(A_),b_=Lt({},bp,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),S_=Tn(b_),__=[9,13,27,32],Zy=Ri&&"CompositionEvent"in window,tu=null;Ri&&"documentMode"in document&&(tu=document.documentMode);var E_=Ri&&"TextEvent"in window&&!tu,_A=Ri&&(!Zy||tu&&8<tu&&11>=tu),dv=" ",fv=!1;function EA(s,t){switch(s){case"keyup":return __.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function CA(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Io=!1;function C_(s,t){switch(s){case"compositionend":return CA(t);case"keypress":return t.which!==32?null:(fv=!0,dv);case"textInput":return s=t.data,s===dv&&fv?null:s;default:return null}}function k_(s,t){if(Io)return s==="compositionend"||!Zy&&EA(s,t)?(s=SA(),Ld=Yy=Cr=null,Io=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return _A&&t.locale!=="ko"?null:t.data;default:return null}}var T_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function pv(s){var t=s&&s.nodeName&&s.nodeName.toLowerCase();return t==="input"?!!T_[s.type]:t==="textarea"}function kA(s,t,e,n){iA(n),t=Tf(t,"onChange"),0<t.length&&(e=new Ky("onChange","change",null,e,n),s.push({event:e,listeners:t}))}var eu=null,fu=null;function P_(s){jA(s,0)}function Sp(s){var t=Fo(s);if(Qw(t))return s}function R_(s,t){if(s==="change")return t}var TA=!1;if(Ri){var Jp;if(Ri){var tg="oninput"in document;if(!tg){var gv=document.createElement("div");gv.setAttribute("oninput","return;"),tg=typeof gv.oninput=="function"}Jp=tg}else Jp=!1;TA=Jp&&(!document.documentMode||9<document.documentMode)}function mv(){eu&&(eu.detachEvent("onpropertychange",PA),fu=eu=null)}function PA(s){if(s.propertyName==="value"&&Sp(fu)){var t=[];kA(t,fu,s,Vy(s)),lA(P_,t)}}function N_(s,t,e){s==="focusin"?(mv(),eu=t,fu=e,eu.attachEvent("onpropertychange",PA)):s==="focusout"&&mv()}function M_(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Sp(fu)}function I_(s,t){if(s==="click")return Sp(t)}function L_(s,t){if(s==="input"||s==="change")return Sp(t)}function D_(s,t){return s===t&&(s!==0||1/s===1/t)||s!==s&&t!==t}var ps=typeof Object.is=="function"?Object.is:D_;function pu(s,t){if(ps(s,t))return!0;if(typeof s!="object"||s===null||typeof t!="object"||t===null)return!1;var e=Object.keys(s),n=Object.keys(t);if(e.length!==n.length)return!1;for(n=0;n<e.length;n++){var i=e[n];if(!_g.call(t,i)||!ps(s[i],t[i]))return!1}return!0}function yv(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function vv(s,t){var e=yv(s);s=0;for(var n;e;){if(e.nodeType===3){if(n=s+e.textContent.length,s<=t&&n>=t)return{node:e,offset:t-s};s=n}t:{for(;e;){if(e.nextSibling){e=e.nextSibling;break t}e=e.parentNode}e=void 0}e=yv(e)}}function RA(s,t){return s&&t?s===t?!0:s&&s.nodeType===3?!1:t&&t.nodeType===3?RA(s,t.parentNode):"contains"in s?s.contains(t):s.compareDocumentPosition?!!(s.compareDocumentPosition(t)&16):!1:!1}function NA(){for(var s=window,t=xf();t instanceof s.HTMLIFrameElement;){try{var e=typeof t.contentWindow.location.href=="string"}catch{e=!1}if(e)s=t.contentWindow;else break;t=xf(s.document)}return t}function Jy(s){var t=s&&s.nodeName&&s.nodeName.toLowerCase();return t&&(t==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||t==="textarea"||s.contentEditable==="true")}function F_(s){var t=NA(),e=s.focusedElem,n=s.selectionRange;if(t!==e&&e&&e.ownerDocument&&RA(e.ownerDocument.documentElement,e)){if(n!==null&&Jy(e)){if(t=n.start,s=n.end,s===void 0&&(s=t),"selectionStart"in e)e.selectionStart=t,e.selectionEnd=Math.min(s,e.value.length);else if(s=(t=e.ownerDocument||document)&&t.defaultView||window,s.getSelection){s=s.getSelection();var i=e.textContent.length,r=Math.min(n.start,i);n=n.end===void 0?r:Math.min(n.end,i),!s.extend&&r>n&&(i=n,n=r,r=i),i=vv(e,r);var a=vv(e,n);i&&a&&(s.rangeCount!==1||s.anchorNode!==i.node||s.anchorOffset!==i.offset||s.focusNode!==a.node||s.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),s.removeAllRanges(),r>n?(s.addRange(t),s.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),s.addRange(t)))}}for(t=[],s=e;s=s.parentNode;)s.nodeType===1&&t.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof e.focus=="function"&&e.focus(),e=0;e<t.length;e++)s=t[e],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var O_=Ri&&"documentMode"in document&&11>=document.documentMode,Lo=null,Ug=null,nu=null,Vg=!1;function wv(s,t,e){var n=e.window===e?e.document:e.nodeType===9?e:e.ownerDocument;Vg||Lo==null||Lo!==xf(n)||(n=Lo,"selectionStart"in n&&Jy(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),nu&&pu(nu,n)||(nu=n,n=Tf(Ug,"onSelect"),0<n.length&&(t=new Ky("onSelect","select",null,t,e),s.push({event:t,listeners:n}),t.target=Lo)))}function gd(s,t){var e={};return e[s.toLowerCase()]=t.toLowerCase(),e["Webkit"+s]="webkit"+t,e["Moz"+s]="moz"+t,e}var Do={animationend:gd("Animation","AnimationEnd"),animationiteration:gd("Animation","AnimationIteration"),animationstart:gd("Animation","AnimationStart"),transitionend:gd("Transition","TransitionEnd")},eg={},MA={};Ri&&(MA=document.createElement("div").style,"AnimationEvent"in window||(delete Do.animationend.animation,delete Do.animationiteration.animation,delete Do.animationstart.animation),"TransitionEvent"in window||delete Do.transitionend.transition);function _p(s){if(eg[s])return eg[s];if(!Do[s])return s;var t=Do[s],e;for(e in t)if(t.hasOwnProperty(e)&&e in MA)return eg[s]=t[e];return s}var IA=_p("animationend"),LA=_p("animationiteration"),DA=_p("animationstart"),FA=_p("transitionend"),OA=new Map,Av="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ur(s,t){OA.set(s,t),yo(t,[s])}for(var ng=0;ng<Av.length;ng++){var sg=Av[ng],j_=sg.toLowerCase(),z_=sg[0].toUpperCase()+sg.slice(1);Ur(j_,"on"+z_)}Ur(IA,"onAnimationEnd");Ur(LA,"onAnimationIteration");Ur(DA,"onAnimationStart");Ur("dblclick","onDoubleClick");Ur("focusin","onFocus");Ur("focusout","onBlur");Ur(FA,"onTransitionEnd");oc("onMouseEnter",["mouseout","mouseover"]);oc("onMouseLeave",["mouseout","mouseover"]);oc("onPointerEnter",["pointerout","pointerover"]);oc("onPointerLeave",["pointerout","pointerover"]);yo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));yo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));yo("onBeforeInput",["compositionend","keypress","textInput","paste"]);yo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));yo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));yo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),B_=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lc));function xv(s,t,e){var n=s.type||"unknown-event";s.currentTarget=e,jS(n,t,void 0,s),s.currentTarget=null}function jA(s,t){t=(t&4)!==0;for(var e=0;e<s.length;e++){var n=s[e],i=n.event;n=n.listeners;t:{var r=void 0;if(t)for(var a=n.length-1;0<=a;a--){var l=n[a],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==r&&i.isPropagationStopped())break t;xv(i,l,u),r=c}else for(a=0;a<n.length;a++){if(l=n[a],c=l.instance,u=l.currentTarget,l=l.listener,c!==r&&i.isPropagationStopped())break t;xv(i,l,u),r=c}}}if(Sf)throw s=zg,Sf=!1,zg=null,s}function St(s,t){var e=t[Yg];e===void 0&&(e=t[Yg]=new Set);var n=s+"__bubble";e.has(n)||(zA(t,s,2,!1),e.add(n))}function ig(s,t,e){var n=0;t&&(n|=4),zA(e,s,n,t)}var md="_reactListening"+Math.random().toString(36).slice(2);function gu(s){if(!s[md]){s[md]=!0,Gw.forEach(function(e){e!=="selectionchange"&&(B_.has(e)||ig(e,!1,s),ig(e,!0,s))});var t=s.nodeType===9?s:s.ownerDocument;t===null||t[md]||(t[md]=!0,ig("selectionchange",!1,t))}}function zA(s,t,e,n){switch(bA(t)){case 1:var i=t_;break;case 4:i=e_;break;default:i=qy}e=i.bind(null,t,e,s),i=void 0,!jg||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),n?i!==void 0?s.addEventListener(t,e,{capture:!0,passive:i}):s.addEventListener(t,e,!0):i!==void 0?s.addEventListener(t,e,{passive:i}):s.addEventListener(t,e,!1)}function rg(s,t,e,n,i){var r=n;if(!(t&1)&&!(t&2)&&n!==null)t:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var l=n.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(a===4)for(a=n.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;a=a.return}for(;l!==null;){if(a=Jr(l),a===null)return;if(c=a.tag,c===5||c===6){n=r=a;continue t}l=l.parentNode}}n=n.return}lA(function(){var u=r,h=Vy(e),d=[];t:{var f=OA.get(s);if(f!==void 0){var p=Ky,w=s;switch(s){case"keypress":if(Dd(e)===0)break t;case"keydown":case"keyup":p=m_;break;case"focusin":w="focus",p=Zp;break;case"focusout":w="blur",p=Zp;break;case"beforeblur":case"afterblur":p=Zp;break;case"click":if(e.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=cv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=i_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=w_;break;case IA:case LA:case DA:p=o_;break;case FA:p=x_;break;case"scroll":p=n_;break;case"wheel":p=S_;break;case"copy":case"cut":case"paste":p=c_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=hv}var y=(t&4)!==0,S=!y&&s==="scroll",m=y?f!==null?f+"Capture":null:f;y=[];for(var v=u,b;v!==null;){b=v;var _=b.stateNode;if(b.tag===5&&_!==null&&(b=_,m!==null&&(_=cu(v,m),_!=null&&y.push(mu(v,_,b)))),S)break;v=v.return}0<y.length&&(f=new p(f,w,null,e,h),d.push({event:f,listeners:y}))}}if(!(t&7)){t:{if(f=s==="mouseover"||s==="pointerover",p=s==="mouseout"||s==="pointerout",f&&e!==Fg&&(w=e.relatedTarget||e.fromElement)&&(Jr(w)||w[Ni]))break t;if((p||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,p?(w=e.relatedTarget||e.toElement,p=u,w=w?Jr(w):null,w!==null&&(S=vo(w),w!==S||w.tag!==5&&w.tag!==6)&&(w=null)):(p=null,w=u),p!==w)){if(y=cv,_="onMouseLeave",m="onMouseEnter",v="mouse",(s==="pointerout"||s==="pointerover")&&(y=hv,_="onPointerLeave",m="onPointerEnter",v="pointer"),S=p==null?f:Fo(p),b=w==null?f:Fo(w),f=new y(_,v+"leave",p,e,h),f.target=S,f.relatedTarget=b,_=null,Jr(h)===u&&(y=new y(m,v+"enter",w,e,h),y.target=b,y.relatedTarget=S,_=y),S=_,p&&w)e:{for(y=p,m=w,v=0,b=y;b;b=bo(b))v++;for(b=0,_=m;_;_=bo(_))b++;for(;0<v-b;)y=bo(y),v--;for(;0<b-v;)m=bo(m),b--;for(;v--;){if(y===m||m!==null&&y===m.alternate)break e;y=bo(y),m=bo(m)}y=null}else y=null;p!==null&&bv(d,f,p,y,!1),w!==null&&S!==null&&bv(d,S,w,y,!0)}}t:{if(f=u?Fo(u):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var E=R_;else if(pv(f))if(TA)E=L_;else{E=M_;var k=N_}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(E=I_);if(E&&(E=E(s,u))){kA(d,E,e,h);break t}k&&k(s,f,u),s==="focusout"&&(k=f._wrapperState)&&k.controlled&&f.type==="number"&&Ng(f,"number",f.value)}switch(k=u?Fo(u):window,s){case"focusin":(pv(k)||k.contentEditable==="true")&&(Lo=k,Ug=u,nu=null);break;case"focusout":nu=Ug=Lo=null;break;case"mousedown":Vg=!0;break;case"contextmenu":case"mouseup":case"dragend":Vg=!1,wv(d,e,h);break;case"selectionchange":if(O_)break;case"keydown":case"keyup":wv(d,e,h)}var T;if(Zy)t:{switch(s){case"compositionstart":var P="onCompositionStart";break t;case"compositionend":P="onCompositionEnd";break t;case"compositionupdate":P="onCompositionUpdate";break t}P=void 0}else Io?EA(s,e)&&(P="onCompositionEnd"):s==="keydown"&&e.keyCode===229&&(P="onCompositionStart");P&&(_A&&e.locale!=="ko"&&(Io||P!=="onCompositionStart"?P==="onCompositionEnd"&&Io&&(T=SA()):(Cr=h,Yy="value"in Cr?Cr.value:Cr.textContent,Io=!0)),k=Tf(u,P),0<k.length&&(P=new uv(P,s,null,e,h),d.push({event:P,listeners:k}),T?P.data=T:(T=CA(e),T!==null&&(P.data=T)))),(T=E_?C_(s,e):k_(s,e))&&(u=Tf(u,"onBeforeInput"),0<u.length&&(h=new uv("onBeforeInput","beforeinput",null,e,h),d.push({event:h,listeners:u}),h.data=T))}jA(d,t)})}function mu(s,t,e){return{instance:s,listener:t,currentTarget:e}}function Tf(s,t){for(var e=t+"Capture",n=[];s!==null;){var i=s,r=i.stateNode;i.tag===5&&r!==null&&(i=r,r=cu(s,e),r!=null&&n.unshift(mu(s,r,i)),r=cu(s,t),r!=null&&n.push(mu(s,r,i))),s=s.return}return n}function bo(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function bv(s,t,e,n,i){for(var r=t._reactName,a=[];e!==null&&e!==n;){var l=e,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,i?(c=cu(e,r),c!=null&&a.unshift(mu(e,c,l))):i||(c=cu(e,r),c!=null&&a.push(mu(e,c,l)))),e=e.return}a.length!==0&&s.push({event:t,listeners:a})}var H_=/\r\n?/g,$_=/\u0000|\uFFFD/g;function Sv(s){return(typeof s=="string"?s:""+s).replace(H_,`
`).replace($_,"")}function yd(s,t,e){if(t=Sv(t),Sv(s)!==t&&e)throw Error(M(425))}function Pf(){}var Wg=null,Gg=null;function Xg(s,t){return s==="textarea"||s==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var qg=typeof setTimeout=="function"?setTimeout:void 0,U_=typeof clearTimeout=="function"?clearTimeout:void 0,_v=typeof Promise=="function"?Promise:void 0,V_=typeof queueMicrotask=="function"?queueMicrotask:typeof _v<"u"?function(s){return _v.resolve(null).then(s).catch(W_)}:qg;function W_(s){setTimeout(function(){throw s})}function ag(s,t){var e=t,n=0;do{var i=e.nextSibling;if(s.removeChild(e),i&&i.nodeType===8)if(e=i.data,e==="/$"){if(n===0){s.removeChild(i),du(t);return}n--}else e!=="$"&&e!=="$?"&&e!=="$!"||n++;e=i}while(e);du(t)}function Nr(s){for(;s!=null;s=s.nextSibling){var t=s.nodeType;if(t===1||t===3)break;if(t===8){if(t=s.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return s}function Ev(s){s=s.previousSibling;for(var t=0;s;){if(s.nodeType===8){var e=s.data;if(e==="$"||e==="$!"||e==="$?"){if(t===0)return s;t--}else e==="/$"&&t++}s=s.previousSibling}return null}var mc=Math.random().toString(36).slice(2),js="__reactFiber$"+mc,yu="__reactProps$"+mc,Ni="__reactContainer$"+mc,Yg="__reactEvents$"+mc,G_="__reactListeners$"+mc,X_="__reactHandles$"+mc;function Jr(s){var t=s[js];if(t)return t;for(var e=s.parentNode;e;){if(t=e[Ni]||e[js]){if(e=t.alternate,t.child!==null||e!==null&&e.child!==null)for(s=Ev(s);s!==null;){if(e=s[js])return e;s=Ev(s)}return t}s=e,e=s.parentNode}return null}function Zh(s){return s=s[js]||s[Ni],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function Fo(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(M(33))}function Ep(s){return s[yu]||null}var Kg=[],Oo=-1;function Vr(s){return{current:s}}function Et(s){0>Oo||(s.current=Kg[Oo],Kg[Oo]=null,Oo--)}function xt(s,t){Oo++,Kg[Oo]=s.current,s.current=t}var Or={},Me=Vr(Or),en=Vr(!1),lo=Or;function lc(s,t){var e=s.type.contextTypes;if(!e)return Or;var n=s.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var i={},r;for(r in e)i[r]=t[r];return n&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=t,s.__reactInternalMemoizedMaskedChildContext=i),i}function nn(s){return s=s.childContextTypes,s!=null}function Rf(){Et(en),Et(Me)}function Cv(s,t,e){if(Me.current!==Or)throw Error(M(168));xt(Me,t),xt(en,e)}function BA(s,t,e){var n=s.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return e;n=n.getChildContext();for(var i in n)if(!(i in t))throw Error(M(108,NS(s)||"Unknown",i));return Lt({},e,n)}function Nf(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||Or,lo=Me.current,xt(Me,s),xt(en,en.current),!0}function kv(s,t,e){var n=s.stateNode;if(!n)throw Error(M(169));e?(s=BA(s,t,lo),n.__reactInternalMemoizedMergedChildContext=s,Et(en),Et(Me),xt(Me,s)):Et(en),xt(en,e)}var Ys=null,Cp=!1,og=!1;function HA(s){Ys===null?Ys=[s]:Ys.push(s)}function q_(s){Cp=!0,HA(s)}function Wr(){if(!og&&Ys!==null){og=!0;var s=0,t=ft;try{var e=Ys;for(ft=1;s<e.length;s++){var n=e[s];do n=n(!0);while(n!==null)}Ys=null,Cp=!1}catch(i){throw Ys!==null&&(Ys=Ys.slice(s+1)),dA(Wy,Wr),i}finally{ft=t,og=!1}}return null}var jo=[],zo=0,Mf=null,If=0,zn=[],Bn=0,co=null,Ei=1,Ci="";function Gr(s,t){jo[zo++]=If,jo[zo++]=Mf,Mf=s,If=t}function $A(s,t,e){zn[Bn++]=Ei,zn[Bn++]=Ci,zn[Bn++]=co,co=s;var n=Ei;s=Ci;var i=32-ds(n)-1;n&=~(1<<i),e+=1;var r=32-ds(t)+i;if(30<r){var a=i-i%5;r=(n&(1<<a)-1).toString(32),n>>=a,i-=a,Ei=1<<32-ds(t)+i|e<<i|n,Ci=r+s}else Ei=1<<r|e<<i|n,Ci=s}function t0(s){s.return!==null&&(Gr(s,1),$A(s,1,0))}function e0(s){for(;s===Mf;)Mf=jo[--zo],jo[zo]=null,If=jo[--zo],jo[zo]=null;for(;s===co;)co=zn[--Bn],zn[Bn]=null,Ci=zn[--Bn],zn[Bn]=null,Ei=zn[--Bn],zn[Bn]=null}var _n=null,Sn=null,Pt=!1,us=null;function UA(s,t){var e=Un(5,null,null,0);e.elementType="DELETED",e.stateNode=t,e.return=s,t=s.deletions,t===null?(s.deletions=[e],s.flags|=16):t.push(e)}function Tv(s,t){switch(s.tag){case 5:var e=s.type;return t=t.nodeType!==1||e.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(s.stateNode=t,_n=s,Sn=Nr(t.firstChild),!0):!1;case 6:return t=s.pendingProps===""||t.nodeType!==3?null:t,t!==null?(s.stateNode=t,_n=s,Sn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(e=co!==null?{id:Ei,overflow:Ci}:null,s.memoizedState={dehydrated:t,treeContext:e,retryLane:1073741824},e=Un(18,null,null,0),e.stateNode=t,e.return=s,s.child=e,_n=s,Sn=null,!0):!1;default:return!1}}function Qg(s){return(s.mode&1)!==0&&(s.flags&128)===0}function Zg(s){if(Pt){var t=Sn;if(t){var e=t;if(!Tv(s,t)){if(Qg(s))throw Error(M(418));t=Nr(e.nextSibling);var n=_n;t&&Tv(s,t)?UA(n,e):(s.flags=s.flags&-4097|2,Pt=!1,_n=s)}}else{if(Qg(s))throw Error(M(418));s.flags=s.flags&-4097|2,Pt=!1,_n=s}}}function Pv(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;_n=s}function vd(s){if(s!==_n)return!1;if(!Pt)return Pv(s),Pt=!0,!1;var t;if((t=s.tag!==3)&&!(t=s.tag!==5)&&(t=s.type,t=t!=="head"&&t!=="body"&&!Xg(s.type,s.memoizedProps)),t&&(t=Sn)){if(Qg(s))throw VA(),Error(M(418));for(;t;)UA(s,t),t=Nr(t.nextSibling)}if(Pv(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(M(317));t:{for(s=s.nextSibling,t=0;s;){if(s.nodeType===8){var e=s.data;if(e==="/$"){if(t===0){Sn=Nr(s.nextSibling);break t}t--}else e!=="$"&&e!=="$!"&&e!=="$?"||t++}s=s.nextSibling}Sn=null}}else Sn=_n?Nr(s.stateNode.nextSibling):null;return!0}function VA(){for(var s=Sn;s;)s=Nr(s.nextSibling)}function cc(){Sn=_n=null,Pt=!1}function n0(s){us===null?us=[s]:us.push(s)}var Y_=Fi.ReactCurrentBatchConfig;function _c(s,t,e){if(s=e.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(e._owner){if(e=e._owner,e){if(e.tag!==1)throw Error(M(309));var n=e.stateNode}if(!n)throw Error(M(147,s));var i=n,r=""+s;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===r?t.ref:(t=function(a){var l=i.refs;a===null?delete l[r]:l[r]=a},t._stringRef=r,t)}if(typeof s!="string")throw Error(M(284));if(!e._owner)throw Error(M(290,s))}return s}function wd(s,t){throw s=Object.prototype.toString.call(t),Error(M(31,s==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":s))}function Rv(s){var t=s._init;return t(s._payload)}function WA(s){function t(m,v){if(s){var b=m.deletions;b===null?(m.deletions=[v],m.flags|=16):b.push(v)}}function e(m,v){if(!s)return null;for(;v!==null;)t(m,v),v=v.sibling;return null}function n(m,v){for(m=new Map;v!==null;)v.key!==null?m.set(v.key,v):m.set(v.index,v),v=v.sibling;return m}function i(m,v){return m=Dr(m,v),m.index=0,m.sibling=null,m}function r(m,v,b){return m.index=b,s?(b=m.alternate,b!==null?(b=b.index,b<v?(m.flags|=2,v):b):(m.flags|=2,v)):(m.flags|=1048576,v)}function a(m){return s&&m.alternate===null&&(m.flags|=2),m}function l(m,v,b,_){return v===null||v.tag!==6?(v=pg(b,m.mode,_),v.return=m,v):(v=i(v,b),v.return=m,v)}function c(m,v,b,_){var E=b.type;return E===Mo?h(m,v,b.props.children,_,b.key):v!==null&&(v.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===zi&&Rv(E)===v.type)?(_=i(v,b.props),_.ref=_c(m,v,b),_.return=m,_):(_=$d(b.type,b.key,b.props,null,m.mode,_),_.ref=_c(m,v,b),_.return=m,_)}function u(m,v,b,_){return v===null||v.tag!==4||v.stateNode.containerInfo!==b.containerInfo||v.stateNode.implementation!==b.implementation?(v=gg(b,m.mode,_),v.return=m,v):(v=i(v,b.children||[]),v.return=m,v)}function h(m,v,b,_,E){return v===null||v.tag!==7?(v=oo(b,m.mode,_,E),v.return=m,v):(v=i(v,b),v.return=m,v)}function d(m,v,b){if(typeof v=="string"&&v!==""||typeof v=="number")return v=pg(""+v,m.mode,b),v.return=m,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case ld:return b=$d(v.type,v.key,v.props,null,m.mode,b),b.ref=_c(m,null,v),b.return=m,b;case No:return v=gg(v,m.mode,b),v.return=m,v;case zi:var _=v._init;return d(m,_(v._payload),b)}if(Mc(v)||wc(v))return v=oo(v,m.mode,b,null),v.return=m,v;wd(m,v)}return null}function f(m,v,b,_){var E=v!==null?v.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return E!==null?null:l(m,v,""+b,_);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case ld:return b.key===E?c(m,v,b,_):null;case No:return b.key===E?u(m,v,b,_):null;case zi:return E=b._init,f(m,v,E(b._payload),_)}if(Mc(b)||wc(b))return E!==null?null:h(m,v,b,_,null);wd(m,b)}return null}function p(m,v,b,_,E){if(typeof _=="string"&&_!==""||typeof _=="number")return m=m.get(b)||null,l(v,m,""+_,E);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case ld:return m=m.get(_.key===null?b:_.key)||null,c(v,m,_,E);case No:return m=m.get(_.key===null?b:_.key)||null,u(v,m,_,E);case zi:var k=_._init;return p(m,v,b,k(_._payload),E)}if(Mc(_)||wc(_))return m=m.get(b)||null,h(v,m,_,E,null);wd(v,_)}return null}function w(m,v,b,_){for(var E=null,k=null,T=v,P=v=0,R=null;T!==null&&P<b.length;P++){T.index>P?(R=T,T=null):R=T.sibling;var N=f(m,T,b[P],_);if(N===null){T===null&&(T=R);break}s&&T&&N.alternate===null&&t(m,T),v=r(N,v,P),k===null?E=N:k.sibling=N,k=N,T=R}if(P===b.length)return e(m,T),Pt&&Gr(m,P),E;if(T===null){for(;P<b.length;P++)T=d(m,b[P],_),T!==null&&(v=r(T,v,P),k===null?E=T:k.sibling=T,k=T);return Pt&&Gr(m,P),E}for(T=n(m,T);P<b.length;P++)R=p(T,m,P,b[P],_),R!==null&&(s&&R.alternate!==null&&T.delete(R.key===null?P:R.key),v=r(R,v,P),k===null?E=R:k.sibling=R,k=R);return s&&T.forEach(function(L){return t(m,L)}),Pt&&Gr(m,P),E}function y(m,v,b,_){var E=wc(b);if(typeof E!="function")throw Error(M(150));if(b=E.call(b),b==null)throw Error(M(151));for(var k=E=null,T=v,P=v=0,R=null,N=b.next();T!==null&&!N.done;P++,N=b.next()){T.index>P?(R=T,T=null):R=T.sibling;var L=f(m,T,N.value,_);if(L===null){T===null&&(T=R);break}s&&T&&L.alternate===null&&t(m,T),v=r(L,v,P),k===null?E=L:k.sibling=L,k=L,T=R}if(N.done)return e(m,T),Pt&&Gr(m,P),E;if(T===null){for(;!N.done;P++,N=b.next())N=d(m,N.value,_),N!==null&&(v=r(N,v,P),k===null?E=N:k.sibling=N,k=N);return Pt&&Gr(m,P),E}for(T=n(m,T);!N.done;P++,N=b.next())N=p(T,m,P,N.value,_),N!==null&&(s&&N.alternate!==null&&T.delete(N.key===null?P:N.key),v=r(N,v,P),k===null?E=N:k.sibling=N,k=N);return s&&T.forEach(function(st){return t(m,st)}),Pt&&Gr(m,P),E}function S(m,v,b,_){if(typeof b=="object"&&b!==null&&b.type===Mo&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case ld:t:{for(var E=b.key,k=v;k!==null;){if(k.key===E){if(E=b.type,E===Mo){if(k.tag===7){e(m,k.sibling),v=i(k,b.props.children),v.return=m,m=v;break t}}else if(k.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===zi&&Rv(E)===k.type){e(m,k.sibling),v=i(k,b.props),v.ref=_c(m,k,b),v.return=m,m=v;break t}e(m,k);break}else t(m,k);k=k.sibling}b.type===Mo?(v=oo(b.props.children,m.mode,_,b.key),v.return=m,m=v):(_=$d(b.type,b.key,b.props,null,m.mode,_),_.ref=_c(m,v,b),_.return=m,m=_)}return a(m);case No:t:{for(k=b.key;v!==null;){if(v.key===k)if(v.tag===4&&v.stateNode.containerInfo===b.containerInfo&&v.stateNode.implementation===b.implementation){e(m,v.sibling),v=i(v,b.children||[]),v.return=m,m=v;break t}else{e(m,v);break}else t(m,v);v=v.sibling}v=gg(b,m.mode,_),v.return=m,m=v}return a(m);case zi:return k=b._init,S(m,v,k(b._payload),_)}if(Mc(b))return w(m,v,b,_);if(wc(b))return y(m,v,b,_);wd(m,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,v!==null&&v.tag===6?(e(m,v.sibling),v=i(v,b),v.return=m,m=v):(e(m,v),v=pg(b,m.mode,_),v.return=m,m=v),a(m)):e(m,v)}return S}var uc=WA(!0),GA=WA(!1),Lf=Vr(null),Df=null,Bo=null,s0=null;function i0(){s0=Bo=Df=null}function r0(s){var t=Lf.current;Et(Lf),s._currentValue=t}function Jg(s,t,e){for(;s!==null;){var n=s.alternate;if((s.childLanes&t)!==t?(s.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),s===e)break;s=s.return}}function Ko(s,t){Df=s,s0=Bo=null,s=s.dependencies,s!==null&&s.firstContext!==null&&(s.lanes&t&&(tn=!0),s.firstContext=null)}function Gn(s){var t=s._currentValue;if(s0!==s)if(s={context:s,memoizedValue:t,next:null},Bo===null){if(Df===null)throw Error(M(308));Bo=s,Df.dependencies={lanes:0,firstContext:s}}else Bo=Bo.next=s;return t}var ta=null;function a0(s){ta===null?ta=[s]:ta.push(s)}function XA(s,t,e,n){var i=t.interleaved;return i===null?(e.next=e,a0(t)):(e.next=i.next,i.next=e),t.interleaved=e,Mi(s,n)}function Mi(s,t){s.lanes|=t;var e=s.alternate;for(e!==null&&(e.lanes|=t),e=s,s=s.return;s!==null;)s.childLanes|=t,e=s.alternate,e!==null&&(e.childLanes|=t),e=s,s=s.return;return e.tag===3?e.stateNode:null}var Bi=!1;function o0(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function qA(s,t){s=s.updateQueue,t.updateQueue===s&&(t.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function ki(s,t){return{eventTime:s,lane:t,tag:0,payload:null,callback:null,next:null}}function Mr(s,t,e){var n=s.updateQueue;if(n===null)return null;if(n=n.shared,at&2){var i=n.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),n.pending=t,Mi(s,e)}return i=n.interleaved,i===null?(t.next=t,a0(n)):(t.next=i.next,i.next=t),n.interleaved=t,Mi(s,e)}function Fd(s,t,e){if(t=t.updateQueue,t!==null&&(t=t.shared,(e&4194240)!==0)){var n=t.lanes;n&=s.pendingLanes,e|=n,t.lanes=e,Gy(s,e)}}function Nv(s,t){var e=s.updateQueue,n=s.alternate;if(n!==null&&(n=n.updateQueue,e===n)){var i=null,r=null;if(e=e.firstBaseUpdate,e!==null){do{var a={eventTime:e.eventTime,lane:e.lane,tag:e.tag,payload:e.payload,callback:e.callback,next:null};r===null?i=r=a:r=r.next=a,e=e.next}while(e!==null);r===null?i=r=t:r=r.next=t}else i=r=t;e={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:r,shared:n.shared,effects:n.effects},s.updateQueue=e;return}s=e.lastBaseUpdate,s===null?e.firstBaseUpdate=t:s.next=t,e.lastBaseUpdate=t}function Ff(s,t,e,n){var i=s.updateQueue;Bi=!1;var r=i.firstBaseUpdate,a=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var c=l,u=c.next;c.next=null,a===null?r=u:a.next=u,a=c;var h=s.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==a&&(l===null?h.firstBaseUpdate=u:l.next=u,h.lastBaseUpdate=c))}if(r!==null){var d=i.baseState;a=0,h=u=c=null,l=r;do{var f=l.lane,p=l.eventTime;if((n&f)===f){h!==null&&(h=h.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});t:{var w=s,y=l;switch(f=t,p=e,y.tag){case 1:if(w=y.payload,typeof w=="function"){d=w.call(p,d,f);break t}d=w;break t;case 3:w.flags=w.flags&-65537|128;case 0:if(w=y.payload,f=typeof w=="function"?w.call(p,d,f):w,f==null)break t;d=Lt({},d,f);break t;case 2:Bi=!0}}l.callback!==null&&l.lane!==0&&(s.flags|=64,f=i.effects,f===null?i.effects=[l]:f.push(l))}else p={eventTime:p,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(u=h=p,c=d):h=h.next=p,a|=f;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;f=l,l=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(h===null&&(c=d),i.baseState=c,i.firstBaseUpdate=u,i.lastBaseUpdate=h,t=i.shared.interleaved,t!==null){i=t;do a|=i.lane,i=i.next;while(i!==t)}else r===null&&(i.shared.lanes=0);ho|=a,s.lanes=a,s.memoizedState=d}}function Mv(s,t,e){if(s=t.effects,t.effects=null,s!==null)for(t=0;t<s.length;t++){var n=s[t],i=n.callback;if(i!==null){if(n.callback=null,n=e,typeof i!="function")throw Error(M(191,i));i.call(n)}}}var Jh={},Hs=Vr(Jh),vu=Vr(Jh),wu=Vr(Jh);function ea(s){if(s===Jh)throw Error(M(174));return s}function l0(s,t){switch(xt(wu,t),xt(vu,s),xt(Hs,Jh),s=t.nodeType,s){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ig(null,"");break;default:s=s===8?t.parentNode:t,t=s.namespaceURI||null,s=s.tagName,t=Ig(t,s)}Et(Hs),xt(Hs,t)}function hc(){Et(Hs),Et(vu),Et(wu)}function YA(s){ea(wu.current);var t=ea(Hs.current),e=Ig(t,s.type);t!==e&&(xt(vu,s),xt(Hs,e))}function c0(s){vu.current===s&&(Et(Hs),Et(vu))}var Mt=Vr(0);function Of(s){for(var t=s;t!==null;){if(t.tag===13){var e=t.memoizedState;if(e!==null&&(e=e.dehydrated,e===null||e.data==="$?"||e.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break;for(;t.sibling===null;){if(t.return===null||t.return===s)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var lg=[];function u0(){for(var s=0;s<lg.length;s++)lg[s]._workInProgressVersionPrimary=null;lg.length=0}var Od=Fi.ReactCurrentDispatcher,cg=Fi.ReactCurrentBatchConfig,uo=0,It=null,Zt=null,oe=null,jf=!1,su=!1,Au=0,K_=0;function Se(){throw Error(M(321))}function h0(s,t){if(t===null)return!1;for(var e=0;e<t.length&&e<s.length;e++)if(!ps(s[e],t[e]))return!1;return!0}function d0(s,t,e,n,i,r){if(uo=r,It=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Od.current=s===null||s.memoizedState===null?tE:eE,s=e(n,i),su){r=0;do{if(su=!1,Au=0,25<=r)throw Error(M(301));r+=1,oe=Zt=null,t.updateQueue=null,Od.current=nE,s=e(n,i)}while(su)}if(Od.current=zf,t=Zt!==null&&Zt.next!==null,uo=0,oe=Zt=It=null,jf=!1,t)throw Error(M(300));return s}function f0(){var s=Au!==0;return Au=0,s}function xs(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return oe===null?It.memoizedState=oe=s:oe=oe.next=s,oe}function Xn(){if(Zt===null){var s=It.alternate;s=s!==null?s.memoizedState:null}else s=Zt.next;var t=oe===null?It.memoizedState:oe.next;if(t!==null)oe=t,Zt=s;else{if(s===null)throw Error(M(310));Zt=s,s={memoizedState:Zt.memoizedState,baseState:Zt.baseState,baseQueue:Zt.baseQueue,queue:Zt.queue,next:null},oe===null?It.memoizedState=oe=s:oe=oe.next=s}return oe}function xu(s,t){return typeof t=="function"?t(s):t}function ug(s){var t=Xn(),e=t.queue;if(e===null)throw Error(M(311));e.lastRenderedReducer=s;var n=Zt,i=n.baseQueue,r=e.pending;if(r!==null){if(i!==null){var a=i.next;i.next=r.next,r.next=a}n.baseQueue=i=r,e.pending=null}if(i!==null){r=i.next,n=n.baseState;var l=a=null,c=null,u=r;do{var h=u.lane;if((uo&h)===h)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:s(n,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=d,a=n):c=c.next=d,It.lanes|=h,ho|=h}u=u.next}while(u!==null&&u!==r);c===null?a=n:c.next=l,ps(n,t.memoizedState)||(tn=!0),t.memoizedState=n,t.baseState=a,t.baseQueue=c,e.lastRenderedState=n}if(s=e.interleaved,s!==null){i=s;do r=i.lane,It.lanes|=r,ho|=r,i=i.next;while(i!==s)}else i===null&&(e.lanes=0);return[t.memoizedState,e.dispatch]}function hg(s){var t=Xn(),e=t.queue;if(e===null)throw Error(M(311));e.lastRenderedReducer=s;var n=e.dispatch,i=e.pending,r=t.memoizedState;if(i!==null){e.pending=null;var a=i=i.next;do r=s(r,a.action),a=a.next;while(a!==i);ps(r,t.memoizedState)||(tn=!0),t.memoizedState=r,t.baseQueue===null&&(t.baseState=r),e.lastRenderedState=r}return[r,n]}function KA(){}function QA(s,t){var e=It,n=Xn(),i=t(),r=!ps(n.memoizedState,i);if(r&&(n.memoizedState=i,tn=!0),n=n.queue,p0(t1.bind(null,e,n,s),[s]),n.getSnapshot!==t||r||oe!==null&&oe.memoizedState.tag&1){if(e.flags|=2048,bu(9,JA.bind(null,e,n,i,t),void 0,null),le===null)throw Error(M(349));uo&30||ZA(e,t,i)}return i}function ZA(s,t,e){s.flags|=16384,s={getSnapshot:t,value:e},t=It.updateQueue,t===null?(t={lastEffect:null,stores:null},It.updateQueue=t,t.stores=[s]):(e=t.stores,e===null?t.stores=[s]:e.push(s))}function JA(s,t,e,n){t.value=e,t.getSnapshot=n,e1(t)&&n1(s)}function t1(s,t,e){return e(function(){e1(t)&&n1(s)})}function e1(s){var t=s.getSnapshot;s=s.value;try{var e=t();return!ps(s,e)}catch{return!0}}function n1(s){var t=Mi(s,1);t!==null&&fs(t,s,1,-1)}function Iv(s){var t=xs();return typeof s=="function"&&(s=s()),t.memoizedState=t.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xu,lastRenderedState:s},t.queue=s,s=s.dispatch=J_.bind(null,It,s),[t.memoizedState,s]}function bu(s,t,e,n){return s={tag:s,create:t,destroy:e,deps:n,next:null},t=It.updateQueue,t===null?(t={lastEffect:null,stores:null},It.updateQueue=t,t.lastEffect=s.next=s):(e=t.lastEffect,e===null?t.lastEffect=s.next=s:(n=e.next,e.next=s,s.next=n,t.lastEffect=s)),s}function s1(){return Xn().memoizedState}function jd(s,t,e,n){var i=xs();It.flags|=s,i.memoizedState=bu(1|t,e,void 0,n===void 0?null:n)}function kp(s,t,e,n){var i=Xn();n=n===void 0?null:n;var r=void 0;if(Zt!==null){var a=Zt.memoizedState;if(r=a.destroy,n!==null&&h0(n,a.deps)){i.memoizedState=bu(t,e,r,n);return}}It.flags|=s,i.memoizedState=bu(1|t,e,r,n)}function Lv(s,t){return jd(8390656,8,s,t)}function p0(s,t){return kp(2048,8,s,t)}function i1(s,t){return kp(4,2,s,t)}function r1(s,t){return kp(4,4,s,t)}function a1(s,t){if(typeof t=="function")return s=s(),t(s),function(){t(null)};if(t!=null)return s=s(),t.current=s,function(){t.current=null}}function o1(s,t,e){return e=e!=null?e.concat([s]):null,kp(4,4,a1.bind(null,t,s),e)}function g0(){}function l1(s,t){var e=Xn();t=t===void 0?null:t;var n=e.memoizedState;return n!==null&&t!==null&&h0(t,n[1])?n[0]:(e.memoizedState=[s,t],s)}function c1(s,t){var e=Xn();t=t===void 0?null:t;var n=e.memoizedState;return n!==null&&t!==null&&h0(t,n[1])?n[0]:(s=s(),e.memoizedState=[s,t],s)}function u1(s,t,e){return uo&21?(ps(e,t)||(e=gA(),It.lanes|=e,ho|=e,s.baseState=!0),t):(s.baseState&&(s.baseState=!1,tn=!0),s.memoizedState=e)}function Q_(s,t){var e=ft;ft=e!==0&&4>e?e:4,s(!0);var n=cg.transition;cg.transition={};try{s(!1),t()}finally{ft=e,cg.transition=n}}function h1(){return Xn().memoizedState}function Z_(s,t,e){var n=Lr(s);if(e={lane:n,action:e,hasEagerState:!1,eagerState:null,next:null},d1(s))f1(t,e);else if(e=XA(s,t,e,n),e!==null){var i=$e();fs(e,s,n,i),p1(e,t,n)}}function J_(s,t,e){var n=Lr(s),i={lane:n,action:e,hasEagerState:!1,eagerState:null,next:null};if(d1(s))f1(t,i);else{var r=s.alternate;if(s.lanes===0&&(r===null||r.lanes===0)&&(r=t.lastRenderedReducer,r!==null))try{var a=t.lastRenderedState,l=r(a,e);if(i.hasEagerState=!0,i.eagerState=l,ps(l,a)){var c=t.interleaved;c===null?(i.next=i,a0(t)):(i.next=c.next,c.next=i),t.interleaved=i;return}}catch{}finally{}e=XA(s,t,i,n),e!==null&&(i=$e(),fs(e,s,n,i),p1(e,t,n))}}function d1(s){var t=s.alternate;return s===It||t!==null&&t===It}function f1(s,t){su=jf=!0;var e=s.pending;e===null?t.next=t:(t.next=e.next,e.next=t),s.pending=t}function p1(s,t,e){if(e&4194240){var n=t.lanes;n&=s.pendingLanes,e|=n,t.lanes=e,Gy(s,e)}}var zf={readContext:Gn,useCallback:Se,useContext:Se,useEffect:Se,useImperativeHandle:Se,useInsertionEffect:Se,useLayoutEffect:Se,useMemo:Se,useReducer:Se,useRef:Se,useState:Se,useDebugValue:Se,useDeferredValue:Se,useTransition:Se,useMutableSource:Se,useSyncExternalStore:Se,useId:Se,unstable_isNewReconciler:!1},tE={readContext:Gn,useCallback:function(s,t){return xs().memoizedState=[s,t===void 0?null:t],s},useContext:Gn,useEffect:Lv,useImperativeHandle:function(s,t,e){return e=e!=null?e.concat([s]):null,jd(4194308,4,a1.bind(null,t,s),e)},useLayoutEffect:function(s,t){return jd(4194308,4,s,t)},useInsertionEffect:function(s,t){return jd(4,2,s,t)},useMemo:function(s,t){var e=xs();return t=t===void 0?null:t,s=s(),e.memoizedState=[s,t],s},useReducer:function(s,t,e){var n=xs();return t=e!==void 0?e(t):t,n.memoizedState=n.baseState=t,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:t},n.queue=s,s=s.dispatch=Z_.bind(null,It,s),[n.memoizedState,s]},useRef:function(s){var t=xs();return s={current:s},t.memoizedState=s},useState:Iv,useDebugValue:g0,useDeferredValue:function(s){return xs().memoizedState=s},useTransition:function(){var s=Iv(!1),t=s[0];return s=Q_.bind(null,s[1]),xs().memoizedState=s,[t,s]},useMutableSource:function(){},useSyncExternalStore:function(s,t,e){var n=It,i=xs();if(Pt){if(e===void 0)throw Error(M(407));e=e()}else{if(e=t(),le===null)throw Error(M(349));uo&30||ZA(n,t,e)}i.memoizedState=e;var r={value:e,getSnapshot:t};return i.queue=r,Lv(t1.bind(null,n,r,s),[s]),n.flags|=2048,bu(9,JA.bind(null,n,r,e,t),void 0,null),e},useId:function(){var s=xs(),t=le.identifierPrefix;if(Pt){var e=Ci,n=Ei;e=(n&~(1<<32-ds(n)-1)).toString(32)+e,t=":"+t+"R"+e,e=Au++,0<e&&(t+="H"+e.toString(32)),t+=":"}else e=K_++,t=":"+t+"r"+e.toString(32)+":";return s.memoizedState=t},unstable_isNewReconciler:!1},eE={readContext:Gn,useCallback:l1,useContext:Gn,useEffect:p0,useImperativeHandle:o1,useInsertionEffect:i1,useLayoutEffect:r1,useMemo:c1,useReducer:ug,useRef:s1,useState:function(){return ug(xu)},useDebugValue:g0,useDeferredValue:function(s){var t=Xn();return u1(t,Zt.memoizedState,s)},useTransition:function(){var s=ug(xu)[0],t=Xn().memoizedState;return[s,t]},useMutableSource:KA,useSyncExternalStore:QA,useId:h1,unstable_isNewReconciler:!1},nE={readContext:Gn,useCallback:l1,useContext:Gn,useEffect:p0,useImperativeHandle:o1,useInsertionEffect:i1,useLayoutEffect:r1,useMemo:c1,useReducer:hg,useRef:s1,useState:function(){return hg(xu)},useDebugValue:g0,useDeferredValue:function(s){var t=Xn();return Zt===null?t.memoizedState=s:u1(t,Zt.memoizedState,s)},useTransition:function(){var s=hg(xu)[0],t=Xn().memoizedState;return[s,t]},useMutableSource:KA,useSyncExternalStore:QA,useId:h1,unstable_isNewReconciler:!1};function Kn(s,t){if(s&&s.defaultProps){t=Lt({},t),s=s.defaultProps;for(var e in s)t[e]===void 0&&(t[e]=s[e]);return t}return t}function tm(s,t,e,n){t=s.memoizedState,e=e(n,t),e=e==null?t:Lt({},t,e),s.memoizedState=e,s.lanes===0&&(s.updateQueue.baseState=e)}var Tp={isMounted:function(s){return(s=s._reactInternals)?vo(s)===s:!1},enqueueSetState:function(s,t,e){s=s._reactInternals;var n=$e(),i=Lr(s),r=ki(n,i);r.payload=t,e!=null&&(r.callback=e),t=Mr(s,r,i),t!==null&&(fs(t,s,i,n),Fd(t,s,i))},enqueueReplaceState:function(s,t,e){s=s._reactInternals;var n=$e(),i=Lr(s),r=ki(n,i);r.tag=1,r.payload=t,e!=null&&(r.callback=e),t=Mr(s,r,i),t!==null&&(fs(t,s,i,n),Fd(t,s,i))},enqueueForceUpdate:function(s,t){s=s._reactInternals;var e=$e(),n=Lr(s),i=ki(e,n);i.tag=2,t!=null&&(i.callback=t),t=Mr(s,i,n),t!==null&&(fs(t,s,n,e),Fd(t,s,n))}};function Dv(s,t,e,n,i,r,a){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(n,r,a):t.prototype&&t.prototype.isPureReactComponent?!pu(e,n)||!pu(i,r):!0}function g1(s,t,e){var n=!1,i=Or,r=t.contextType;return typeof r=="object"&&r!==null?r=Gn(r):(i=nn(t)?lo:Me.current,n=t.contextTypes,r=(n=n!=null)?lc(s,i):Or),t=new t(e,r),s.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Tp,s.stateNode=t,t._reactInternals=s,n&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=i,s.__reactInternalMemoizedMaskedChildContext=r),t}function Fv(s,t,e,n){s=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(e,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(e,n),t.state!==s&&Tp.enqueueReplaceState(t,t.state,null)}function em(s,t,e,n){var i=s.stateNode;i.props=e,i.state=s.memoizedState,i.refs={},o0(s);var r=t.contextType;typeof r=="object"&&r!==null?i.context=Gn(r):(r=nn(t)?lo:Me.current,i.context=lc(s,r)),i.state=s.memoizedState,r=t.getDerivedStateFromProps,typeof r=="function"&&(tm(s,t,r,e),i.state=s.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&Tp.enqueueReplaceState(i,i.state,null),Ff(s,e,i,n),i.state=s.memoizedState),typeof i.componentDidMount=="function"&&(s.flags|=4194308)}function dc(s,t){try{var e="",n=t;do e+=RS(n),n=n.return;while(n);var i=e}catch(r){i=`
Error generating stack: `+r.message+`
`+r.stack}return{value:s,source:t,stack:i,digest:null}}function dg(s,t,e){return{value:s,source:null,stack:e??null,digest:t??null}}function nm(s,t){try{console.error(t.value)}catch(e){setTimeout(function(){throw e})}}var sE=typeof WeakMap=="function"?WeakMap:Map;function m1(s,t,e){e=ki(-1,e),e.tag=3,e.payload={element:null};var n=t.value;return e.callback=function(){Hf||(Hf=!0,dm=n),nm(s,t)},e}function y1(s,t,e){e=ki(-1,e),e.tag=3;var n=s.type.getDerivedStateFromError;if(typeof n=="function"){var i=t.value;e.payload=function(){return n(i)},e.callback=function(){nm(s,t)}}var r=s.stateNode;return r!==null&&typeof r.componentDidCatch=="function"&&(e.callback=function(){nm(s,t),typeof n!="function"&&(Ir===null?Ir=new Set([this]):Ir.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),e}function Ov(s,t,e){var n=s.pingCache;if(n===null){n=s.pingCache=new sE;var i=new Set;n.set(t,i)}else i=n.get(t),i===void 0&&(i=new Set,n.set(t,i));i.has(e)||(i.add(e),s=yE.bind(null,s,t,e),t.then(s,s))}function jv(s){do{var t;if((t=s.tag===13)&&(t=s.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return s;s=s.return}while(s!==null);return null}function zv(s,t,e,n,i){return s.mode&1?(s.flags|=65536,s.lanes=i,s):(s===t?s.flags|=65536:(s.flags|=128,e.flags|=131072,e.flags&=-52805,e.tag===1&&(e.alternate===null?e.tag=17:(t=ki(-1,1),t.tag=2,Mr(e,t,1))),e.lanes|=1),s)}var iE=Fi.ReactCurrentOwner,tn=!1;function He(s,t,e,n){t.child=s===null?GA(t,null,e,n):uc(t,s.child,e,n)}function Bv(s,t,e,n,i){e=e.render;var r=t.ref;return Ko(t,i),n=d0(s,t,e,n,r,i),e=f0(),s!==null&&!tn?(t.updateQueue=s.updateQueue,t.flags&=-2053,s.lanes&=~i,Ii(s,t,i)):(Pt&&e&&t0(t),t.flags|=1,He(s,t,n,i),t.child)}function Hv(s,t,e,n,i){if(s===null){var r=e.type;return typeof r=="function"&&!S0(r)&&r.defaultProps===void 0&&e.compare===null&&e.defaultProps===void 0?(t.tag=15,t.type=r,v1(s,t,r,n,i)):(s=$d(e.type,null,n,t,t.mode,i),s.ref=t.ref,s.return=t,t.child=s)}if(r=s.child,!(s.lanes&i)){var a=r.memoizedProps;if(e=e.compare,e=e!==null?e:pu,e(a,n)&&s.ref===t.ref)return Ii(s,t,i)}return t.flags|=1,s=Dr(r,n),s.ref=t.ref,s.return=t,t.child=s}function v1(s,t,e,n,i){if(s!==null){var r=s.memoizedProps;if(pu(r,n)&&s.ref===t.ref)if(tn=!1,t.pendingProps=n=r,(s.lanes&i)!==0)s.flags&131072&&(tn=!0);else return t.lanes=s.lanes,Ii(s,t,i)}return sm(s,t,e,n,i)}function w1(s,t,e){var n=t.pendingProps,i=n.children,r=s!==null?s.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},xt($o,An),An|=e;else{if(!(e&1073741824))return s=r!==null?r.baseLanes|e:e,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:s,cachePool:null,transitions:null},t.updateQueue=null,xt($o,An),An|=s,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=r!==null?r.baseLanes:e,xt($o,An),An|=n}else r!==null?(n=r.baseLanes|e,t.memoizedState=null):n=e,xt($o,An),An|=n;return He(s,t,i,e),t.child}function A1(s,t){var e=t.ref;(s===null&&e!==null||s!==null&&s.ref!==e)&&(t.flags|=512,t.flags|=2097152)}function sm(s,t,e,n,i){var r=nn(e)?lo:Me.current;return r=lc(t,r),Ko(t,i),e=d0(s,t,e,n,r,i),n=f0(),s!==null&&!tn?(t.updateQueue=s.updateQueue,t.flags&=-2053,s.lanes&=~i,Ii(s,t,i)):(Pt&&n&&t0(t),t.flags|=1,He(s,t,e,i),t.child)}function $v(s,t,e,n,i){if(nn(e)){var r=!0;Nf(t)}else r=!1;if(Ko(t,i),t.stateNode===null)zd(s,t),g1(t,e,n),em(t,e,n,i),n=!0;else if(s===null){var a=t.stateNode,l=t.memoizedProps;a.props=l;var c=a.context,u=e.contextType;typeof u=="object"&&u!==null?u=Gn(u):(u=nn(e)?lo:Me.current,u=lc(t,u));var h=e.getDerivedStateFromProps,d=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function";d||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==n||c!==u)&&Fv(t,a,n,u),Bi=!1;var f=t.memoizedState;a.state=f,Ff(t,n,a,i),c=t.memoizedState,l!==n||f!==c||en.current||Bi?(typeof h=="function"&&(tm(t,e,h,n),c=t.memoizedState),(l=Bi||Dv(t,e,l,n,f,c,u))?(d||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),a.props=n,a.state=c,a.context=u,n=l):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{a=t.stateNode,qA(s,t),l=t.memoizedProps,u=t.type===t.elementType?l:Kn(t.type,l),a.props=u,d=t.pendingProps,f=a.context,c=e.contextType,typeof c=="object"&&c!==null?c=Gn(c):(c=nn(e)?lo:Me.current,c=lc(t,c));var p=e.getDerivedStateFromProps;(h=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==d||f!==c)&&Fv(t,a,n,c),Bi=!1,f=t.memoizedState,a.state=f,Ff(t,n,a,i);var w=t.memoizedState;l!==d||f!==w||en.current||Bi?(typeof p=="function"&&(tm(t,e,p,n),w=t.memoizedState),(u=Bi||Dv(t,e,u,n,f,w,c)||!1)?(h||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,w,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,w,c)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===s.memoizedProps&&f===s.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===s.memoizedProps&&f===s.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=w),a.props=n,a.state=w,a.context=c,n=u):(typeof a.componentDidUpdate!="function"||l===s.memoizedProps&&f===s.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===s.memoizedProps&&f===s.memoizedState||(t.flags|=1024),n=!1)}return im(s,t,e,n,r,i)}function im(s,t,e,n,i,r){A1(s,t);var a=(t.flags&128)!==0;if(!n&&!a)return i&&kv(t,e,!1),Ii(s,t,r);n=t.stateNode,iE.current=t;var l=a&&typeof e.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,s!==null&&a?(t.child=uc(t,s.child,null,r),t.child=uc(t,null,l,r)):He(s,t,l,r),t.memoizedState=n.state,i&&kv(t,e,!0),t.child}function x1(s){var t=s.stateNode;t.pendingContext?Cv(s,t.pendingContext,t.pendingContext!==t.context):t.context&&Cv(s,t.context,!1),l0(s,t.containerInfo)}function Uv(s,t,e,n,i){return cc(),n0(i),t.flags|=256,He(s,t,e,n),t.child}var rm={dehydrated:null,treeContext:null,retryLane:0};function am(s){return{baseLanes:s,cachePool:null,transitions:null}}function b1(s,t,e){var n=t.pendingProps,i=Mt.current,r=!1,a=(t.flags&128)!==0,l;if((l=a)||(l=s!==null&&s.memoizedState===null?!1:(i&2)!==0),l?(r=!0,t.flags&=-129):(s===null||s.memoizedState!==null)&&(i|=1),xt(Mt,i&1),s===null)return Zg(t),s=t.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?(t.mode&1?s.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=n.children,s=n.fallback,r?(n=t.mode,r=t.child,a={mode:"hidden",children:a},!(n&1)&&r!==null?(r.childLanes=0,r.pendingProps=a):r=Np(a,n,0,null),s=oo(s,n,e,null),r.return=t,s.return=t,r.sibling=s,t.child=r,t.child.memoizedState=am(e),t.memoizedState=rm,s):m0(t,a));if(i=s.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return rE(s,t,a,n,l,i,e);if(r){r=n.fallback,a=t.mode,i=s.child,l=i.sibling;var c={mode:"hidden",children:n.children};return!(a&1)&&t.child!==i?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=Dr(i,c),n.subtreeFlags=i.subtreeFlags&14680064),l!==null?r=Dr(l,r):(r=oo(r,a,e,null),r.flags|=2),r.return=t,n.return=t,n.sibling=r,t.child=n,n=r,r=t.child,a=s.child.memoizedState,a=a===null?am(e):{baseLanes:a.baseLanes|e,cachePool:null,transitions:a.transitions},r.memoizedState=a,r.childLanes=s.childLanes&~e,t.memoizedState=rm,n}return r=s.child,s=r.sibling,n=Dr(r,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=e),n.return=t,n.sibling=null,s!==null&&(e=t.deletions,e===null?(t.deletions=[s],t.flags|=16):e.push(s)),t.child=n,t.memoizedState=null,n}function m0(s,t){return t=Np({mode:"visible",children:t},s.mode,0,null),t.return=s,s.child=t}function Ad(s,t,e,n){return n!==null&&n0(n),uc(t,s.child,null,e),s=m0(t,t.pendingProps.children),s.flags|=2,t.memoizedState=null,s}function rE(s,t,e,n,i,r,a){if(e)return t.flags&256?(t.flags&=-257,n=dg(Error(M(422))),Ad(s,t,a,n)):t.memoizedState!==null?(t.child=s.child,t.flags|=128,null):(r=n.fallback,i=t.mode,n=Np({mode:"visible",children:n.children},i,0,null),r=oo(r,i,a,null),r.flags|=2,n.return=t,r.return=t,n.sibling=r,t.child=n,t.mode&1&&uc(t,s.child,null,a),t.child.memoizedState=am(a),t.memoizedState=rm,r);if(!(t.mode&1))return Ad(s,t,a,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var l=n.dgst;return n=l,r=Error(M(419)),n=dg(r,n,void 0),Ad(s,t,a,n)}if(l=(a&s.childLanes)!==0,tn||l){if(n=le,n!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|a)?0:i,i!==0&&i!==r.retryLane&&(r.retryLane=i,Mi(s,i),fs(n,s,i,-1))}return b0(),n=dg(Error(M(421))),Ad(s,t,a,n)}return i.data==="$?"?(t.flags|=128,t.child=s.child,t=vE.bind(null,s),i._reactRetry=t,null):(s=r.treeContext,Sn=Nr(i.nextSibling),_n=t,Pt=!0,us=null,s!==null&&(zn[Bn++]=Ei,zn[Bn++]=Ci,zn[Bn++]=co,Ei=s.id,Ci=s.overflow,co=t),t=m0(t,n.children),t.flags|=4096,t)}function Vv(s,t,e){s.lanes|=t;var n=s.alternate;n!==null&&(n.lanes|=t),Jg(s.return,t,e)}function fg(s,t,e,n,i){var r=s.memoizedState;r===null?s.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:e,tailMode:i}:(r.isBackwards=t,r.rendering=null,r.renderingStartTime=0,r.last=n,r.tail=e,r.tailMode=i)}function S1(s,t,e){var n=t.pendingProps,i=n.revealOrder,r=n.tail;if(He(s,t,n.children,e),n=Mt.current,n&2)n=n&1|2,t.flags|=128;else{if(s!==null&&s.flags&128)t:for(s=t.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&Vv(s,e,t);else if(s.tag===19)Vv(s,e,t);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break t;for(;s.sibling===null;){if(s.return===null||s.return===t)break t;s=s.return}s.sibling.return=s.return,s=s.sibling}n&=1}if(xt(Mt,n),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(e=t.child,i=null;e!==null;)s=e.alternate,s!==null&&Of(s)===null&&(i=e),e=e.sibling;e=i,e===null?(i=t.child,t.child=null):(i=e.sibling,e.sibling=null),fg(t,!1,i,e,r);break;case"backwards":for(e=null,i=t.child,t.child=null;i!==null;){if(s=i.alternate,s!==null&&Of(s)===null){t.child=i;break}s=i.sibling,i.sibling=e,e=i,i=s}fg(t,!0,e,null,r);break;case"together":fg(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function zd(s,t){!(t.mode&1)&&s!==null&&(s.alternate=null,t.alternate=null,t.flags|=2)}function Ii(s,t,e){if(s!==null&&(t.dependencies=s.dependencies),ho|=t.lanes,!(e&t.childLanes))return null;if(s!==null&&t.child!==s.child)throw Error(M(153));if(t.child!==null){for(s=t.child,e=Dr(s,s.pendingProps),t.child=e,e.return=t;s.sibling!==null;)s=s.sibling,e=e.sibling=Dr(s,s.pendingProps),e.return=t;e.sibling=null}return t.child}function aE(s,t,e){switch(t.tag){case 3:x1(t),cc();break;case 5:YA(t);break;case 1:nn(t.type)&&Nf(t);break;case 4:l0(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,i=t.memoizedProps.value;xt(Lf,n._currentValue),n._currentValue=i;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(xt(Mt,Mt.current&1),t.flags|=128,null):e&t.child.childLanes?b1(s,t,e):(xt(Mt,Mt.current&1),s=Ii(s,t,e),s!==null?s.sibling:null);xt(Mt,Mt.current&1);break;case 19:if(n=(e&t.childLanes)!==0,s.flags&128){if(n)return S1(s,t,e);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),xt(Mt,Mt.current),n)break;return null;case 22:case 23:return t.lanes=0,w1(s,t,e)}return Ii(s,t,e)}var _1,om,E1,C1;_1=function(s,t){for(var e=t.child;e!==null;){if(e.tag===5||e.tag===6)s.appendChild(e.stateNode);else if(e.tag!==4&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return;e=e.return}e.sibling.return=e.return,e=e.sibling}};om=function(){};E1=function(s,t,e,n){var i=s.memoizedProps;if(i!==n){s=t.stateNode,ea(Hs.current);var r=null;switch(e){case"input":i=Pg(s,i),n=Pg(s,n),r=[];break;case"select":i=Lt({},i,{value:void 0}),n=Lt({},n,{value:void 0}),r=[];break;case"textarea":i=Mg(s,i),n=Mg(s,n),r=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(s.onclick=Pf)}Lg(e,n);var a;e=null;for(u in i)if(!n.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var l=i[u];for(a in l)l.hasOwnProperty(a)&&(e||(e={}),e[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(ou.hasOwnProperty(u)?r||(r=[]):(r=r||[]).push(u,null));for(u in n){var c=n[u];if(l=i!=null?i[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(e||(e={}),e[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(e||(e={}),e[a]=c[a])}else e||(r||(r=[]),r.push(u,e)),e=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(r=r||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(r=r||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(ou.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&St("scroll",s),r||l===c||(r=[])):(r=r||[]).push(u,c))}e&&(r=r||[]).push("style",e);var u=r;(t.updateQueue=u)&&(t.flags|=4)}};C1=function(s,t,e,n){e!==n&&(t.flags|=4)};function Ec(s,t){if(!Pt)switch(s.tailMode){case"hidden":t=s.tail;for(var e=null;t!==null;)t.alternate!==null&&(e=t),t=t.sibling;e===null?s.tail=null:e.sibling=null;break;case"collapsed":e=s.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t||s.tail===null?s.tail=null:s.tail.sibling=null:n.sibling=null}}function _e(s){var t=s.alternate!==null&&s.alternate.child===s.child,e=0,n=0;if(t)for(var i=s.child;i!==null;)e|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=s,i=i.sibling;else for(i=s.child;i!==null;)e|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=s,i=i.sibling;return s.subtreeFlags|=n,s.childLanes=e,t}function oE(s,t,e){var n=t.pendingProps;switch(e0(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _e(t),null;case 1:return nn(t.type)&&Rf(),_e(t),null;case 3:return n=t.stateNode,hc(),Et(en),Et(Me),u0(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(s===null||s.child===null)&&(vd(t)?t.flags|=4:s===null||s.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,us!==null&&(gm(us),us=null))),om(s,t),_e(t),null;case 5:c0(t);var i=ea(wu.current);if(e=t.type,s!==null&&t.stateNode!=null)E1(s,t,e,n,i),s.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(M(166));return _e(t),null}if(s=ea(Hs.current),vd(t)){n=t.stateNode,e=t.type;var r=t.memoizedProps;switch(n[js]=t,n[yu]=r,s=(t.mode&1)!==0,e){case"dialog":St("cancel",n),St("close",n);break;case"iframe":case"object":case"embed":St("load",n);break;case"video":case"audio":for(i=0;i<Lc.length;i++)St(Lc[i],n);break;case"source":St("error",n);break;case"img":case"image":case"link":St("error",n),St("load",n);break;case"details":St("toggle",n);break;case"input":J0(n,r),St("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!r.multiple},St("invalid",n);break;case"textarea":ev(n,r),St("invalid",n)}Lg(e,r),i=null;for(var a in r)if(r.hasOwnProperty(a)){var l=r[a];a==="children"?typeof l=="string"?n.textContent!==l&&(r.suppressHydrationWarning!==!0&&yd(n.textContent,l,s),i=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(r.suppressHydrationWarning!==!0&&yd(n.textContent,l,s),i=["children",""+l]):ou.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&St("scroll",n)}switch(e){case"input":cd(n),tv(n,r,!0);break;case"textarea":cd(n),nv(n);break;case"select":case"option":break;default:typeof r.onClick=="function"&&(n.onclick=Pf)}n=i,t.updateQueue=n,n!==null&&(t.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=tA(e)),s==="http://www.w3.org/1999/xhtml"?e==="script"?(s=a.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof n.is=="string"?s=a.createElement(e,{is:n.is}):(s=a.createElement(e),e==="select"&&(a=s,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):s=a.createElementNS(s,e),s[js]=t,s[yu]=n,_1(s,t,!1,!1),t.stateNode=s;t:{switch(a=Dg(e,n),e){case"dialog":St("cancel",s),St("close",s),i=n;break;case"iframe":case"object":case"embed":St("load",s),i=n;break;case"video":case"audio":for(i=0;i<Lc.length;i++)St(Lc[i],s);i=n;break;case"source":St("error",s),i=n;break;case"img":case"image":case"link":St("error",s),St("load",s),i=n;break;case"details":St("toggle",s),i=n;break;case"input":J0(s,n),i=Pg(s,n),St("invalid",s);break;case"option":i=n;break;case"select":s._wrapperState={wasMultiple:!!n.multiple},i=Lt({},n,{value:void 0}),St("invalid",s);break;case"textarea":ev(s,n),i=Mg(s,n),St("invalid",s);break;default:i=n}Lg(e,i),l=i;for(r in l)if(l.hasOwnProperty(r)){var c=l[r];r==="style"?sA(s,c):r==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&eA(s,c)):r==="children"?typeof c=="string"?(e!=="textarea"||c!=="")&&lu(s,c):typeof c=="number"&&lu(s,""+c):r!=="suppressContentEditableWarning"&&r!=="suppressHydrationWarning"&&r!=="autoFocus"&&(ou.hasOwnProperty(r)?c!=null&&r==="onScroll"&&St("scroll",s):c!=null&&By(s,r,c,a))}switch(e){case"input":cd(s),tv(s,n,!1);break;case"textarea":cd(s),nv(s);break;case"option":n.value!=null&&s.setAttribute("value",""+Fr(n.value));break;case"select":s.multiple=!!n.multiple,r=n.value,r!=null?Go(s,!!n.multiple,r,!1):n.defaultValue!=null&&Go(s,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(s.onclick=Pf)}switch(e){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break t;case"img":n=!0;break t;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return _e(t),null;case 6:if(s&&t.stateNode!=null)C1(s,t,s.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(M(166));if(e=ea(wu.current),ea(Hs.current),vd(t)){if(n=t.stateNode,e=t.memoizedProps,n[js]=t,(r=n.nodeValue!==e)&&(s=_n,s!==null))switch(s.tag){case 3:yd(n.nodeValue,e,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&yd(n.nodeValue,e,(s.mode&1)!==0)}r&&(t.flags|=4)}else n=(e.nodeType===9?e:e.ownerDocument).createTextNode(n),n[js]=t,t.stateNode=n}return _e(t),null;case 13:if(Et(Mt),n=t.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(Pt&&Sn!==null&&t.mode&1&&!(t.flags&128))VA(),cc(),t.flags|=98560,r=!1;else if(r=vd(t),n!==null&&n.dehydrated!==null){if(s===null){if(!r)throw Error(M(318));if(r=t.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(M(317));r[js]=t}else cc(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;_e(t),r=!1}else us!==null&&(gm(us),us=null),r=!0;if(!r)return t.flags&65536?t:null}return t.flags&128?(t.lanes=e,t):(n=n!==null,n!==(s!==null&&s.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(s===null||Mt.current&1?Jt===0&&(Jt=3):b0())),t.updateQueue!==null&&(t.flags|=4),_e(t),null);case 4:return hc(),om(s,t),s===null&&gu(t.stateNode.containerInfo),_e(t),null;case 10:return r0(t.type._context),_e(t),null;case 17:return nn(t.type)&&Rf(),_e(t),null;case 19:if(Et(Mt),r=t.memoizedState,r===null)return _e(t),null;if(n=(t.flags&128)!==0,a=r.rendering,a===null)if(n)Ec(r,!1);else{if(Jt!==0||s!==null&&s.flags&128)for(s=t.child;s!==null;){if(a=Of(s),a!==null){for(t.flags|=128,Ec(r,!1),n=a.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=e,e=t.child;e!==null;)r=e,s=n,r.flags&=14680066,a=r.alternate,a===null?(r.childLanes=0,r.lanes=s,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=a.childLanes,r.lanes=a.lanes,r.child=a.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=a.memoizedProps,r.memoizedState=a.memoizedState,r.updateQueue=a.updateQueue,r.type=a.type,s=a.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),e=e.sibling;return xt(Mt,Mt.current&1|2),t.child}s=s.sibling}r.tail!==null&&zt()>fc&&(t.flags|=128,n=!0,Ec(r,!1),t.lanes=4194304)}else{if(!n)if(s=Of(a),s!==null){if(t.flags|=128,n=!0,e=s.updateQueue,e!==null&&(t.updateQueue=e,t.flags|=4),Ec(r,!0),r.tail===null&&r.tailMode==="hidden"&&!a.alternate&&!Pt)return _e(t),null}else 2*zt()-r.renderingStartTime>fc&&e!==1073741824&&(t.flags|=128,n=!0,Ec(r,!1),t.lanes=4194304);r.isBackwards?(a.sibling=t.child,t.child=a):(e=r.last,e!==null?e.sibling=a:t.child=a,r.last=a)}return r.tail!==null?(t=r.tail,r.rendering=t,r.tail=t.sibling,r.renderingStartTime=zt(),t.sibling=null,e=Mt.current,xt(Mt,n?e&1|2:e&1),t):(_e(t),null);case 22:case 23:return x0(),n=t.memoizedState!==null,s!==null&&s.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?An&1073741824&&(_e(t),t.subtreeFlags&6&&(t.flags|=8192)):_e(t),null;case 24:return null;case 25:return null}throw Error(M(156,t.tag))}function lE(s,t){switch(e0(t),t.tag){case 1:return nn(t.type)&&Rf(),s=t.flags,s&65536?(t.flags=s&-65537|128,t):null;case 3:return hc(),Et(en),Et(Me),u0(),s=t.flags,s&65536&&!(s&128)?(t.flags=s&-65537|128,t):null;case 5:return c0(t),null;case 13:if(Et(Mt),s=t.memoizedState,s!==null&&s.dehydrated!==null){if(t.alternate===null)throw Error(M(340));cc()}return s=t.flags,s&65536?(t.flags=s&-65537|128,t):null;case 19:return Et(Mt),null;case 4:return hc(),null;case 10:return r0(t.type._context),null;case 22:case 23:return x0(),null;case 24:return null;default:return null}}var xd=!1,Ne=!1,cE=typeof WeakSet=="function"?WeakSet:Set,z=null;function Ho(s,t){var e=s.ref;if(e!==null)if(typeof e=="function")try{e(null)}catch(n){Ft(s,t,n)}else e.current=null}function lm(s,t,e){try{e()}catch(n){Ft(s,t,n)}}var Wv=!1;function uE(s,t){if(Wg=Cf,s=NA(),Jy(s)){if("selectionStart"in s)var e={start:s.selectionStart,end:s.selectionEnd};else t:{e=(e=s.ownerDocument)&&e.defaultView||window;var n=e.getSelection&&e.getSelection();if(n&&n.rangeCount!==0){e=n.anchorNode;var i=n.anchorOffset,r=n.focusNode;n=n.focusOffset;try{e.nodeType,r.nodeType}catch{e=null;break t}var a=0,l=-1,c=-1,u=0,h=0,d=s,f=null;e:for(;;){for(var p;d!==e||i!==0&&d.nodeType!==3||(l=a+i),d!==r||n!==0&&d.nodeType!==3||(c=a+n),d.nodeType===3&&(a+=d.nodeValue.length),(p=d.firstChild)!==null;)f=d,d=p;for(;;){if(d===s)break e;if(f===e&&++u===i&&(l=a),f===r&&++h===n&&(c=a),(p=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=p}e=l===-1||c===-1?null:{start:l,end:c}}else e=null}e=e||{start:0,end:0}}else e=null;for(Gg={focusedElem:s,selectionRange:e},Cf=!1,z=t;z!==null;)if(t=z,s=t.child,(t.subtreeFlags&1028)!==0&&s!==null)s.return=t,z=s;else for(;z!==null;){t=z;try{var w=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var y=w.memoizedProps,S=w.memoizedState,m=t.stateNode,v=m.getSnapshotBeforeUpdate(t.elementType===t.type?y:Kn(t.type,y),S);m.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(M(163))}}catch(_){Ft(t,t.return,_)}if(s=t.sibling,s!==null){s.return=t.return,z=s;break}z=t.return}return w=Wv,Wv=!1,w}function iu(s,t,e){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&s)===s){var r=i.destroy;i.destroy=void 0,r!==void 0&&lm(t,e,r)}i=i.next}while(i!==n)}}function Pp(s,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var e=t=t.next;do{if((e.tag&s)===s){var n=e.create;e.destroy=n()}e=e.next}while(e!==t)}}function cm(s){var t=s.ref;if(t!==null){var e=s.stateNode;switch(s.tag){case 5:s=e;break;default:s=e}typeof t=="function"?t(s):t.current=s}}function k1(s){var t=s.alternate;t!==null&&(s.alternate=null,k1(t)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(t=s.stateNode,t!==null&&(delete t[js],delete t[yu],delete t[Yg],delete t[G_],delete t[X_])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function T1(s){return s.tag===5||s.tag===3||s.tag===4}function Gv(s){t:for(;;){for(;s.sibling===null;){if(s.return===null||T1(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue t;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function um(s,t,e){var n=s.tag;if(n===5||n===6)s=s.stateNode,t?e.nodeType===8?e.parentNode.insertBefore(s,t):e.insertBefore(s,t):(e.nodeType===8?(t=e.parentNode,t.insertBefore(s,e)):(t=e,t.appendChild(s)),e=e._reactRootContainer,e!=null||t.onclick!==null||(t.onclick=Pf));else if(n!==4&&(s=s.child,s!==null))for(um(s,t,e),s=s.sibling;s!==null;)um(s,t,e),s=s.sibling}function hm(s,t,e){var n=s.tag;if(n===5||n===6)s=s.stateNode,t?e.insertBefore(s,t):e.appendChild(s);else if(n!==4&&(s=s.child,s!==null))for(hm(s,t,e),s=s.sibling;s!==null;)hm(s,t,e),s=s.sibling}var ge=null,cs=!1;function Oi(s,t,e){for(e=e.child;e!==null;)P1(s,t,e),e=e.sibling}function P1(s,t,e){if(Bs&&typeof Bs.onCommitFiberUnmount=="function")try{Bs.onCommitFiberUnmount(xp,e)}catch{}switch(e.tag){case 5:Ne||Ho(e,t);case 6:var n=ge,i=cs;ge=null,Oi(s,t,e),ge=n,cs=i,ge!==null&&(cs?(s=ge,e=e.stateNode,s.nodeType===8?s.parentNode.removeChild(e):s.removeChild(e)):ge.removeChild(e.stateNode));break;case 18:ge!==null&&(cs?(s=ge,e=e.stateNode,s.nodeType===8?ag(s.parentNode,e):s.nodeType===1&&ag(s,e),du(s)):ag(ge,e.stateNode));break;case 4:n=ge,i=cs,ge=e.stateNode.containerInfo,cs=!0,Oi(s,t,e),ge=n,cs=i;break;case 0:case 11:case 14:case 15:if(!Ne&&(n=e.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var r=i,a=r.destroy;r=r.tag,a!==void 0&&(r&2||r&4)&&lm(e,t,a),i=i.next}while(i!==n)}Oi(s,t,e);break;case 1:if(!Ne&&(Ho(e,t),n=e.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=e.memoizedProps,n.state=e.memoizedState,n.componentWillUnmount()}catch(l){Ft(e,t,l)}Oi(s,t,e);break;case 21:Oi(s,t,e);break;case 22:e.mode&1?(Ne=(n=Ne)||e.memoizedState!==null,Oi(s,t,e),Ne=n):Oi(s,t,e);break;default:Oi(s,t,e)}}function Xv(s){var t=s.updateQueue;if(t!==null){s.updateQueue=null;var e=s.stateNode;e===null&&(e=s.stateNode=new cE),t.forEach(function(n){var i=wE.bind(null,s,n);e.has(n)||(e.add(n),n.then(i,i))})}}function qn(s,t){var e=t.deletions;if(e!==null)for(var n=0;n<e.length;n++){var i=e[n];try{var r=s,a=t,l=a;t:for(;l!==null;){switch(l.tag){case 5:ge=l.stateNode,cs=!1;break t;case 3:ge=l.stateNode.containerInfo,cs=!0;break t;case 4:ge=l.stateNode.containerInfo,cs=!0;break t}l=l.return}if(ge===null)throw Error(M(160));P1(r,a,i),ge=null,cs=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(u){Ft(i,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)R1(t,s),t=t.sibling}function R1(s,t){var e=s.alternate,n=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(qn(t,s),ys(s),n&4){try{iu(3,s,s.return),Pp(3,s)}catch(y){Ft(s,s.return,y)}try{iu(5,s,s.return)}catch(y){Ft(s,s.return,y)}}break;case 1:qn(t,s),ys(s),n&512&&e!==null&&Ho(e,e.return);break;case 5:if(qn(t,s),ys(s),n&512&&e!==null&&Ho(e,e.return),s.flags&32){var i=s.stateNode;try{lu(i,"")}catch(y){Ft(s,s.return,y)}}if(n&4&&(i=s.stateNode,i!=null)){var r=s.memoizedProps,a=e!==null?e.memoizedProps:r,l=s.type,c=s.updateQueue;if(s.updateQueue=null,c!==null)try{l==="input"&&r.type==="radio"&&r.name!=null&&Zw(i,r),Dg(l,a);var u=Dg(l,r);for(a=0;a<c.length;a+=2){var h=c[a],d=c[a+1];h==="style"?sA(i,d):h==="dangerouslySetInnerHTML"?eA(i,d):h==="children"?lu(i,d):By(i,h,d,u)}switch(l){case"input":Rg(i,r);break;case"textarea":Jw(i,r);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!r.multiple;var p=r.value;p!=null?Go(i,!!r.multiple,p,!1):f!==!!r.multiple&&(r.defaultValue!=null?Go(i,!!r.multiple,r.defaultValue,!0):Go(i,!!r.multiple,r.multiple?[]:"",!1))}i[yu]=r}catch(y){Ft(s,s.return,y)}}break;case 6:if(qn(t,s),ys(s),n&4){if(s.stateNode===null)throw Error(M(162));i=s.stateNode,r=s.memoizedProps;try{i.nodeValue=r}catch(y){Ft(s,s.return,y)}}break;case 3:if(qn(t,s),ys(s),n&4&&e!==null&&e.memoizedState.isDehydrated)try{du(t.containerInfo)}catch(y){Ft(s,s.return,y)}break;case 4:qn(t,s),ys(s);break;case 13:qn(t,s),ys(s),i=s.child,i.flags&8192&&(r=i.memoizedState!==null,i.stateNode.isHidden=r,!r||i.alternate!==null&&i.alternate.memoizedState!==null||(w0=zt())),n&4&&Xv(s);break;case 22:if(h=e!==null&&e.memoizedState!==null,s.mode&1?(Ne=(u=Ne)||h,qn(t,s),Ne=u):qn(t,s),ys(s),n&8192){if(u=s.memoizedState!==null,(s.stateNode.isHidden=u)&&!h&&s.mode&1)for(z=s,h=s.child;h!==null;){for(d=z=h;z!==null;){switch(f=z,p=f.child,f.tag){case 0:case 11:case 14:case 15:iu(4,f,f.return);break;case 1:Ho(f,f.return);var w=f.stateNode;if(typeof w.componentWillUnmount=="function"){n=f,e=f.return;try{t=n,w.props=t.memoizedProps,w.state=t.memoizedState,w.componentWillUnmount()}catch(y){Ft(n,e,y)}}break;case 5:Ho(f,f.return);break;case 22:if(f.memoizedState!==null){Yv(d);continue}}p!==null?(p.return=f,z=p):Yv(d)}h=h.sibling}t:for(h=null,d=s;;){if(d.tag===5){if(h===null){h=d;try{i=d.stateNode,u?(r=i.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none"):(l=d.stateNode,c=d.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=nA("display",a))}catch(y){Ft(s,s.return,y)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(y){Ft(s,s.return,y)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===s)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===s)break t;for(;d.sibling===null;){if(d.return===null||d.return===s)break t;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:qn(t,s),ys(s),n&4&&Xv(s);break;case 21:break;default:qn(t,s),ys(s)}}function ys(s){var t=s.flags;if(t&2){try{t:{for(var e=s.return;e!==null;){if(T1(e)){var n=e;break t}e=e.return}throw Error(M(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(lu(i,""),n.flags&=-33);var r=Gv(s);hm(s,r,i);break;case 3:case 4:var a=n.stateNode.containerInfo,l=Gv(s);um(s,l,a);break;default:throw Error(M(161))}}catch(c){Ft(s,s.return,c)}s.flags&=-3}t&4096&&(s.flags&=-4097)}function hE(s,t,e){z=s,N1(s)}function N1(s,t,e){for(var n=(s.mode&1)!==0;z!==null;){var i=z,r=i.child;if(i.tag===22&&n){var a=i.memoizedState!==null||xd;if(!a){var l=i.alternate,c=l!==null&&l.memoizedState!==null||Ne;l=xd;var u=Ne;if(xd=a,(Ne=c)&&!u)for(z=i;z!==null;)a=z,c=a.child,a.tag===22&&a.memoizedState!==null?Kv(i):c!==null?(c.return=a,z=c):Kv(i);for(;r!==null;)z=r,N1(r),r=r.sibling;z=i,xd=l,Ne=u}qv(s)}else i.subtreeFlags&8772&&r!==null?(r.return=i,z=r):qv(s)}}function qv(s){for(;z!==null;){var t=z;if(t.flags&8772){var e=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ne||Pp(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!Ne)if(e===null)n.componentDidMount();else{var i=t.elementType===t.type?e.memoizedProps:Kn(t.type,e.memoizedProps);n.componentDidUpdate(i,e.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var r=t.updateQueue;r!==null&&Mv(t,r,n);break;case 3:var a=t.updateQueue;if(a!==null){if(e=null,t.child!==null)switch(t.child.tag){case 5:e=t.child.stateNode;break;case 1:e=t.child.stateNode}Mv(t,a,e)}break;case 5:var l=t.stateNode;if(e===null&&t.flags&4){e=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&e.focus();break;case"img":c.src&&(e.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&du(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(M(163))}Ne||t.flags&512&&cm(t)}catch(f){Ft(t,t.return,f)}}if(t===s){z=null;break}if(e=t.sibling,e!==null){e.return=t.return,z=e;break}z=t.return}}function Yv(s){for(;z!==null;){var t=z;if(t===s){z=null;break}var e=t.sibling;if(e!==null){e.return=t.return,z=e;break}z=t.return}}function Kv(s){for(;z!==null;){var t=z;try{switch(t.tag){case 0:case 11:case 15:var e=t.return;try{Pp(4,t)}catch(c){Ft(t,e,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var i=t.return;try{n.componentDidMount()}catch(c){Ft(t,i,c)}}var r=t.return;try{cm(t)}catch(c){Ft(t,r,c)}break;case 5:var a=t.return;try{cm(t)}catch(c){Ft(t,a,c)}}}catch(c){Ft(t,t.return,c)}if(t===s){z=null;break}var l=t.sibling;if(l!==null){l.return=t.return,z=l;break}z=t.return}}var dE=Math.ceil,Bf=Fi.ReactCurrentDispatcher,y0=Fi.ReactCurrentOwner,Vn=Fi.ReactCurrentBatchConfig,at=0,le=null,Vt=null,we=0,An=0,$o=Vr(0),Jt=0,Su=null,ho=0,Rp=0,v0=0,ru=null,Je=null,w0=0,fc=1/0,Gs=null,Hf=!1,dm=null,Ir=null,bd=!1,kr=null,$f=0,au=0,fm=null,Bd=-1,Hd=0;function $e(){return at&6?zt():Bd!==-1?Bd:Bd=zt()}function Lr(s){return s.mode&1?at&2&&we!==0?we&-we:Y_.transition!==null?(Hd===0&&(Hd=gA()),Hd):(s=ft,s!==0||(s=window.event,s=s===void 0?16:bA(s.type)),s):1}function fs(s,t,e,n){if(50<au)throw au=0,fm=null,Error(M(185));Kh(s,e,n),(!(at&2)||s!==le)&&(s===le&&(!(at&2)&&(Rp|=e),Jt===4&&$i(s,we)),sn(s,n),e===1&&at===0&&!(t.mode&1)&&(fc=zt()+500,Cp&&Wr()))}function sn(s,t){var e=s.callbackNode;YS(s,t);var n=Ef(s,s===le?we:0);if(n===0)e!==null&&rv(e),s.callbackNode=null,s.callbackPriority=0;else if(t=n&-n,s.callbackPriority!==t){if(e!=null&&rv(e),t===1)s.tag===0?q_(Qv.bind(null,s)):HA(Qv.bind(null,s)),V_(function(){!(at&6)&&Wr()}),e=null;else{switch(mA(n)){case 1:e=Wy;break;case 4:e=fA;break;case 16:e=_f;break;case 536870912:e=pA;break;default:e=_f}e=z1(e,M1.bind(null,s))}s.callbackPriority=t,s.callbackNode=e}}function M1(s,t){if(Bd=-1,Hd=0,at&6)throw Error(M(327));var e=s.callbackNode;if(Qo()&&s.callbackNode!==e)return null;var n=Ef(s,s===le?we:0);if(n===0)return null;if(n&30||n&s.expiredLanes||t)t=Uf(s,n);else{t=n;var i=at;at|=2;var r=L1();(le!==s||we!==t)&&(Gs=null,fc=zt()+500,ao(s,t));do try{gE();break}catch(l){I1(s,l)}while(!0);i0(),Bf.current=r,at=i,Vt!==null?t=0:(le=null,we=0,t=Jt)}if(t!==0){if(t===2&&(i=Bg(s),i!==0&&(n=i,t=pm(s,i))),t===1)throw e=Su,ao(s,0),$i(s,n),sn(s,zt()),e;if(t===6)$i(s,n);else{if(i=s.current.alternate,!(n&30)&&!fE(i)&&(t=Uf(s,n),t===2&&(r=Bg(s),r!==0&&(n=r,t=pm(s,r))),t===1))throw e=Su,ao(s,0),$i(s,n),sn(s,zt()),e;switch(s.finishedWork=i,s.finishedLanes=n,t){case 0:case 1:throw Error(M(345));case 2:Xr(s,Je,Gs);break;case 3:if($i(s,n),(n&130023424)===n&&(t=w0+500-zt(),10<t)){if(Ef(s,0)!==0)break;if(i=s.suspendedLanes,(i&n)!==n){$e(),s.pingedLanes|=s.suspendedLanes&i;break}s.timeoutHandle=qg(Xr.bind(null,s,Je,Gs),t);break}Xr(s,Je,Gs);break;case 4:if($i(s,n),(n&4194240)===n)break;for(t=s.eventTimes,i=-1;0<n;){var a=31-ds(n);r=1<<a,a=t[a],a>i&&(i=a),n&=~r}if(n=i,n=zt()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*dE(n/1960))-n,10<n){s.timeoutHandle=qg(Xr.bind(null,s,Je,Gs),n);break}Xr(s,Je,Gs);break;case 5:Xr(s,Je,Gs);break;default:throw Error(M(329))}}}return sn(s,zt()),s.callbackNode===e?M1.bind(null,s):null}function pm(s,t){var e=ru;return s.current.memoizedState.isDehydrated&&(ao(s,t).flags|=256),s=Uf(s,t),s!==2&&(t=Je,Je=e,t!==null&&gm(t)),s}function gm(s){Je===null?Je=s:Je.push.apply(Je,s)}function fE(s){for(var t=s;;){if(t.flags&16384){var e=t.updateQueue;if(e!==null&&(e=e.stores,e!==null))for(var n=0;n<e.length;n++){var i=e[n],r=i.getSnapshot;i=i.value;try{if(!ps(r(),i))return!1}catch{return!1}}}if(e=t.child,t.subtreeFlags&16384&&e!==null)e.return=t,t=e;else{if(t===s)break;for(;t.sibling===null;){if(t.return===null||t.return===s)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function $i(s,t){for(t&=~v0,t&=~Rp,s.suspendedLanes|=t,s.pingedLanes&=~t,s=s.expirationTimes;0<t;){var e=31-ds(t),n=1<<e;s[e]=-1,t&=~n}}function Qv(s){if(at&6)throw Error(M(327));Qo();var t=Ef(s,0);if(!(t&1))return sn(s,zt()),null;var e=Uf(s,t);if(s.tag!==0&&e===2){var n=Bg(s);n!==0&&(t=n,e=pm(s,n))}if(e===1)throw e=Su,ao(s,0),$i(s,t),sn(s,zt()),e;if(e===6)throw Error(M(345));return s.finishedWork=s.current.alternate,s.finishedLanes=t,Xr(s,Je,Gs),sn(s,zt()),null}function A0(s,t){var e=at;at|=1;try{return s(t)}finally{at=e,at===0&&(fc=zt()+500,Cp&&Wr())}}function fo(s){kr!==null&&kr.tag===0&&!(at&6)&&Qo();var t=at;at|=1;var e=Vn.transition,n=ft;try{if(Vn.transition=null,ft=1,s)return s()}finally{ft=n,Vn.transition=e,at=t,!(at&6)&&Wr()}}function x0(){An=$o.current,Et($o)}function ao(s,t){s.finishedWork=null,s.finishedLanes=0;var e=s.timeoutHandle;if(e!==-1&&(s.timeoutHandle=-1,U_(e)),Vt!==null)for(e=Vt.return;e!==null;){var n=e;switch(e0(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Rf();break;case 3:hc(),Et(en),Et(Me),u0();break;case 5:c0(n);break;case 4:hc();break;case 13:Et(Mt);break;case 19:Et(Mt);break;case 10:r0(n.type._context);break;case 22:case 23:x0()}e=e.return}if(le=s,Vt=s=Dr(s.current,null),we=An=t,Jt=0,Su=null,v0=Rp=ho=0,Je=ru=null,ta!==null){for(t=0;t<ta.length;t++)if(e=ta[t],n=e.interleaved,n!==null){e.interleaved=null;var i=n.next,r=e.pending;if(r!==null){var a=r.next;r.next=i,n.next=a}e.pending=n}ta=null}return s}function I1(s,t){do{var e=Vt;try{if(i0(),Od.current=zf,jf){for(var n=It.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}jf=!1}if(uo=0,oe=Zt=It=null,su=!1,Au=0,y0.current=null,e===null||e.return===null){Jt=1,Su=t,Vt=null;break}t:{var r=s,a=e.return,l=e,c=t;if(t=we,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,h=l,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=jv(a);if(p!==null){p.flags&=-257,zv(p,a,l,r,t),p.mode&1&&Ov(r,u,t),t=p,c=u;var w=t.updateQueue;if(w===null){var y=new Set;y.add(c),t.updateQueue=y}else w.add(c);break t}else{if(!(t&1)){Ov(r,u,t),b0();break t}c=Error(M(426))}}else if(Pt&&l.mode&1){var S=jv(a);if(S!==null){!(S.flags&65536)&&(S.flags|=256),zv(S,a,l,r,t),n0(dc(c,l));break t}}r=c=dc(c,l),Jt!==4&&(Jt=2),ru===null?ru=[r]:ru.push(r),r=a;do{switch(r.tag){case 3:r.flags|=65536,t&=-t,r.lanes|=t;var m=m1(r,c,t);Nv(r,m);break t;case 1:l=c;var v=r.type,b=r.stateNode;if(!(r.flags&128)&&(typeof v.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Ir===null||!Ir.has(b)))){r.flags|=65536,t&=-t,r.lanes|=t;var _=y1(r,l,t);Nv(r,_);break t}}r=r.return}while(r!==null)}F1(e)}catch(E){t=E,Vt===e&&e!==null&&(Vt=e=e.return);continue}break}while(!0)}function L1(){var s=Bf.current;return Bf.current=zf,s===null?zf:s}function b0(){(Jt===0||Jt===3||Jt===2)&&(Jt=4),le===null||!(ho&268435455)&&!(Rp&268435455)||$i(le,we)}function Uf(s,t){var e=at;at|=2;var n=L1();(le!==s||we!==t)&&(Gs=null,ao(s,t));do try{pE();break}catch(i){I1(s,i)}while(!0);if(i0(),at=e,Bf.current=n,Vt!==null)throw Error(M(261));return le=null,we=0,Jt}function pE(){for(;Vt!==null;)D1(Vt)}function gE(){for(;Vt!==null&&!BS();)D1(Vt)}function D1(s){var t=j1(s.alternate,s,An);s.memoizedProps=s.pendingProps,t===null?F1(s):Vt=t,y0.current=null}function F1(s){var t=s;do{var e=t.alternate;if(s=t.return,t.flags&32768){if(e=lE(e,t),e!==null){e.flags&=32767,Vt=e;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{Jt=6,Vt=null;return}}else if(e=oE(e,t,An),e!==null){Vt=e;return}if(t=t.sibling,t!==null){Vt=t;return}Vt=t=s}while(t!==null);Jt===0&&(Jt=5)}function Xr(s,t,e){var n=ft,i=Vn.transition;try{Vn.transition=null,ft=1,mE(s,t,e,n)}finally{Vn.transition=i,ft=n}return null}function mE(s,t,e,n){do Qo();while(kr!==null);if(at&6)throw Error(M(327));e=s.finishedWork;var i=s.finishedLanes;if(e===null)return null;if(s.finishedWork=null,s.finishedLanes=0,e===s.current)throw Error(M(177));s.callbackNode=null,s.callbackPriority=0;var r=e.lanes|e.childLanes;if(KS(s,r),s===le&&(Vt=le=null,we=0),!(e.subtreeFlags&2064)&&!(e.flags&2064)||bd||(bd=!0,z1(_f,function(){return Qo(),null})),r=(e.flags&15990)!==0,e.subtreeFlags&15990||r){r=Vn.transition,Vn.transition=null;var a=ft;ft=1;var l=at;at|=4,y0.current=null,uE(s,e),R1(e,s),F_(Gg),Cf=!!Wg,Gg=Wg=null,s.current=e,hE(e),HS(),at=l,ft=a,Vn.transition=r}else s.current=e;if(bd&&(bd=!1,kr=s,$f=i),r=s.pendingLanes,r===0&&(Ir=null),VS(e.stateNode),sn(s,zt()),t!==null)for(n=s.onRecoverableError,e=0;e<t.length;e++)i=t[e],n(i.value,{componentStack:i.stack,digest:i.digest});if(Hf)throw Hf=!1,s=dm,dm=null,s;return $f&1&&s.tag!==0&&Qo(),r=s.pendingLanes,r&1?s===fm?au++:(au=0,fm=s):au=0,Wr(),null}function Qo(){if(kr!==null){var s=mA($f),t=Vn.transition,e=ft;try{if(Vn.transition=null,ft=16>s?16:s,kr===null)var n=!1;else{if(s=kr,kr=null,$f=0,at&6)throw Error(M(331));var i=at;for(at|=4,z=s.current;z!==null;){var r=z,a=r.child;if(z.flags&16){var l=r.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(z=u;z!==null;){var h=z;switch(h.tag){case 0:case 11:case 15:iu(8,h,r)}var d=h.child;if(d!==null)d.return=h,z=d;else for(;z!==null;){h=z;var f=h.sibling,p=h.return;if(k1(h),h===u){z=null;break}if(f!==null){f.return=p,z=f;break}z=p}}}var w=r.alternate;if(w!==null){var y=w.child;if(y!==null){w.child=null;do{var S=y.sibling;y.sibling=null,y=S}while(y!==null)}}z=r}}if(r.subtreeFlags&2064&&a!==null)a.return=r,z=a;else t:for(;z!==null;){if(r=z,r.flags&2048)switch(r.tag){case 0:case 11:case 15:iu(9,r,r.return)}var m=r.sibling;if(m!==null){m.return=r.return,z=m;break t}z=r.return}}var v=s.current;for(z=v;z!==null;){a=z;var b=a.child;if(a.subtreeFlags&2064&&b!==null)b.return=a,z=b;else t:for(a=v;z!==null;){if(l=z,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Pp(9,l)}}catch(E){Ft(l,l.return,E)}if(l===a){z=null;break t}var _=l.sibling;if(_!==null){_.return=l.return,z=_;break t}z=l.return}}if(at=i,Wr(),Bs&&typeof Bs.onPostCommitFiberRoot=="function")try{Bs.onPostCommitFiberRoot(xp,s)}catch{}n=!0}return n}finally{ft=e,Vn.transition=t}}return!1}function Zv(s,t,e){t=dc(e,t),t=m1(s,t,1),s=Mr(s,t,1),t=$e(),s!==null&&(Kh(s,1,t),sn(s,t))}function Ft(s,t,e){if(s.tag===3)Zv(s,s,e);else for(;t!==null;){if(t.tag===3){Zv(t,s,e);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Ir===null||!Ir.has(n))){s=dc(e,s),s=y1(t,s,1),t=Mr(t,s,1),s=$e(),t!==null&&(Kh(t,1,s),sn(t,s));break}}t=t.return}}function yE(s,t,e){var n=s.pingCache;n!==null&&n.delete(t),t=$e(),s.pingedLanes|=s.suspendedLanes&e,le===s&&(we&e)===e&&(Jt===4||Jt===3&&(we&130023424)===we&&500>zt()-w0?ao(s,0):v0|=e),sn(s,t)}function O1(s,t){t===0&&(s.mode&1?(t=dd,dd<<=1,!(dd&130023424)&&(dd=4194304)):t=1);var e=$e();s=Mi(s,t),s!==null&&(Kh(s,t,e),sn(s,e))}function vE(s){var t=s.memoizedState,e=0;t!==null&&(e=t.retryLane),O1(s,e)}function wE(s,t){var e=0;switch(s.tag){case 13:var n=s.stateNode,i=s.memoizedState;i!==null&&(e=i.retryLane);break;case 19:n=s.stateNode;break;default:throw Error(M(314))}n!==null&&n.delete(t),O1(s,e)}var j1;j1=function(s,t,e){if(s!==null)if(s.memoizedProps!==t.pendingProps||en.current)tn=!0;else{if(!(s.lanes&e)&&!(t.flags&128))return tn=!1,aE(s,t,e);tn=!!(s.flags&131072)}else tn=!1,Pt&&t.flags&1048576&&$A(t,If,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;zd(s,t),s=t.pendingProps;var i=lc(t,Me.current);Ko(t,e),i=d0(null,t,n,s,i,e);var r=f0();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,nn(n)?(r=!0,Nf(t)):r=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,o0(t),i.updater=Tp,t.stateNode=i,i._reactInternals=t,em(t,n,s,e),t=im(null,t,n,!0,r,e)):(t.tag=0,Pt&&r&&t0(t),He(null,t,i,e),t=t.child),t;case 16:n=t.elementType;t:{switch(zd(s,t),s=t.pendingProps,i=n._init,n=i(n._payload),t.type=n,i=t.tag=xE(n),s=Kn(n,s),i){case 0:t=sm(null,t,n,s,e);break t;case 1:t=$v(null,t,n,s,e);break t;case 11:t=Bv(null,t,n,s,e);break t;case 14:t=Hv(null,t,n,Kn(n.type,s),e);break t}throw Error(M(306,n,""))}return t;case 0:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Kn(n,i),sm(s,t,n,i,e);case 1:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Kn(n,i),$v(s,t,n,i,e);case 3:t:{if(x1(t),s===null)throw Error(M(387));n=t.pendingProps,r=t.memoizedState,i=r.element,qA(s,t),Ff(t,n,null,e);var a=t.memoizedState;if(n=a.element,r.isDehydrated)if(r={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=r,t.memoizedState=r,t.flags&256){i=dc(Error(M(423)),t),t=Uv(s,t,n,e,i);break t}else if(n!==i){i=dc(Error(M(424)),t),t=Uv(s,t,n,e,i);break t}else for(Sn=Nr(t.stateNode.containerInfo.firstChild),_n=t,Pt=!0,us=null,e=GA(t,null,n,e),t.child=e;e;)e.flags=e.flags&-3|4096,e=e.sibling;else{if(cc(),n===i){t=Ii(s,t,e);break t}He(s,t,n,e)}t=t.child}return t;case 5:return YA(t),s===null&&Zg(t),n=t.type,i=t.pendingProps,r=s!==null?s.memoizedProps:null,a=i.children,Xg(n,i)?a=null:r!==null&&Xg(n,r)&&(t.flags|=32),A1(s,t),He(s,t,a,e),t.child;case 6:return s===null&&Zg(t),null;case 13:return b1(s,t,e);case 4:return l0(t,t.stateNode.containerInfo),n=t.pendingProps,s===null?t.child=uc(t,null,n,e):He(s,t,n,e),t.child;case 11:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Kn(n,i),Bv(s,t,n,i,e);case 7:return He(s,t,t.pendingProps,e),t.child;case 8:return He(s,t,t.pendingProps.children,e),t.child;case 12:return He(s,t,t.pendingProps.children,e),t.child;case 10:t:{if(n=t.type._context,i=t.pendingProps,r=t.memoizedProps,a=i.value,xt(Lf,n._currentValue),n._currentValue=a,r!==null)if(ps(r.value,a)){if(r.children===i.children&&!en.current){t=Ii(s,t,e);break t}}else for(r=t.child,r!==null&&(r.return=t);r!==null;){var l=r.dependencies;if(l!==null){a=r.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(r.tag===1){c=ki(-1,e&-e),c.tag=2;var u=r.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}r.lanes|=e,c=r.alternate,c!==null&&(c.lanes|=e),Jg(r.return,e,t),l.lanes|=e;break}c=c.next}}else if(r.tag===10)a=r.type===t.type?null:r.child;else if(r.tag===18){if(a=r.return,a===null)throw Error(M(341));a.lanes|=e,l=a.alternate,l!==null&&(l.lanes|=e),Jg(a,e,t),a=r.sibling}else a=r.child;if(a!==null)a.return=r;else for(a=r;a!==null;){if(a===t){a=null;break}if(r=a.sibling,r!==null){r.return=a.return,a=r;break}a=a.return}r=a}He(s,t,i.children,e),t=t.child}return t;case 9:return i=t.type,n=t.pendingProps.children,Ko(t,e),i=Gn(i),n=n(i),t.flags|=1,He(s,t,n,e),t.child;case 14:return n=t.type,i=Kn(n,t.pendingProps),i=Kn(n.type,i),Hv(s,t,n,i,e);case 15:return v1(s,t,t.type,t.pendingProps,e);case 17:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Kn(n,i),zd(s,t),t.tag=1,nn(n)?(s=!0,Nf(t)):s=!1,Ko(t,e),g1(t,n,i),em(t,n,i,e),im(null,t,n,!0,s,e);case 19:return S1(s,t,e);case 22:return w1(s,t,e)}throw Error(M(156,t.tag))};function z1(s,t){return dA(s,t)}function AE(s,t,e,n){this.tag=s,this.key=e,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Un(s,t,e,n){return new AE(s,t,e,n)}function S0(s){return s=s.prototype,!(!s||!s.isReactComponent)}function xE(s){if(typeof s=="function")return S0(s)?1:0;if(s!=null){if(s=s.$$typeof,s===$y)return 11;if(s===Uy)return 14}return 2}function Dr(s,t){var e=s.alternate;return e===null?(e=Un(s.tag,t,s.key,s.mode),e.elementType=s.elementType,e.type=s.type,e.stateNode=s.stateNode,e.alternate=s,s.alternate=e):(e.pendingProps=t,e.type=s.type,e.flags=0,e.subtreeFlags=0,e.deletions=null),e.flags=s.flags&14680064,e.childLanes=s.childLanes,e.lanes=s.lanes,e.child=s.child,e.memoizedProps=s.memoizedProps,e.memoizedState=s.memoizedState,e.updateQueue=s.updateQueue,t=s.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},e.sibling=s.sibling,e.index=s.index,e.ref=s.ref,e}function $d(s,t,e,n,i,r){var a=2;if(n=s,typeof s=="function")S0(s)&&(a=1);else if(typeof s=="string")a=5;else t:switch(s){case Mo:return oo(e.children,i,r,t);case Hy:a=8,i|=8;break;case Eg:return s=Un(12,e,t,i|2),s.elementType=Eg,s.lanes=r,s;case Cg:return s=Un(13,e,t,i),s.elementType=Cg,s.lanes=r,s;case kg:return s=Un(19,e,t,i),s.elementType=kg,s.lanes=r,s;case Yw:return Np(e,i,r,t);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case Xw:a=10;break t;case qw:a=9;break t;case $y:a=11;break t;case Uy:a=14;break t;case zi:a=16,n=null;break t}throw Error(M(130,s==null?s:typeof s,""))}return t=Un(a,e,t,i),t.elementType=s,t.type=n,t.lanes=r,t}function oo(s,t,e,n){return s=Un(7,s,n,t),s.lanes=e,s}function Np(s,t,e,n){return s=Un(22,s,n,t),s.elementType=Yw,s.lanes=e,s.stateNode={isHidden:!1},s}function pg(s,t,e){return s=Un(6,s,null,t),s.lanes=e,s}function gg(s,t,e){return t=Un(4,s.children!==null?s.children:[],s.key,t),t.lanes=e,t.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},t}function bE(s,t,e,n,i){this.tag=t,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Yp(0),this.expirationTimes=Yp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yp(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function _0(s,t,e,n,i,r,a,l,c){return s=new bE(s,t,e,l,c),t===1?(t=1,r===!0&&(t|=8)):t=0,r=Un(3,null,null,t),s.current=r,r.stateNode=s,r.memoizedState={element:n,isDehydrated:e,cache:null,transitions:null,pendingSuspenseBoundaries:null},o0(r),s}function SE(s,t,e){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:No,key:n==null?null:""+n,children:s,containerInfo:t,implementation:e}}function B1(s){if(!s)return Or;s=s._reactInternals;t:{if(vo(s)!==s||s.tag!==1)throw Error(M(170));var t=s;do{switch(t.tag){case 3:t=t.stateNode.context;break t;case 1:if(nn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break t}}t=t.return}while(t!==null);throw Error(M(171))}if(s.tag===1){var e=s.type;if(nn(e))return BA(s,e,t)}return t}function H1(s,t,e,n,i,r,a,l,c){return s=_0(e,n,!0,s,i,r,a,l,c),s.context=B1(null),e=s.current,n=$e(),i=Lr(e),r=ki(n,i),r.callback=t??null,Mr(e,r,i),s.current.lanes=i,Kh(s,i,n),sn(s,n),s}function Mp(s,t,e,n){var i=t.current,r=$e(),a=Lr(i);return e=B1(e),t.context===null?t.context=e:t.pendingContext=e,t=ki(r,a),t.payload={element:s},n=n===void 0?null:n,n!==null&&(t.callback=n),s=Mr(i,t,a),s!==null&&(fs(s,i,a,r),Fd(s,i,a)),a}function Vf(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function Jv(s,t){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var e=s.retryLane;s.retryLane=e!==0&&e<t?e:t}}function E0(s,t){Jv(s,t),(s=s.alternate)&&Jv(s,t)}function _E(){return null}var $1=typeof reportError=="function"?reportError:function(s){console.error(s)};function C0(s){this._internalRoot=s}Ip.prototype.render=C0.prototype.render=function(s){var t=this._internalRoot;if(t===null)throw Error(M(409));Mp(s,t,null,null)};Ip.prototype.unmount=C0.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var t=s.containerInfo;fo(function(){Mp(null,s,null,null)}),t[Ni]=null}};function Ip(s){this._internalRoot=s}Ip.prototype.unstable_scheduleHydration=function(s){if(s){var t=wA();s={blockedOn:null,target:s,priority:t};for(var e=0;e<Hi.length&&t!==0&&t<Hi[e].priority;e++);Hi.splice(e,0,s),e===0&&xA(s)}};function k0(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function Lp(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function tw(){}function EE(s,t,e,n,i){if(i){if(typeof n=="function"){var r=n;n=function(){var u=Vf(a);r.call(u)}}var a=H1(t,n,s,0,null,!1,!1,"",tw);return s._reactRootContainer=a,s[Ni]=a.current,gu(s.nodeType===8?s.parentNode:s),fo(),a}for(;i=s.lastChild;)s.removeChild(i);if(typeof n=="function"){var l=n;n=function(){var u=Vf(c);l.call(u)}}var c=_0(s,0,!1,null,null,!1,!1,"",tw);return s._reactRootContainer=c,s[Ni]=c.current,gu(s.nodeType===8?s.parentNode:s),fo(function(){Mp(t,c,e,n)}),c}function Dp(s,t,e,n,i){var r=e._reactRootContainer;if(r){var a=r;if(typeof i=="function"){var l=i;i=function(){var c=Vf(a);l.call(c)}}Mp(t,a,s,i)}else a=EE(e,t,s,i,n);return Vf(a)}yA=function(s){switch(s.tag){case 3:var t=s.stateNode;if(t.current.memoizedState.isDehydrated){var e=Ic(t.pendingLanes);e!==0&&(Gy(t,e|1),sn(t,zt()),!(at&6)&&(fc=zt()+500,Wr()))}break;case 13:fo(function(){var n=Mi(s,1);if(n!==null){var i=$e();fs(n,s,1,i)}}),E0(s,1)}};Xy=function(s){if(s.tag===13){var t=Mi(s,134217728);if(t!==null){var e=$e();fs(t,s,134217728,e)}E0(s,134217728)}};vA=function(s){if(s.tag===13){var t=Lr(s),e=Mi(s,t);if(e!==null){var n=$e();fs(e,s,t,n)}E0(s,t)}};wA=function(){return ft};AA=function(s,t){var e=ft;try{return ft=s,t()}finally{ft=e}};Og=function(s,t,e){switch(t){case"input":if(Rg(s,e),t=e.name,e.type==="radio"&&t!=null){for(e=s;e.parentNode;)e=e.parentNode;for(e=e.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<e.length;t++){var n=e[t];if(n!==s&&n.form===s.form){var i=Ep(n);if(!i)throw Error(M(90));Qw(n),Rg(n,i)}}}break;case"textarea":Jw(s,e);break;case"select":t=e.value,t!=null&&Go(s,!!e.multiple,t,!1)}};aA=A0;oA=fo;var CE={usingClientEntryPoint:!1,Events:[Zh,Fo,Ep,iA,rA,A0]},Cc={findFiberByHostInstance:Jr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},kE={bundleType:Cc.bundleType,version:Cc.version,rendererPackageName:Cc.rendererPackageName,rendererConfig:Cc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Fi.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=uA(s),s===null?null:s.stateNode},findFiberByHostInstance:Cc.findFiberByHostInstance||_E,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Sd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Sd.isDisabled&&Sd.supportsFiber)try{xp=Sd.inject(kE),Bs=Sd}catch{}}kn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=CE;kn.createPortal=function(s,t){var e=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!k0(t))throw Error(M(200));return SE(s,t,null,e)};kn.createRoot=function(s,t){if(!k0(s))throw Error(M(299));var e=!1,n="",i=$1;return t!=null&&(t.unstable_strictMode===!0&&(e=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=_0(s,1,!1,null,null,e,!1,n,i),s[Ni]=t.current,gu(s.nodeType===8?s.parentNode:s),new C0(t)};kn.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var t=s._reactInternals;if(t===void 0)throw typeof s.render=="function"?Error(M(188)):(s=Object.keys(s).join(","),Error(M(268,s)));return s=uA(t),s=s===null?null:s.stateNode,s};kn.flushSync=function(s){return fo(s)};kn.hydrate=function(s,t,e){if(!Lp(t))throw Error(M(200));return Dp(null,s,t,!0,e)};kn.hydrateRoot=function(s,t,e){if(!k0(s))throw Error(M(405));var n=e!=null&&e.hydratedSources||null,i=!1,r="",a=$1;if(e!=null&&(e.unstable_strictMode===!0&&(i=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(a=e.onRecoverableError)),t=H1(t,null,s,1,e??null,i,!1,r,a),s[Ni]=t.current,gu(s),n)for(s=0;s<n.length;s++)e=n[s],i=e._getVersion,i=i(e._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[e,i]:t.mutableSourceEagerHydrationData.push(e,i);return new Ip(t)};kn.render=function(s,t,e){if(!Lp(t))throw Error(M(200));return Dp(null,s,t,!1,e)};kn.unmountComponentAtNode=function(s){if(!Lp(s))throw Error(M(40));return s._reactRootContainer?(fo(function(){Dp(null,null,s,!1,function(){s._reactRootContainer=null,s[Ni]=null})}),!0):!1};kn.unstable_batchedUpdates=A0;kn.unstable_renderSubtreeIntoContainer=function(s,t,e,n){if(!Lp(e))throw Error(M(200));if(s==null||s._reactInternals===void 0)throw Error(M(38));return Dp(s,t,e,!1,n)};kn.version="18.3.1-next-f1338f8080-20240426";function U1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(U1)}catch(s){console.error(s)}}U1(),Uw.exports=kn;var TE=Uw.exports,V1,ew=TE;V1=ew.createRoot,ew.hydrateRoot;const PE="modulepreload",RE=function(s){return"/"+s},nw={},NE=function(t,e,n){let i=Promise.resolve();if(e&&e.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=Promise.allSettled(e.map(c=>{if(c=RE(c),c in nw)return;nw[c]=!0;const u=c.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${h}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":PE,u||(d.as="script"),d.crossOrigin="",d.href=c,l&&d.setAttribute("nonce",l),document.head.appendChild(d),u)return new Promise((f,p)=>{d.addEventListener("load",f),d.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${c}`)))})}))}function r(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return i.then(a=>{for(const l of a||[])l.status==="rejected"&&r(l.reason);return t().catch(r)})};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var ME={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IE=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Xt=(s,t)=>{const e=Hn.forwardRef(({color:n="currentColor",size:i=24,strokeWidth:r=2,absoluteStrokeWidth:a,className:l="",children:c,...u},h)=>Hn.createElement("svg",{ref:h,...ME,width:i,height:i,stroke:n,strokeWidth:a?Number(r)*24/Number(i):r,className:["lucide",`lucide-${IE(s)}`,l].join(" "),...u},[...t.map(([d,f])=>Hn.createElement(d,f)),...Array.isArray(c)?c:[c]]));return e.displayName=`${s}`,e};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sw=Xt("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LE=Xt("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DE=Xt("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iw=Xt("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FE=Xt("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OE=Xt("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jE=Xt("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zE=Xt("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BE=Xt("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wf=Xt("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rw=Xt("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HE=Xt("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $E=Xt("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aw=Xt("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UE=Xt("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W1=Xt("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VE=Xt("UploadCloud",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M12 12v9",key:"192myk"}],["path",{d:"m16 16-4-4-4 4",key:"119tzi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WE=Xt("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ow=Xt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lw=Xt("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);class GE{constructor(t){I(this,"content");I(this,"originalContent");I(this,"lines");this.originalContent=t,this.content=t.toLowerCase(),this.lines=t.split(`
`).filter(e=>e.trim().length>0)}analyze(){const t=this.generateInsights(),e=this.calculateRealisticScore(t),n=this.generateComprehensiveAdvice(e,t),i=this.identifyStrengths(e,t),r=this.identifyCriticalIssues(e,t),a=this.calculateIndustryMatch();return{score:e,advice:n,insights:t,strengths:i,criticalIssues:r,industryMatch:a}}generateInsights(){const t=this.content.split(/\s+/).length,e=Math.ceil(t/250),n=this.extractExperienceYears(),i=this.countSkills(),r=this.countQuantifiedAchievements(),a=this.countActionVerbs(),l=this.checkContactInfo(),c=this.identifySections();return{wordCount:t,pageEstimate:e,experienceYears:n,skillsCount:i,quantifiedAchievements:r,actionVerbsUsed:a,contactInfoComplete:l,sectionsFound:c}}calculateRealisticScore(t){const e=this.scoreExperience(t),n=this.scoreSkills(t),i=this.scoreEducation(),r=this.scoreAchievements(t),a=this.scoreFormatting(t),l=this.scoreSections(t),c=this.scoreLength(t),u=this.scoreReadability(),h=this.scoreKeywords(),d=this.scoreActionVerbs(t),f=this.scoreQuantification(t),p=this.scoreRelevance(),w=(e+n+i+r)/4,y=(a+l+c+u)/4,S=(h+d+f+p)/4;return{overall:Math.round(w*.4+y*.35+S*.25),content:{experience:e,skills:n,education:i,achievements:r},structure:{formatting:a,sections:l,length:c,readability:u},optimization:{keywords:h,actionVerbs:d,quantification:f,relevance:p}}}scoreExperience(t){let e=0;t.experienceYears>=10?e+=40:t.experienceYears>=5?e+=35:t.experienceYears>=3?e+=25:t.experienceYears>=1?e+=15:e+=5;const n=this.countJobTitles();e+=Math.min(n*6,30);const r=["managed","led","developed","implemented","created","designed","coordinated","supervised","executed","delivered","optimized"].filter(a=>this.content.includes(a)).length;return e+=Math.min(r*3,30),Math.min(e,100)}scoreSkills(t){let e=0;const n=Math.min(t.skillsCount*4,50);e+=n,t.sectionsFound.includes("skills")&&(e+=25);const a=["leadership","communication","teamwork","problem solving","analytical","creative","adaptable","organized","collaborative"].filter(l=>this.content.includes(l)).length;return e+=Math.min(a*5,25),Math.min(e,100)}scoreEducation(){let t=30;const e=["bachelor","master","phd","doctorate","degree","university","college"],n=["certification","certified","certificate","license","accredited"];this.content.includes("phd")||this.content.includes("doctorate")?t+=40:this.content.includes("master")||this.content.includes("mba")?t+=35:this.content.includes("bachelor")?t+=25:e.some(r=>this.content.includes(r))&&(t+=15);const i=n.filter(r=>this.content.includes(r)).length;return t+=Math.min(i*10,30),Math.min(t,100)}scoreAchievements(t){let e=0;e+=Math.min(t.quantifiedAchievements*12,60);const i=["increased","improved","reduced","achieved","awarded","recognized","promoted","exceeded","delivered","saved","generated","won"].filter(r=>this.content.includes(r)).length;return e+=Math.min(i*5,40),Math.min(e,100)}scoreFormatting(t){let e=0;t.contactInfoComplete?e+=30:e+=10;const n=["experience","education","skills"],i=n.filter(l=>t.sectionsFound.includes(l)).length;e+=i/n.length*35;const r=/\d{4}/.test(this.content),a=t.sectionsFound.length>=3;return r&&(e+=15),a&&(e+=20),Math.min(e,100)}scoreSections(t){const e=["experience","education","skills","contact"],n=["summary","projects","certifications","awards"],i=e.filter(c=>t.sectionsFound.includes(c)).length,r=n.filter(c=>t.sectionsFound.includes(c)).length,a=i/e.length*70,l=Math.min(r*7.5,30);return Math.min(a+l,100)}scoreLength(t){return t.wordCount>=400&&t.wordCount<=800?100:t.wordCount>=300&&t.wordCount<=1e3?85:t.wordCount>=200&&t.wordCount<=1200?70:t.wordCount<200?30:50}scoreReadability(){let t=50;const e=this.content.split(/\s+/).length/this.lines.length;e>=8&&e<=15&&(t+=25);const n=(this.originalContent.match(/[•·▪▫‣⁃]/g)||[]).length;return t+=Math.min(n*2,25),Math.min(t,100)}scoreKeywords(){const e=["software","development","programming","coding","database","api","frontend","backend","fullstack","devops","cloud","agile","scrum","management","strategy","analysis","operations","marketing","sales","finance","accounting","consulting","project management","collaboration","innovation","efficiency","optimization","automation"].filter(n=>this.content.includes(n)).length;return Math.min(e*5,100)}scoreActionVerbs(t){return Math.min(t.actionVerbsUsed*8,100)}scoreQuantification(t){const e=(this.content.match(/\d+/g)||[]).length,n=(this.content.match(/\d+%/g)||[]).length,i=(this.content.match(/\$\d+/g)||[]).length;return Math.min((e+n*2+i*2)*3,100)}scoreRelevance(){let t=60;this.scoreKeywords()>30&&(t+=25);const n=new Date().getFullYear();return[n,n-1,n-2,n-3,n-4].some(a=>this.content.includes(a.toString()))&&(t+=15),Math.min(t,100)}extractExperienceYears(){const t=this.content.match(/\d{4}/g)||[];if(t.length<2)return 0;const e=t.map(n=>parseInt(n)).filter(n=>n>=1990&&n<=new Date().getFullYear());return e.length<2?0:Math.max(...e)-Math.min(...e)}countSkills(){return["javascript","python","java","c++","c#","php","ruby","go","rust","swift","react","angular","vue","node","express","django","flask","spring","mysql","postgresql","mongodb","redis","sqlite","oracle","git","docker","kubernetes","aws","azure","gcp","jenkins","jira","html","css","sql","nosql","rest","graphql","microservices","leadership","communication","teamwork","problem solving","analytical"].filter(e=>this.content.includes(e)).length}countQuantifiedAchievements(){const t=[/\d+%/,/\$\d+/,/\d+\s*(million|thousand|k\b)/,/\d+\s*(years?|months?)/,/\d+\s*(people|team|members)/,/\d+\s*(projects?|clients?|customers?)/];let e=0;return t.forEach(n=>{const i=this.content.match(n)||[];e+=i.length}),e}countActionVerbs(){return["achieved","managed","led","developed","created","implemented","designed","coordinated","supervised","executed","delivered","optimized","improved","increased","reduced","streamlined","established","launched","built","maintained","collaborated"].filter(e=>this.content.includes(e)).length}checkContactInfo(){const t=/@/.test(this.content),e=/\d{3}[-.\s]?\d{3}[-.\s]?\d{4}/.test(this.content);return t&&e}identifySections(){const t=[];return Object.entries({experience:["experience","work history","employment","professional experience"],education:["education","academic","degree","university","college"],skills:["skills","technical skills","competencies","expertise"],contact:["contact","email","phone","@"],summary:["summary","profile","objective","about"],projects:["projects","portfolio","work samples"],certifications:["certifications","certificates","licenses"],awards:["awards","honors","achievements","recognition"]}).forEach(([n,i])=>{i.some(r=>this.content.includes(r))&&t.push(n)}),t}countJobTitles(){return["engineer","developer","manager","analyst","specialist","coordinator","director","lead","senior","junior","associate","consultant","architect","designer","administrator","officer"].filter(e=>this.content.includes(e)).length}calculateIndustryMatch(){return Math.min(this.scoreKeywords()+this.scoreRelevance(),100)/2}generateComprehensiveAdvice(t,e){const n=[];return e.contactInfoComplete||n.push({category:"Contact Information",issue:"Missing essential contact details",suggestion:"Include your full name, professional email, phone number, and LinkedIn profile",impact:"critical",examples:["john.doe@email.com","(555) 123-4567","linkedin.com/in/johndoe"]}),t.content.experience<50&&n.push({category:"Work Experience",issue:"Insufficient work experience details",suggestion:"Add more detailed descriptions of your roles, responsibilities, and accomplishments",impact:"critical",examples:["Led a team of 5 developers to deliver 3 major projects","Increased system performance by 40% through code optimization","Managed $2M budget for infrastructure improvements"]}),e.quantifiedAchievements<3&&n.push({category:"Achievements",issue:"Lack of quantified accomplishments",suggestion:"Add specific numbers, percentages, and measurable results to your achievements",impact:"high",examples:["Reduced processing time by 35%","Managed a team of 12 people","Increased sales by $500K annually"]}),t.optimization.actionVerbs<60&&n.push({category:"Language",issue:"Limited use of strong action verbs",suggestion:"Start bullet points with powerful action verbs to demonstrate impact",impact:"high",examples:["Achieved","Implemented","Optimized","Spearheaded","Transformed"]}),e.wordCount<300&&n.push({category:"Content Length",issue:"Resume is too brief",suggestion:"Expand your resume with more detailed descriptions and additional relevant experience",impact:"high"}),e.wordCount>1e3&&n.push({category:"Content Length",issue:"Resume is too lengthy",suggestion:"Condense your resume to 1-2 pages by focusing on most relevant and recent experience",impact:"medium"}),t.content.skills<60&&n.push({category:"Skills Section",issue:"Limited skills listed",suggestion:"Add more relevant technical and soft skills, organized by category",impact:"medium",examples:["Technical: Python, React, AWS","Soft: Leadership, Communication, Problem-solving"]}),t.optimization.keywords<50&&n.push({category:"Keywords",issue:"Missing industry-relevant keywords",suggestion:"Include more keywords from your target job descriptions and industry",impact:"medium"}),t.structure.sections<70&&n.push({category:"Structure",issue:"Missing important resume sections",suggestion:"Ensure your resume includes: Contact Info, Summary, Experience, Education, and Skills",impact:"medium"}),n}identifyStrengths(t,e){const n=[];return t.content.experience>=80&&n.push("Strong work experience with detailed accomplishments"),t.content.skills>=80&&n.push("Comprehensive and relevant skill set"),t.content.education>=80&&n.push("Excellent educational background and certifications"),t.structure.formatting>=80&&n.push("Well-organized and professionally formatted"),t.optimization.quantification>=80&&n.push("Excellent use of quantified achievements"),t.optimization.actionVerbs>=80&&n.push("Strong use of action verbs and impactful language"),e.experienceYears>=5&&n.push(`Solid ${e.experienceYears} years of professional experience`),e.contactInfoComplete&&n.push("Complete and professional contact information"),n}identifyCriticalIssues(t,e){const n=[];return e.contactInfoComplete||n.push("Missing essential contact information"),t.content.experience<40&&n.push("Insufficient work experience details"),e.quantifiedAchievements===0&&n.push("No quantified achievements or results"),t.structure.sections<50&&n.push("Missing critical resume sections"),e.wordCount<200&&n.push("Resume is too short and lacks detail"),t.optimization.actionVerbs<30&&n.push("Weak language - needs stronger action verbs"),n}}const XE=({score:s,industryMatch:t})=>{const e=u=>u>=85?"text-emerald-600":u>=70?"text-blue-600":u>=55?"text-amber-600":"text-red-600",n=u=>u>=85?"from-emerald-50 to-emerald-100":u>=70?"from-blue-50 to-blue-100":u>=55?"from-amber-50 to-amber-100":"from-red-50 to-red-100",i=u=>u>=85?"bg-gradient-to-r from-emerald-400 to-emerald-500":u>=70?"bg-gradient-to-r from-blue-400 to-blue-500":u>=55?"bg-gradient-to-r from-amber-400 to-amber-500":"bg-gradient-to-r from-red-400 to-red-500",r=u=>u>=90?"Exceptional":u>=85?"Excellent":u>=70?"Strong":u>=55?"Good":u>=40?"Fair":"Needs Work",a=u=>u>=70?C.jsx(W1,{className:"w-4 h-4 text-green-500"}):u>=55?C.jsx($E,{className:"w-4 h-4 text-yellow-500"}):C.jsx(UE,{className:"w-4 h-4 text-red-500"}),l=({label:u,value:h,description:d})=>C.jsxs("div",{className:"mb-4",children:[C.jsxs("div",{className:"flex items-center justify-between mb-2",children:[C.jsxs("div",{className:"flex items-center",children:[C.jsx("span",{className:"text-sm font-semibold text-gray-700 w-20",children:u}),a(h)]}),C.jsxs("span",{className:`text-sm font-bold ${e(h)}`,children:[h,"%"]})]}),C.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5 mb-1",children:C.jsx("div",{className:`h-2.5 rounded-full transition-all duration-700 ease-out ${i(h)}`,style:{width:`${h}%`}})}),C.jsx("p",{className:"text-xs text-gray-500",children:d})]}),c=({title:u,scores:h,descriptions:d})=>C.jsxs("div",{className:"mb-6",children:[C.jsx("h4",{className:"text-sm font-semibold text-gray-800 mb-3 uppercase tracking-wide",children:u}),Object.entries(h).map(([f,p])=>C.jsx(l,{label:f.charAt(0).toUpperCase()+f.slice(1),value:p,description:d[f]||""},f))]});return C.jsxs("div",{className:"space-y-6",children:[C.jsxs("div",{className:`bg-gradient-to-br ${n(s.overall)} rounded-2xl p-6 shadow-lg border border-gray-100`,children:[C.jsxs("div",{className:"text-center mb-4",children:[C.jsxs("div",{className:`text-5xl font-bold ${e(s.overall)} mb-2`,children:[s.overall,"%"]}),C.jsx("div",{className:"text-lg font-semibold text-gray-700 mb-1",children:r(s.overall)}),C.jsx("div",{className:"text-sm text-gray-500",children:"Overall Resume Score"})]}),C.jsxs("div",{className:"bg-white/50 rounded-lg p-3 backdrop-blur-sm",children:[C.jsxs("div",{className:"flex items-center justify-between mb-2",children:[C.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Industry Match"}),C.jsxs("span",{className:`text-sm font-bold ${e(t)}`,children:[t,"%"]})]}),C.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:C.jsx("div",{className:`h-2 rounded-full transition-all duration-700 ${i(t)}`,style:{width:`${t}%`}})})]})]}),C.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg border border-gray-100",children:[C.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-6",children:"Detailed Analysis"}),C.jsx(c,{title:"Content Quality",scores:s.content,descriptions:{experience:"Work history depth and relevance",skills:"Technical and soft skills coverage",education:"Academic background and certifications",achievements:"Quantified accomplishments and results"}}),C.jsx(c,{title:"Structure & Format",scores:s.structure,descriptions:{formatting:"Professional appearance and organization",sections:"Completeness of required sections",length:"Appropriate content length (1-2 pages)",readability:"Clarity and ease of reading"}}),C.jsx(c,{title:"Optimization",scores:s.optimization,descriptions:{keywords:"Industry-relevant terminology",actionVerbs:"Strong, impactful language",quantification:"Use of numbers and metrics",relevance:"Alignment with target roles"}})]}),C.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[C.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Score Guide"}),C.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[C.jsxs("div",{className:"flex items-center",children:[C.jsx("div",{className:"w-3 h-3 bg-emerald-500 rounded mr-2"}),C.jsx("span",{children:"85-100%: Excellent"})]}),C.jsxs("div",{className:"flex items-center",children:[C.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded mr-2"}),C.jsx("span",{children:"70-84%: Strong"})]}),C.jsxs("div",{className:"flex items-center",children:[C.jsx("div",{className:"w-3 h-3 bg-amber-500 rounded mr-2"}),C.jsx("span",{children:"55-69%: Good"})]}),C.jsxs("div",{className:"flex items-center",children:[C.jsx("div",{className:"w-3 h-3 bg-red-500 rounded mr-2"}),C.jsx("span",{children:"0-54%: Needs Work"})]})]})]})]})},qE=({advice:s,insights:t,strengths:e,criticalIssues:n})=>{const[i,r]=Hn.useState(null),a=u=>{switch(u){case"critical":return C.jsx(sw,{className:"w-5 h-5 text-red-500"});case"high":return C.jsx(aw,{className:"w-5 h-5 text-orange-500"});case"medium":return C.jsx(rw,{className:"w-5 h-5 text-blue-500"});case"low":return C.jsx(HE,{className:"w-5 h-5 text-green-500"});default:return C.jsx(rw,{className:"w-5 h-5 text-gray-500"})}},l=u=>{switch(u){case"critical":return"border-l-red-500 bg-red-50";case"high":return"border-l-orange-500 bg-orange-50";case"medium":return"border-l-blue-500 bg-blue-50";case"low":return"border-l-green-500 bg-green-50";default:return"border-l-gray-500 bg-gray-50"}},c=u=>{const h={critical:"bg-red-100 text-red-800",high:"bg-orange-100 text-orange-800",medium:"bg-blue-100 text-blue-800",low:"bg-green-100 text-green-800"};return C.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${h[u]}`,children:u.toUpperCase()})};return C.jsxs("div",{className:"space-y-6",children:[C.jsxs("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 rounded-xl p-6 border border-indigo-100",children:[C.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center",children:[C.jsx(Wf,{className:"w-5 h-5 mr-2 text-indigo-600"}),"Resume Insights"]}),C.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[C.jsxs("div",{className:"text-center",children:[C.jsx("div",{className:"text-2xl font-bold text-indigo-600",children:t.wordCount}),C.jsx("div",{className:"text-sm text-gray-600",children:"Words"})]}),C.jsxs("div",{className:"text-center",children:[C.jsx("div",{className:"text-2xl font-bold text-purple-600",children:t.experienceYears}),C.jsx("div",{className:"text-sm text-gray-600",children:"Years Exp."})]}),C.jsxs("div",{className:"text-center",children:[C.jsx("div",{className:"text-2xl font-bold text-blue-600",children:t.skillsCount}),C.jsx("div",{className:"text-sm text-gray-600",children:"Skills"})]}),C.jsxs("div",{className:"text-center",children:[C.jsx("div",{className:"text-2xl font-bold text-green-600",children:t.quantifiedAchievements}),C.jsx("div",{className:"text-sm text-gray-600",children:"Metrics"})]})]}),C.jsx("div",{className:"mt-4 flex flex-wrap gap-2",children:t.sectionsFound.map((u,h)=>C.jsx("span",{className:"px-3 py-1 bg-white/60 text-indigo-700 rounded-full text-xs font-medium",children:u.charAt(0).toUpperCase()+u.slice(1)},h))})]}),n.length>0&&C.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-6",children:[C.jsxs("h3",{className:"text-lg font-bold text-red-800 mb-4 flex items-center",children:[C.jsx(sw,{className:"w-5 h-5 mr-2"}),"Critical Issues to Fix"]}),C.jsx("ul",{className:"space-y-2",children:n.map((u,h)=>C.jsxs("li",{className:"flex items-start text-red-700",children:[C.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full mr-3 mt-2 flex-shrink-0"}),C.jsx("span",{className:"text-sm",children:u})]},h))})]}),e.length>0&&C.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-xl p-6",children:[C.jsxs("h3",{className:"text-lg font-bold text-green-800 mb-4 flex items-center",children:[C.jsx(iw,{className:"w-5 h-5 mr-2"}),"Your Strengths"]}),C.jsx("ul",{className:"space-y-2",children:e.map((u,h)=>C.jsxs("li",{className:"flex items-start text-green-700",children:[C.jsx(iw,{className:"w-4 h-4 mr-3 mt-0.5 flex-shrink-0"}),C.jsx("span",{className:"text-sm",children:u})]},h))})]}),s.length>0&&C.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm",children:[C.jsxs("div",{className:"p-6 border-b border-gray-100",children:[C.jsxs("h3",{className:"text-lg font-bold text-gray-800 flex items-center",children:[C.jsx(W1,{className:"w-5 h-5 mr-2 text-blue-600"}),"Improvement Recommendations"]}),C.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Prioritized suggestions to enhance your resume"})]}),C.jsx("div",{className:"divide-y divide-gray-100",children:s.map((u,h)=>C.jsx("div",{className:`border-l-4 ${l(u.impact)}`,children:C.jsxs("div",{className:"p-4",children:[C.jsxs("div",{className:"flex items-start justify-between mb-2",children:[C.jsxs("div",{className:"flex items-center",children:[a(u.impact),C.jsxs("div",{className:"ml-3",children:[C.jsx("div",{className:"font-semibold text-gray-800 text-sm",children:u.category}),C.jsx("div",{className:"text-gray-600 text-sm mt-1",children:u.issue})]})]}),C.jsxs("div",{className:"flex items-center space-x-2",children:[c(u.impact),u.examples&&C.jsx("button",{onClick:()=>r(i===h?null:h),className:"text-gray-400 hover:text-gray-600",children:i===h?C.jsx(OE,{className:"w-4 h-4"}):C.jsx(FE,{className:"w-4 h-4"})})]})]}),C.jsxs("div",{className:"ml-8",children:[C.jsxs("div",{className:"text-sm text-gray-700 font-medium mb-2",children:["💡 ",u.suggestion]}),u.examples&&i===h&&C.jsxs("div",{className:"mt-3 p-3 bg-white/60 rounded-lg",children:[C.jsx("div",{className:"text-xs font-medium text-gray-600 mb-2",children:"Examples:"}),C.jsx("ul",{className:"space-y-1",children:u.examples.map((d,f)=>C.jsxs("li",{className:"text-xs text-gray-700 flex items-start",children:[C.jsx("span",{className:"text-blue-500 mr-2",children:"•"}),C.jsx("span",{className:"font-mono bg-gray-100 px-2 py-1 rounded text-xs",children:d})]},f))})]})]})]})},h))})]}),C.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-cyan-50 rounded-xl p-6 border border-blue-100",children:[C.jsxs("h3",{className:"text-lg font-bold text-blue-800 mb-4 flex items-center",children:[C.jsx(LE,{className:"w-5 h-5 mr-2"}),"Pro Tips for Resume Success"]}),C.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[C.jsxs("div",{className:"space-y-3",children:[C.jsxs("div",{className:"flex items-start",children:[C.jsx(aw,{className:"w-4 h-4 text-blue-600 mr-3 mt-1 flex-shrink-0"}),C.jsxs("div",{children:[C.jsx("div",{className:"font-medium text-blue-800 text-sm",children:"Tailor for Each Job"}),C.jsx("div",{className:"text-blue-700 text-xs",children:"Customize keywords and skills for each application"})]})]}),C.jsxs("div",{className:"flex items-start",children:[C.jsx(WE,{className:"w-4 h-4 text-blue-600 mr-3 mt-1 flex-shrink-0"}),C.jsxs("div",{children:[C.jsx("div",{className:"font-medium text-blue-800 text-sm",children:"Show Impact"}),C.jsx("div",{className:"text-blue-700 text-xs",children:"Focus on results and achievements, not just duties"})]})]})]}),C.jsxs("div",{className:"space-y-3",children:[C.jsxs("div",{className:"flex items-start",children:[C.jsx(jE,{className:"w-4 h-4 text-blue-600 mr-3 mt-1 flex-shrink-0"}),C.jsxs("div",{children:[C.jsx("div",{className:"font-medium text-blue-800 text-sm",children:"Keep It Current"}),C.jsx("div",{className:"text-blue-700 text-xs",children:"Update regularly with new skills and experiences"})]})]}),C.jsxs("div",{className:"flex items-start",children:[C.jsx(Wf,{className:"w-4 h-4 text-blue-600 mr-3 mt-1 flex-shrink-0"}),C.jsxs("div",{children:[C.jsx("div",{className:"font-medium text-blue-800 text-sm",children:"Format Matters"}),C.jsx("div",{className:"text-blue-700 text-xs",children:"Use consistent formatting and professional fonts"})]})]})]})]})]})]})},ze=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),mm=[.001,0,0,.001,0,0],mg=1.35,wn={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Ui={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},YE="pdfjs_internal_editor_",q={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,SIGNATURE:101},it={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},KE={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Ee={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Ud={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},$t={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},So={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Fp={ERRORS:0,WARNINGS:1,INFOS:5},Gf={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},_d={moveTo:0,lineTo:1,curveTo:2,closePath:3},QE={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Op=Fp.WARNINGS;function ZE(s){Number.isInteger(s)&&(Op=s)}function JE(){return Op}function jp(s){Op>=Fp.INFOS&&console.log(`Info: ${s}`)}function Y(s){Op>=Fp.WARNINGS&&console.log(`Warning: ${s}`)}function mt(s){throw new Error(s)}function Wt(s,t){s||mt(t)}function tC(s){switch(s==null?void 0:s.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function G1(s,t=null,e=null){if(!s)return null;if(e&&typeof s=="string"){if(e.addDefaultProtocol&&s.startsWith("www.")){const i=s.match(/\./g);(i==null?void 0:i.length)>=2&&(s=`http://${s}`)}if(e.tryConvertEncoding)try{s=rC(s)}catch{}}const n=t?URL.parse(s,t):URL.parse(s);return tC(n)?n:null}function X1(s,t,e=!1){const n=URL.parse(s);return n?(n.hash=t,n.href):e&&G1(s,"http://example.com")?s.split("#",1)[0]+`${t?`#${t}`:""}`:""}function et(s,t,e,n=!1){return Object.defineProperty(s,t,{value:e,enumerable:!n,configurable:!0,writable:!1}),e}const wo=function(){function t(e,n){this.message=e,this.name=n}return t.prototype=new Error,t.constructor=t,t}();class cw extends wo{constructor(t,e){super(t,"PasswordException"),this.code=e}}class yg extends wo{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class ym extends wo{constructor(t){super(t,"InvalidPDFException")}}class Xf extends wo{constructor(t,e,n){super(t,"ResponseException"),this.status=e,this.missing=n}}class eC extends wo{constructor(t){super(t,"FormatError")}}class jr extends wo{constructor(t){super(t,"AbortException")}}function q1(s){(typeof s!="object"||(s==null?void 0:s.length)===void 0)&&mt("Invalid argument for bytesToString");const t=s.length,e=8192;if(t<e)return String.fromCharCode.apply(null,s);const n=[];for(let i=0;i<t;i+=e){const r=Math.min(i+e,t),a=s.subarray(i,r);n.push(String.fromCharCode.apply(null,a))}return n.join("")}function td(s){typeof s!="string"&&mt("Invalid argument for stringToBytes");const t=s.length,e=new Uint8Array(t);for(let n=0;n<t;++n)e[n]=s.charCodeAt(n)&255;return e}function nC(s){return String.fromCharCode(s>>24&255,s>>16&255,s>>8&255,s&255)}function sC(){const s=new Uint8Array(4);return s[0]=1,new Uint32Array(s.buffer,0,1)[0]===1}function iC(){try{return new Function(""),!0}catch{return!1}}class Ae{static get isLittleEndian(){return et(this,"isLittleEndian",sC())}static get isEvalSupported(){return et(this,"isEvalSupported",iC())}static get isOffscreenCanvasSupported(){return et(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return et(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){if(typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"){const{platform:t,userAgent:e}=navigator;return et(this,"platform",{isAndroid:e.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:e.includes("Firefox")})}return et(this,"platform",{isAndroid:!1,isLinux:!1,isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){var t,e;return et(this,"isCSSRoundSupported",(e=(t=globalThis.CSS)==null?void 0:t.supports)==null?void 0:e.call(t,"width: round(1.5px, 1px)"))}}const vg=Array.from(Array(256).keys(),s=>s.toString(16).padStart(2,"0"));var Ti,Vd,vm;class U{static makeHexColor(t,e,n){return`#${vg[t]}${vg[e]}${vg[n]}`}static scaleMinMax(t,e){let n;t[0]?(t[0]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[3],e[3]*=t[3]):(n=e[0],e[0]=e[1],e[1]=n,n=e[2],e[2]=e[3],e[3]=n,t[1]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static applyTransform(t,e,n=0){const i=t[n],r=t[n+1];t[n]=i*e[0]+r*e[2]+e[4],t[n+1]=i*e[1]+r*e[3]+e[5]}static applyTransformToBezier(t,e,n=0){const i=e[0],r=e[1],a=e[2],l=e[3],c=e[4],u=e[5];for(let h=0;h<6;h+=2){const d=t[n+h],f=t[n+h+1];t[n+h]=d*i+f*a+c,t[n+h+1]=d*r+f*l+u}}static applyInverseTransform(t,e){const n=t[0],i=t[1],r=e[0]*e[3]-e[1]*e[2];t[0]=(n*e[3]-i*e[2]+e[2]*e[5]-e[4]*e[3])/r,t[1]=(-n*e[1]+i*e[0]+e[4]*e[1]-e[5]*e[0])/r}static axialAlignedBoundingBox(t,e,n){const i=e[0],r=e[1],a=e[2],l=e[3],c=e[4],u=e[5],h=t[0],d=t[1],f=t[2],p=t[3];let w=i*h+c,y=w,S=i*f+c,m=S,v=l*d+u,b=v,_=l*p+u,E=_;if(r!==0||a!==0){const k=r*h,T=r*f,P=a*d,R=a*p;w+=P,m+=P,S+=R,y+=R,v+=k,E+=k,_+=T,b+=T}n[0]=Math.min(n[0],w,S,y,m),n[1]=Math.min(n[1],v,_,b,E),n[2]=Math.max(n[2],w,S,y,m),n[3]=Math.max(n[3],v,_,b,E)}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t,e){const n=t[0],i=t[1],r=t[2],a=t[3],l=n**2+i**2,c=n*r+i*a,u=r**2+a**2,h=(l+u)/2,d=Math.sqrt(h**2-(l*u-c**2));e[0]=Math.sqrt(h+d||1),e[1]=Math.sqrt(h-d||1)}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const n=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),i=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(n>i)return null;const r=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),a=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return r>a?null:[n,r,i,a]}static pointBoundingBox(t,e,n){n[0]=Math.min(n[0],t),n[1]=Math.min(n[1],e),n[2]=Math.max(n[2],t),n[3]=Math.max(n[3],e)}static rectBoundingBox(t,e,n,i,r){r[0]=Math.min(r[0],t,n),r[1]=Math.min(r[1],e,i),r[2]=Math.max(r[2],t,n),r[3]=Math.max(r[3],e,i)}static bezierBoundingBox(t,e,n,i,r,a,l,c,u){u[0]=Math.min(u[0],t,l),u[1]=Math.min(u[1],e,c),u[2]=Math.max(u[2],t,l),u[3]=Math.max(u[3],e,c),x(this,Ti,vm).call(this,t,n,r,l,e,i,a,c,3*(-t+3*(n-r)+l),6*(t-2*n+r),3*(n-t),u),x(this,Ti,vm).call(this,t,n,r,l,e,i,a,c,3*(-e+3*(i-a)+c),6*(e-2*i+a),3*(i-e),u)}}Ti=new WeakSet,Vd=function(t,e,n,i,r,a,l,c,u,h){if(u<=0||u>=1)return;const d=1-u,f=u*u,p=f*u,w=d*(d*(d*t+3*u*e)+3*f*n)+p*i,y=d*(d*(d*r+3*u*a)+3*f*l)+p*c;h[0]=Math.min(h[0],w),h[1]=Math.min(h[1],y),h[2]=Math.max(h[2],w),h[3]=Math.max(h[3],y)},vm=function(t,e,n,i,r,a,l,c,u,h,d,f){if(Math.abs(u)<1e-12){Math.abs(h)>=1e-12&&x(this,Ti,Vd).call(this,t,e,n,i,r,a,l,c,-d/h,f);return}const p=h**2-4*d*u;if(p<0)return;const w=Math.sqrt(p),y=2*u;x(this,Ti,Vd).call(this,t,e,n,i,r,a,l,c,(-h+w)/y,f),x(this,Ti,Vd).call(this,t,e,n,i,r,a,l,c,(-h-w)/y,f)},A(U,Ti);function rC(s){return decodeURIComponent(escape(s))}let wg=null,uw=null;function aC(s){return wg||(wg=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,uw=new Map([["ﬅ","ſt"]])),s.replaceAll(wg,(t,e,n)=>e?e.normalize("NFKC"):uw.get(n))}function Y1(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const s=new Uint8Array(32);return crypto.getRandomValues(s),q1(s)}const T0="pdfjs_internal_id_";function oC(s,t,e){if(!Array.isArray(e)||e.length<2)return!1;const[n,i,...r]=e;if(!s(n)&&!Number.isInteger(n)||!t(i))return!1;const a=r.length;let l=!0;switch(i.name){case"XYZ":if(a<2||a>3)return!1;break;case"Fit":case"FitB":return a===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(a>1)return!1;break;case"FitR":if(a!==4)return!1;l=!1;break;default:return!1}for(const c of r)if(!(typeof c=="number"||l&&c===null))return!1;return!0}function Be(s,t,e){return Math.min(Math.max(s,t),e)}function K1(s){return Uint8Array.prototype.toBase64?s.toBase64():btoa(q1(s))}function lC(s){return Uint8Array.fromBase64?Uint8Array.fromBase64(s):td(atob(s))}typeof Promise.try!="function"&&(Promise.try=function(s,...t){return new Promise(e=>{e(s(...t))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(s){return s.reduce((t,e)=>t+e,0)});const Us="http://www.w3.org/2000/svg",Qr=class Qr{};I(Qr,"CSS",96),I(Qr,"PDF",72),I(Qr,"PDF_TO_CSS_UNITS",Qr.CSS/Qr.PDF);let zr=Qr;async function ed(s,t="text"){if(_o(s,document.baseURI)){const e=await fetch(s);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,n)=>{const i=new XMLHttpRequest;i.open("GET",s,!0),i.responseType=t,i.onreadystatechange=()=>{if(i.readyState===XMLHttpRequest.DONE){if(i.status===200||i.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(i.response);return}e(i.responseText);return}n(new Error(i.statusText))}},i.send(null)})}class nd{constructor({viewBox:t,userUnit:e,scale:n,rotation:i,offsetX:r=0,offsetY:a=0,dontFlip:l=!1}){this.viewBox=t,this.userUnit=e,this.scale=n,this.rotation=i,this.offsetX=r,this.offsetY=a,n*=e;const c=(t[2]+t[0])/2,u=(t[3]+t[1])/2;let h,d,f,p;switch(i%=360,i<0&&(i+=360),i){case 180:h=-1,d=0,f=0,p=1;break;case 90:h=0,d=1,f=1,p=0;break;case 270:h=0,d=-1,f=-1,p=0;break;case 0:h=1,d=0,f=0,p=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}l&&(f=-f,p=-p);let w,y,S,m;h===0?(w=Math.abs(u-t[1])*n+r,y=Math.abs(c-t[0])*n+a,S=(t[3]-t[1])*n,m=(t[2]-t[0])*n):(w=Math.abs(c-t[0])*n+r,y=Math.abs(u-t[1])*n+a,S=(t[2]-t[0])*n,m=(t[3]-t[1])*n),this.transform=[h*n,d*n,f*n,p*n,w-h*n*c-f*n*u,y-d*n*c-p*n*u],this.width=S,this.height=m}get rawDims(){const t=this.viewBox;return et(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:n=this.offsetX,offsetY:i=this.offsetY,dontFlip:r=!1}={}){return new nd({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:n,offsetY:i,dontFlip:r})}convertToViewportPoint(t,e){const n=[t,e];return U.applyTransform(n,this.transform),n}convertToViewportRectangle(t){const e=[t[0],t[1]];U.applyTransform(e,this.transform);const n=[t[2],t[3]];return U.applyTransform(n,this.transform),[e[0],e[1],n[0],n[1]]}convertToPdfPoint(t,e){const n=[t,e];return U.applyInverseTransform(n,this.transform),n}}class P0 extends wo{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function zp(s){const t=s.length;let e=0;for(;e<t&&s[e].trim()==="";)e++;return s.substring(e,e+5).toLowerCase()==="data:"}function R0(s){return typeof s=="string"&&/\.pdf$/i.test(s)}function cC(s){return[s]=s.split(/[#?]/,1),s.substring(s.lastIndexOf("/")+1)}function uC(s,t="document.pdf"){if(typeof s!="string")return t;if(zp(s))return Y('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const e=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,n=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,i=e.exec(s);let r=n.exec(i[1])||n.exec(i[2])||n.exec(i[3]);if(r&&(r=r[0],r.includes("%")))try{r=n.exec(decodeURIComponent(r))[0]}catch{}return r||t}class hw{constructor(){I(this,"started",Object.create(null));I(this,"times",[])}time(t){t in this.started&&Y(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||Y(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:n}of this.times)e=Math.max(n.length,e);for(const{name:n,start:i,end:r}of this.times)t.push(`${n.padEnd(e)} ${r-i}ms
`);return t.join("")}}function _o(s,t){const e=t?URL.parse(s,t):URL.parse(s);return(e==null?void 0:e.protocol)==="http:"||(e==null?void 0:e.protocol)==="https:"}function gs(s){s.preventDefault()}function Ut(s){s.preventDefault(),s.stopPropagation()}var Cu;class N0{static toDateObject(t){if(!t||typeof t!="string")return null;o(this,Cu)||g(this,Cu,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const e=o(this,Cu).exec(t);if(!e)return null;const n=parseInt(e[1],10);let i=parseInt(e[2],10);i=i>=1&&i<=12?i-1:0;let r=parseInt(e[3],10);r=r>=1&&r<=31?r:1;let a=parseInt(e[4],10);a=a>=0&&a<=23?a:0;let l=parseInt(e[5],10);l=l>=0&&l<=59?l:0;let c=parseInt(e[6],10);c=c>=0&&c<=59?c:0;const u=e[7]||"Z";let h=parseInt(e[8],10);h=h>=0&&h<=23?h:0;let d=parseInt(e[9],10)||0;return d=d>=0&&d<=59?d:0,u==="-"?(a+=h,l+=d):u==="+"&&(a-=h,l-=d),new Date(Date.UTC(n,i,r,a,l,c))}}Cu=new WeakMap,A(N0,Cu);function hC(s,{scale:t=1,rotation:e=0}){const{width:n,height:i}=s.attributes.style,r=[0,0,parseInt(n),parseInt(i)];return new nd({viewBox:r,userUnit:1,scale:t,rotation:e})}function M0(s){if(s.startsWith("#")){const t=parseInt(s.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return s.startsWith("rgb(")?s.slice(4,-1).split(",").map(t=>parseInt(t)):s.startsWith("rgba(")?s.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(Y(`Not a valid color format: "${s}"`),[0,0,0])}function dC(s){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const e of s.keys()){t.style.color=e;const n=window.getComputedStyle(t).color;s.set(e,M0(n))}t.remove()}function Nt(s){const{a:t,b:e,c:n,d:i,e:r,f:a}=s.getTransform();return[t,e,n,i,r,a]}function vs(s){const{a:t,b:e,c:n,d:i,e:r,f:a}=s.getTransform().invertSelf();return[t,e,n,i,r,a]}function po(s,t,e=!1,n=!0){if(t instanceof nd){const{pageWidth:i,pageHeight:r}=t.rawDims,{style:a}=s,l=Ae.isCSSRoundSupported,c=`var(--total-scale-factor) * ${i}px`,u=`var(--total-scale-factor) * ${r}px`,h=l?`round(down, ${c}, var(--scale-round-x))`:`calc(${c})`,d=l?`round(down, ${u}, var(--scale-round-y))`:`calc(${u})`;!e||t.rotation%180===0?(a.width=h,a.height=d):(a.width=d,a.height=h)}n&&s.setAttribute("data-main-rotation",t.rotation)}class Li{constructor(){const{pixelRatio:t}=Li;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,e,n,i){let r=1/0,a=1/0,l=1/0;n>0&&(r=Math.sqrt(n/(t*e))),i!==-1&&(a=i/t,l=i/e);const c=Math.min(r,a,l);return this.sx>c||this.sy>c?(this.sx=c,this.sy=c,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}}const wm=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];var Vi,na,Nn,Wi,ku,tl,Tu,ep,Q1,ve,Z1,J1,Dc,tx,Wd;const Xs=class Xs{constructor(t){A(this,ve);A(this,Vi,null);A(this,na,null);A(this,Nn);A(this,Wi,null);A(this,ku,null);A(this,tl,null);g(this,Nn,t),o(Xs,Tu)||g(Xs,Tu,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const t=g(this,Vi,document.createElement("div"));t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=o(this,Nn)._uiManager._signal;t.addEventListener("contextmenu",gs,{signal:e}),t.addEventListener("pointerdown",x(Xs,ep,Q1),{signal:e});const n=g(this,Wi,document.createElement("div"));n.className="buttons",t.append(n);const i=o(this,Nn).toolbarPosition;if(i){const{style:r}=t,a=o(this,Nn)._uiManager.direction==="ltr"?1-i[0]:i[0];r.insetInlineEnd=`${100*a}%`,r.top=`calc(${100*i[1]}% + var(--editor-toolbar-vert-offset))`}return x(this,ve,tx).call(this),t}get div(){return o(this,Vi)}hide(){var t;o(this,Vi).classList.add("hidden"),(t=o(this,na))==null||t.hideDropdown()}show(){var t;o(this,Vi).classList.remove("hidden"),(t=o(this,ku))==null||t.shown()}async addAltText(t){const e=await t.render();x(this,ve,Dc).call(this,e),o(this,Wi).prepend(e,o(this,ve,Wd)),g(this,ku,t)}addColorPicker(t){g(this,na,t);const e=t.renderButton();x(this,ve,Dc).call(this,e),o(this,Wi).prepend(e,o(this,ve,Wd))}async addEditSignatureButton(t){const e=g(this,tl,await t.renderEditButton(o(this,Nn)));x(this,ve,Dc).call(this,e),o(this,Wi).prepend(e,o(this,ve,Wd))}updateEditSignatureButton(t){o(this,tl)&&(o(this,tl).title=t)}remove(){var t;o(this,Vi).remove(),(t=o(this,na))==null||t.destroy(),g(this,na,null)}};Vi=new WeakMap,na=new WeakMap,Nn=new WeakMap,Wi=new WeakMap,ku=new WeakMap,tl=new WeakMap,Tu=new WeakMap,ep=new WeakSet,Q1=function(t){t.stopPropagation()},ve=new WeakSet,Z1=function(t){o(this,Nn)._focusEventsAllowed=!1,Ut(t)},J1=function(t){o(this,Nn)._focusEventsAllowed=!0,Ut(t)},Dc=function(t){const e=o(this,Nn)._uiManager._signal;t.addEventListener("focusin",x(this,ve,Z1).bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",x(this,ve,J1).bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",gs,{signal:e})},tx=function(){const{editorType:t,_uiManager:e}=o(this,Nn),n=document.createElement("button");n.className="delete",n.tabIndex=0,n.setAttribute("data-l10n-id",o(Xs,Tu)[t]),x(this,ve,Dc).call(this,n),n.addEventListener("click",i=>{e.delete()},{signal:e._signal}),o(this,Wi).append(n)},Wd=function(){const t=document.createElement("div");return t.className="divider",t},A(Xs,ep),A(Xs,Tu,null);let Am=Xs;var Pu,sa,ia,Br,ex,nx,sx;class fC{constructor(t){A(this,Br);A(this,Pu,null);A(this,sa,null);A(this,ia);g(this,ia,t)}show(t,e,n){const[i,r]=x(this,Br,nx).call(this,e,n),{style:a}=o(this,sa)||g(this,sa,x(this,Br,ex).call(this));t.append(o(this,sa)),a.insetInlineEnd=`${100*i}%`,a.top=`calc(${100*r}% + var(--editor-toolbar-vert-offset))`}hide(){o(this,sa).remove()}}Pu=new WeakMap,sa=new WeakMap,ia=new WeakMap,Br=new WeakSet,ex=function(){const t=g(this,sa,document.createElement("div"));t.className="editToolbar",t.setAttribute("role","toolbar"),t.addEventListener("contextmenu",gs,{signal:o(this,ia)._signal});const e=g(this,Pu,document.createElement("div"));return e.className="buttons",t.append(e),x(this,Br,sx).call(this),t},nx=function(t,e){let n=0,i=0;for(const r of t){const a=r.y+r.height;if(a<n)continue;const l=r.x+(e?r.width:0);if(a>n){i=l,n=a;continue}e?l>i&&(i=l):l<i&&(i=l)}return[e?1-i:i,n]},sx=function(){const t=document.createElement("button");t.className="highlightButton",t.tabIndex=0,t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const e=document.createElement("span");t.append(e),e.className="visuallyHidden",e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const n=o(this,ia)._signal;t.addEventListener("contextmenu",gs,{signal:n}),t.addEventListener("click",()=>{o(this,ia).highlightSelection("floating_button")},{signal:n}),o(this,Pu).append(t)};function I0(s,t,e){for(const n of e)t.addEventListener(n,s[n].bind(s))}var np;class pC{constructor(){A(this,np,0)}get id(){return`${YE}${Ie(this,np)._++}`}}np=new WeakMap;var el,Ru,ke,nl,Gd;const B0=class B0{constructor(){A(this,nl);A(this,el,Y1());A(this,Ru,0);A(this,ke,null)}static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),i=new Image;i.src=t;const r=i.decode().then(()=>(n.drawImage(i,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return et(this,"_isSVGFittingCanvas",r)}async getFromFile(t){const{lastModified:e,name:n,size:i,type:r}=t;return x(this,nl,Gd).call(this,`${e}_${n}_${i}_${r}`,t)}async getFromUrl(t){return x(this,nl,Gd).call(this,t,t)}async getFromBlob(t,e){const n=await e;return x(this,nl,Gd).call(this,t,n)}async getFromId(t){o(this,ke)||g(this,ke,new Map);const e=o(this,ke).get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:n}=e;return delete e.blobPromise,this.getFromBlob(e.id,n)}return this.getFromUrl(e.url)}getFromCanvas(t,e){o(this,ke)||g(this,ke,new Map);let n=o(this,ke).get(t);if(n!=null&&n.bitmap)return n.refCounter+=1,n;const i=new OffscreenCanvas(e.width,e.height);return i.getContext("2d").drawImage(e,0,0),n={bitmap:i.transferToImageBitmap(),id:`image_${o(this,el)}_${Ie(this,Ru)._++}`,refCounter:1,isSvg:!1},o(this,ke).set(t,n),o(this,ke).set(n.id,n),n}getSvgUrl(t){const e=o(this,ke).get(t);return e!=null&&e.isSvg?e.svgUrl:null}deleteId(t){var i;o(this,ke)||g(this,ke,new Map);const e=o(this,ke).get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:n}=e;if(!e.url&&!e.file){const r=new OffscreenCanvas(n.width,n.height);r.getContext("bitmaprenderer").transferFromImageBitmap(n),e.blobPromise=r.convertToBlob()}(i=n.close)==null||i.call(n),e.bitmap=null}isValidId(t){return t.startsWith(`image_${o(this,el)}_`)}};el=new WeakMap,Ru=new WeakMap,ke=new WeakMap,nl=new WeakSet,Gd=async function(t,e){o(this,ke)||g(this,ke,new Map);let n=o(this,ke).get(t);if(n===null)return null;if(n!=null&&n.bitmap)return n.refCounter+=1,n;try{n||(n={bitmap:null,id:`image_${o(this,el)}_${Ie(this,Ru)._++}`,refCounter:0,isSvg:!1});let i;if(typeof e=="string"?(n.url=e,i=await ed(e,"blob")):e instanceof File?i=n.file=e:e instanceof Blob&&(i=e),i.type==="image/svg+xml"){const r=B0._isSVGFittingCanvas,a=new FileReader,l=new Image,c=new Promise((u,h)=>{l.onload=()=>{n.bitmap=l,n.isSvg=!0,u()},a.onload=async()=>{const d=n.svgUrl=a.result;l.src=await r?`${d}#svgView(preserveAspectRatio(none))`:d},l.onerror=a.onerror=h});a.readAsDataURL(i),await c}else n.bitmap=await createImageBitmap(i);n.refCounter=1}catch(i){Y(i),n=null}return o(this,ke).set(t,n),n&&o(this,ke).set(n.id,n),n};let xm=B0;var Ot,Gi,Nu,Rt;class gC{constructor(t=128){A(this,Ot,[]);A(this,Gi,!1);A(this,Nu);A(this,Rt,-1);g(this,Nu,t)}add({cmd:t,undo:e,post:n,mustExec:i,type:r=NaN,overwriteIfSameType:a=!1,keepUndo:l=!1}){if(i&&t(),o(this,Gi))return;const c={cmd:t,undo:e,post:n,type:r};if(o(this,Rt)===-1){o(this,Ot).length>0&&(o(this,Ot).length=0),g(this,Rt,0),o(this,Ot).push(c);return}if(a&&o(this,Ot)[o(this,Rt)].type===r){l&&(c.undo=o(this,Ot)[o(this,Rt)].undo),o(this,Ot)[o(this,Rt)]=c;return}const u=o(this,Rt)+1;u===o(this,Nu)?o(this,Ot).splice(0,1):(g(this,Rt,u),u<o(this,Ot).length&&o(this,Ot).splice(u)),o(this,Ot).push(c)}undo(){if(o(this,Rt)===-1)return;g(this,Gi,!0);const{undo:t,post:e}=o(this,Ot)[o(this,Rt)];t(),e==null||e(),g(this,Gi,!1),g(this,Rt,o(this,Rt)-1)}redo(){if(o(this,Rt)<o(this,Ot).length-1){g(this,Rt,o(this,Rt)+1),g(this,Gi,!0);const{cmd:t,post:e}=o(this,Ot)[o(this,Rt)];t(),e==null||e(),g(this,Gi,!1)}}hasSomethingToUndo(){return o(this,Rt)!==-1}hasSomethingToRedo(){return o(this,Rt)<o(this,Ot).length-1}cleanType(t){if(o(this,Rt)!==-1){for(let e=o(this,Rt);e>=0;e--)if(o(this,Ot)[e].type!==t){o(this,Ot).splice(e+1,o(this,Rt)-e),g(this,Rt,e);return}o(this,Ot).length=0,g(this,Rt,-1)}}destroy(){g(this,Ot,null)}}Ot=new WeakMap,Gi=new WeakMap,Nu=new WeakMap,Rt=new WeakMap;var sp,ix;class sd{constructor(t){A(this,sp);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=Ae.platform;for(const[n,i,r={}]of t)for(const a of n){const l=a.startsWith("mac+");e&&l?(this.callbacks.set(a.slice(4),{callback:i,options:r}),this.allKeys.add(a.split("+").at(-1))):!e&&!l&&(this.callbacks.set(a,{callback:i,options:r}),this.allKeys.add(a.split("+").at(-1)))}}exec(t,e){if(!this.allKeys.has(e.key))return;const n=this.callbacks.get(x(this,sp,ix).call(this,e));if(!n)return;const{callback:i,options:{bubbles:r=!1,args:a=[],checker:l=null}}=n;l&&!l(t,e)||(i.bind(t,...a,e)(),r||Ut(e))}}sp=new WeakSet,ix=function(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e};const ip=class ip{get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return dC(t),et(this,"_colors",t)}convert(t){const e=M0(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[n,i]of this._colors)if(i.every((r,a)=>r===e[a]))return ip._colorsMapping.get(n);return e}getHexCode(t){const e=this._colors.get(t);return e?U.makeHexColor(...e):t}};I(ip,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let bm=ip;var sl,an,Kt,ue,il,Ks,rl,Mn,Xi,qi,al,ra,bs,Qn,aa,Mu,Iu,ol,Lu,Ss,Yi,ll,Ki,_s,rp,Qi,Du,Zi,oa,la,Ji,Fu,ee,dt,Qs,tr,ca,Ou,ju,er,Es,Zs,zu,In,F,Xd,Sm,rx,ax,qd,ox,lx,cx,_m,ux,Em,Cm,hx,Le,Vs,dx,fx,km,px,Fc,Tm;const Vo=class Vo{constructor(t,e,n,i,r,a,l,c,u,h,d,f,p,w){A(this,F);A(this,sl,new AbortController);A(this,an,null);A(this,Kt,new Map);A(this,ue,new Map);A(this,il,null);A(this,Ks,null);A(this,rl,null);A(this,Mn,new gC);A(this,Xi,null);A(this,qi,null);A(this,al,0);A(this,ra,new Set);A(this,bs,null);A(this,Qn,null);A(this,aa,new Set);I(this,"_editorUndoBar",null);A(this,Mu,!1);A(this,Iu,!1);A(this,ol,!1);A(this,Lu,null);A(this,Ss,null);A(this,Yi,null);A(this,ll,null);A(this,Ki,!1);A(this,_s,null);A(this,rp,new pC);A(this,Qi,!1);A(this,Du,!1);A(this,Zi,null);A(this,oa,null);A(this,la,null);A(this,Ji,null);A(this,Fu,null);A(this,ee,q.NONE);A(this,dt,new Set);A(this,Qs,null);A(this,tr,null);A(this,ca,null);A(this,Ou,null);A(this,ju,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});A(this,er,[0,0]);A(this,Es,null);A(this,Zs,null);A(this,zu,null);A(this,In,null);const y=this._signal=o(this,sl).signal;g(this,Zs,t),g(this,zu,e),g(this,il,n),g(this,tr,i),this._eventBus=r,r._on("editingaction",this.onEditingAction.bind(this),{signal:y}),r._on("pagechanging",this.onPageChanging.bind(this),{signal:y}),r._on("scalechanging",this.onScaleChanging.bind(this),{signal:y}),r._on("rotationchanging",this.onRotationChanging.bind(this),{signal:y}),r._on("setpreference",this.onSetPreference.bind(this),{signal:y}),r._on("switchannotationeditorparams",S=>this.updateParams(S.type,S.value),{signal:y}),x(this,F,ox).call(this),x(this,F,hx).call(this),x(this,F,_m).call(this),g(this,Ks,a.annotationStorage),g(this,Lu,a.filterFactory),g(this,ca,l),g(this,ll,c||null),g(this,Mu,u),g(this,Iu,h),g(this,ol,d),g(this,Fu,f||null),this.viewParameters={realScale:zr.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=p||null,this._supportsPinchToZoom=w!==!1}static get _keyboardManager(){const t=Vo.prototype,e=a=>o(a,Zs).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&a.hasSomethingToControl(),n=(a,{target:l})=>{if(l instanceof HTMLInputElement){const{type:c}=l;return c!=="text"&&c!=="number"}return!0},i=this.TRANSLATE_SMALL,r=this.TRANSLATE_BIG;return et(this,"_keyboardManager",new sd([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],t.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:n}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(a,{target:l})=>!(l instanceof HTMLButtonElement)&&o(a,Zs).contains(l)&&!a.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(a,{target:l})=>!(l instanceof HTMLButtonElement)&&o(a,Zs).contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-i,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-r,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[i,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[r,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-i],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-r],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,i],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,r],checker:e}]]))}destroy(){var t,e,n,i,r,a,l,c;(t=o(this,In))==null||t.resolve(),g(this,In,null),(e=o(this,sl))==null||e.abort(),g(this,sl,null),this._signal=null;for(const u of o(this,ue).values())u.destroy();o(this,ue).clear(),o(this,Kt).clear(),o(this,aa).clear(),(n=o(this,Ji))==null||n.clear(),g(this,an,null),o(this,dt).clear(),o(this,Mn).destroy(),(i=o(this,il))==null||i.destroy(),(r=o(this,tr))==null||r.destroy(),(a=o(this,_s))==null||a.hide(),g(this,_s,null),(l=o(this,la))==null||l.destroy(),g(this,la,null),o(this,Ss)&&(clearTimeout(o(this,Ss)),g(this,Ss,null)),o(this,Es)&&(clearTimeout(o(this,Es)),g(this,Es,null)),(c=this._editorUndoBar)==null||c.destroy()}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return o(this,Fu)}get useNewAltTextFlow(){return o(this,Iu)}get useNewAltTextWhenAddingImage(){return o(this,ol)}get hcmFilter(){return et(this,"hcmFilter",o(this,ca)?o(this,Lu).addHCMFilter(o(this,ca).foreground,o(this,ca).background):"none")}get direction(){return et(this,"direction",getComputedStyle(o(this,Zs)).direction)}get highlightColors(){return et(this,"highlightColors",o(this,ll)?new Map(o(this,ll).split(",").map(t=>t.split("=").map(e=>e.trim()))):null)}get highlightColorNames(){return et(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),g(this,qi,t)}setMainHighlightColorPicker(t){g(this,la,t)}editAltText(t,e=!1){var n;(n=o(this,il))==null||n.editAltText(this,t,e)}getSignature(t){var e;(e=o(this,tr))==null||e.getSignature({uiManager:this,editor:t})}get signatureManager(){return o(this,tr)}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){switch(t){case"enableNewAltTextWhenAddingImage":g(this,ol,e);break}}onPageChanging({pageNumber:t}){g(this,al,t-1)}focusMainContainer(){o(this,Zs).focus()}findParent(t,e){for(const n of o(this,ue).values()){const{x:i,y:r,width:a,height:l}=n.div.getBoundingClientRect();if(t>=i&&t<=i+a&&e>=r&&e<=r+l)return n}return null}disableUserSelect(t=!1){o(this,zu).classList.toggle("noUserSelect",t)}addShouldRescale(t){o(this,aa).add(t)}removeShouldRescale(t){o(this,aa).delete(t)}onScaleChanging({scale:t}){var e;this.commitOrRemove(),this.viewParameters.realScale=t*zr.PDF_TO_CSS_UNITS;for(const n of o(this,aa))n.onScaleChanging();(e=o(this,qi))==null||e.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}highlightSelection(t=""){const e=document.getSelection();if(!e||e.isCollapsed)return;const{anchorNode:n,anchorOffset:i,focusNode:r,focusOffset:a}=e,l=e.toString(),u=x(this,F,Xd).call(this,e).closest(".textLayer"),h=this.getSelectionBoxes(u);if(!h)return;e.empty();const d=x(this,F,Sm).call(this,u),f=o(this,ee)===q.NONE,p=()=>{d==null||d.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:h,anchorNode:n,anchorOffset:i,focusNode:r,focusOffset:a,text:l}),f&&this.showAllEditors("highlight",!0,!0)};if(f){this.switchToMode(q.HIGHLIGHT,p);return}p()}addToAnnotationStorage(t){!t.isEmpty()&&o(this,Ks)&&!o(this,Ks).has(t.id)&&o(this,Ks).setValue(t.id,t)}blur(){if(this.isShiftKeyDown=!1,o(this,Ki)&&(g(this,Ki,!1),x(this,F,qd).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of o(this,dt))if(e.div.contains(t)){g(this,oa,[e,t]),e._focusEventsAllowed=!1;break}}focus(){if(!o(this,oa))return;const[t,e]=o(this,oa);g(this,oa,null),e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}addEditListeners(){x(this,F,_m).call(this),x(this,F,Em).call(this)}removeEditListeners(){x(this,F,ux).call(this),x(this,F,Cm).call(this)}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const n of o(this,Qn))if(n.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const n of o(this,Qn))if(n.isHandlingMimeForPasting(e.type)){n.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){var n;if(t.preventDefault(),(n=o(this,an))==null||n.commitOrRemove(),!this.hasSelection)return;const e=[];for(const i of o(this,dt)){const r=i.serialize(!0);r&&e.push(r)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const r of e.items)for(const a of o(this,Qn))if(a.isHandlingMimeForPasting(r.type)){a.paste(r,this.currentLayer);return}let n=e.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(r){Y(`paste: "${r.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const i=this.currentLayer;try{const r=[];for(const c of n){const u=await i.deserialize(c);if(!u)return;r.push(u)}const a=()=>{for(const c of r)x(this,F,km).call(this,c);x(this,F,Tm).call(this,r)},l=()=>{for(const c of r)c.remove()};this.addCommands({cmd:a,undo:l,mustExec:!0})}catch(r){Y(`paste: "${r.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),o(this,ee)!==q.NONE&&!this.isEditorHandlingKeyboard&&Vo._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,o(this,Ki)&&(g(this,Ki,!1),x(this,F,qd).call(this,"main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(t){t?(x(this,F,lx).call(this),x(this,F,Em).call(this),x(this,F,Le).call(this,{isEditing:o(this,ee)!==q.NONE,isEmpty:x(this,F,Fc).call(this),hasSomethingToUndo:o(this,Mn).hasSomethingToUndo(),hasSomethingToRedo:o(this,Mn).hasSomethingToRedo(),hasSelectedEditor:!1})):(x(this,F,cx).call(this),x(this,F,Cm).call(this),x(this,F,Le).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!o(this,Qn)){g(this,Qn,t);for(const e of o(this,Qn))x(this,F,Vs).call(this,e.defaultPropertiesToUpdate)}}getId(){return o(this,rp).id}get currentLayer(){return o(this,ue).get(o(this,al))}getLayer(t){return o(this,ue).get(t)}get currentPageIndex(){return o(this,al)}addLayer(t){o(this,ue).set(t.pageIndex,t),o(this,Qi)?t.enable():t.disable()}removeLayer(t){o(this,ue).delete(t.pageIndex)}async updateMode(t,e=null,n=!1){var i,r,a;if(o(this,ee)!==t&&!(o(this,In)&&(await o(this,In).promise,!o(this,In)))){if(g(this,In,Promise.withResolvers()),(i=o(this,qi))==null||i.commitOrRemove(),g(this,ee,t),t===q.NONE){this.setEditingState(!1),x(this,F,fx).call(this),(r=this._editorUndoBar)==null||r.hide(),o(this,In).resolve();return}t===q.SIGNATURE&&await((a=o(this,tr))==null?void 0:a.loadSignatures()),this.setEditingState(!0),await x(this,F,dx).call(this),this.unselectAll();for(const l of o(this,ue).values())l.updateMode(t);if(!e){n&&this.addNewEditorFromKeyboard(),o(this,In).resolve();return}for(const l of o(this,Kt).values())l.annotationElementId===e?(this.setSelected(l),l.enterInEditMode()):l.unselect();o(this,In).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t!==o(this,ee)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:t})}updateParams(t,e){var n;if(o(this,Qn)){switch(t){case it.CREATE:this.currentLayer.addNewEditor(e);return;case it.HIGHLIGHT_DEFAULT_COLOR:(n=o(this,la))==null||n.updateColor(e);break;case it.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(o(this,Ou)||g(this,Ou,new Map)).set(t,e),this.showAllEditors("highlight",e);break}for(const i of o(this,dt))i.updateParams(t,e);for(const i of o(this,Qn))i.updateDefaultParams(t,e)}}showAllEditors(t,e,n=!1){var r;for(const a of o(this,Kt).values())a.editorType===t&&a.show(e);(((r=o(this,Ou))==null?void 0:r.get(it.HIGHLIGHT_SHOW_ALL))??!0)!==e&&x(this,F,Vs).call(this,[[it.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(o(this,Du)!==t){g(this,Du,t);for(const e of o(this,ue).values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}getEditors(t){const e=[];for(const n of o(this,Kt).values())n.pageIndex===t&&e.push(n);return e}getEditor(t){return o(this,Kt).get(t)}addEditor(t){o(this,Kt).set(t.id,t)}removeEditor(t){var e,n;t.div.contains(document.activeElement)&&(o(this,Ss)&&clearTimeout(o(this,Ss)),g(this,Ss,setTimeout(()=>{this.focusMainContainer(),g(this,Ss,null)},0))),o(this,Kt).delete(t.id),t.annotationElementId&&((e=o(this,Ji))==null||e.delete(t.annotationElementId)),this.unselect(t),(!t.annotationElementId||!o(this,ra).has(t.annotationElementId))&&((n=o(this,Ks))==null||n.remove(t.id))}addDeletedAnnotationElement(t){o(this,ra).add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return o(this,ra).has(t)}removeDeletedAnnotationElement(t){o(this,ra).delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}setActiveEditor(t){o(this,an)!==t&&(g(this,an,t),t&&x(this,F,Vs).call(this,t.propertiesToUpdate))}updateUI(t){o(this,F,px)===t&&x(this,F,Vs).call(this,t.propertiesToUpdate)}updateUIForDefaultProperties(t){x(this,F,Vs).call(this,t.defaultPropertiesToUpdate)}toggleSelected(t){if(o(this,dt).has(t)){o(this,dt).delete(t),t.unselect(),x(this,F,Le).call(this,{hasSelectedEditor:this.hasSelection});return}o(this,dt).add(t),t.select(),x(this,F,Vs).call(this,t.propertiesToUpdate),x(this,F,Le).call(this,{hasSelectedEditor:!0})}setSelected(t){var e;(e=o(this,qi))==null||e.commitOrRemove();for(const n of o(this,dt))n!==t&&n.unselect();o(this,dt).clear(),o(this,dt).add(t),t.select(),x(this,F,Vs).call(this,t.propertiesToUpdate),x(this,F,Le).call(this,{hasSelectedEditor:!0})}isSelected(t){return o(this,dt).has(t)}get firstSelectedEditor(){return o(this,dt).values().next().value}unselect(t){t.unselect(),o(this,dt).delete(t),x(this,F,Le).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return o(this,dt).size!==0}get isEnterHandled(){return o(this,dt).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var t;o(this,Mn).undo(),x(this,F,Le).call(this,{hasSomethingToUndo:o(this,Mn).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:x(this,F,Fc).call(this)}),(t=this._editorUndoBar)==null||t.hide()}redo(){o(this,Mn).redo(),x(this,F,Le).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:o(this,Mn).hasSomethingToRedo(),isEmpty:x(this,F,Fc).call(this)})}addCommands(t){o(this,Mn).add(t),x(this,F,Le).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:x(this,F,Fc).call(this)})}cleanUndoStack(t){o(this,Mn).cleanType(t)}delete(){var r;this.commitOrRemove();const t=(r=this.currentLayer)==null?void 0:r.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const e=t?[t]:[...o(this,dt)],n=()=>{var a;(a=this._editorUndoBar)==null||a.show(i,e.length===1?e[0].editorType:e.length);for(const l of e)l.remove()},i=()=>{for(const a of e)x(this,F,km).call(this,a)};this.addCommands({cmd:n,undo:i,mustExec:!0})}commitOrRemove(){var t;(t=o(this,an))==null||t.commitOrRemove()}hasSomethingToControl(){return o(this,an)||this.hasSelection}selectAll(){for(const t of o(this,dt))t.commit();x(this,F,Tm).call(this,o(this,Kt).values())}unselectAll(){var t;if(!(o(this,an)&&(o(this,an).commitOrRemove(),o(this,ee)!==q.NONE))&&!((t=o(this,qi))!=null&&t.commitOrRemove())&&this.hasSelection){for(const e of o(this,dt))e.unselect();o(this,dt).clear(),x(this,F,Le).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(t,e,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;o(this,er)[0]+=t,o(this,er)[1]+=e;const[i,r]=o(this,er),a=[...o(this,dt)],l=1e3;o(this,Es)&&clearTimeout(o(this,Es)),g(this,Es,setTimeout(()=>{g(this,Es,null),o(this,er)[0]=o(this,er)[1]=0,this.addCommands({cmd:()=>{for(const c of a)o(this,Kt).has(c.id)&&(c.translateInPage(i,r),c.translationDone())},undo:()=>{for(const c of a)o(this,Kt).has(c.id)&&(c.translateInPage(-i,-r),c.translationDone())},mustExec:!1})},l));for(const c of a)c.translateInPage(t,e),c.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),g(this,bs,new Map);for(const t of o(this,dt))o(this,bs).set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!o(this,bs))return!1;this.disableUserSelect(!1);const t=o(this,bs);g(this,bs,null);let e=!1;for(const[{x:i,y:r,pageIndex:a},l]of t)l.newX=i,l.newY=r,l.newPageIndex=a,e||(e=i!==l.savedX||r!==l.savedY||a!==l.savedPageIndex);if(!e)return!1;const n=(i,r,a,l)=>{if(o(this,Kt).has(i.id)){const c=o(this,ue).get(l);c?i._setParentAndPosition(c,r,a):(i.pageIndex=l,i.x=r,i.y=a)}};return this.addCommands({cmd:()=>{for(const[i,{newX:r,newY:a,newPageIndex:l}]of t)n(i,r,a,l)},undo:()=>{for(const[i,{savedX:r,savedY:a,savedPageIndex:l}]of t)n(i,r,a,l)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(o(this,bs))for(const n of o(this,bs).keys())n.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){var t;return((t=this.getActive())==null?void 0:t.shouldGetKeyboardEvents())||o(this,dt).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return o(this,an)===t}getActive(){return o(this,an)}getMode(){return o(this,ee)}get imageManager(){return et(this,"imageManager",new xm)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let u=0,h=e.rangeCount;u<h;u++)if(!t.contains(e.getRangeAt(u).commonAncestorContainer))return null;const{x:n,y:i,width:r,height:a}=t.getBoundingClientRect();let l;switch(t.getAttribute("data-main-rotation")){case"90":l=(u,h,d,f)=>({x:(h-i)/a,y:1-(u+d-n)/r,width:f/a,height:d/r});break;case"180":l=(u,h,d,f)=>({x:1-(u+d-n)/r,y:1-(h+f-i)/a,width:d/r,height:f/a});break;case"270":l=(u,h,d,f)=>({x:1-(h+f-i)/a,y:(u-n)/r,width:f/a,height:d/r});break;default:l=(u,h,d,f)=>({x:(u-n)/r,y:(h-i)/a,width:d/r,height:f/a});break}const c=[];for(let u=0,h=e.rangeCount;u<h;u++){const d=e.getRangeAt(u);if(!d.collapsed)for(const{x:f,y:p,width:w,height:y}of d.getClientRects())w===0||y===0||c.push(l(f,p,w,y))}return c.length===0?null:c}addChangedExistingAnnotation({annotationElementId:t,id:e}){(o(this,rl)||g(this,rl,new Map)).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){var e;(e=o(this,rl))==null||e.delete(t)}renderAnnotationElement(t){var i;const e=(i=o(this,rl))==null?void 0:i.get(t.data.id);if(!e)return;const n=o(this,Ks).getRawValue(e);n&&(o(this,ee)===q.NONE&&!n.hasBeenModified||n.renderAnnotationElement(t))}setMissingCanvas(t,e,n){var r;const i=(r=o(this,Ji))==null?void 0:r.get(t);i&&(i.setCanvas(e,n),o(this,Ji).delete(t))}addMissingCanvas(t,e){(o(this,Ji)||g(this,Ji,new Map)).set(t,e)}};sl=new WeakMap,an=new WeakMap,Kt=new WeakMap,ue=new WeakMap,il=new WeakMap,Ks=new WeakMap,rl=new WeakMap,Mn=new WeakMap,Xi=new WeakMap,qi=new WeakMap,al=new WeakMap,ra=new WeakMap,bs=new WeakMap,Qn=new WeakMap,aa=new WeakMap,Mu=new WeakMap,Iu=new WeakMap,ol=new WeakMap,Lu=new WeakMap,Ss=new WeakMap,Yi=new WeakMap,ll=new WeakMap,Ki=new WeakMap,_s=new WeakMap,rp=new WeakMap,Qi=new WeakMap,Du=new WeakMap,Zi=new WeakMap,oa=new WeakMap,la=new WeakMap,Ji=new WeakMap,Fu=new WeakMap,ee=new WeakMap,dt=new WeakMap,Qs=new WeakMap,tr=new WeakMap,ca=new WeakMap,Ou=new WeakMap,ju=new WeakMap,er=new WeakMap,Es=new WeakMap,Zs=new WeakMap,zu=new WeakMap,In=new WeakMap,F=new WeakSet,Xd=function({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t},Sm=function(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const n of o(this,ue).values())if(n.hasTextLayer(t))return n;return null},rx=function(){const t=document.getSelection();if(!t||t.isCollapsed)return;const n=x(this,F,Xd).call(this,t).closest(".textLayer"),i=this.getSelectionBoxes(n);i&&(o(this,_s)||g(this,_s,new fC(this)),o(this,_s).show(n,i,this.direction==="ltr"))},ax=function(){var r,a,l;const t=document.getSelection();if(!t||t.isCollapsed){o(this,Qs)&&((r=o(this,_s))==null||r.hide(),g(this,Qs,null),x(this,F,Le).call(this,{hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===o(this,Qs))return;const i=x(this,F,Xd).call(this,t).closest(".textLayer");if(!i){o(this,Qs)&&((a=o(this,_s))==null||a.hide(),g(this,Qs,null),x(this,F,Le).call(this,{hasSelectedText:!1}));return}if((l=o(this,_s))==null||l.hide(),g(this,Qs,e),x(this,F,Le).call(this,{hasSelectedText:!0}),!(o(this,ee)!==q.HIGHLIGHT&&o(this,ee)!==q.NONE)&&(o(this,ee)===q.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),g(this,Ki,this.isShiftKeyDown),!this.isShiftKeyDown)){const c=o(this,ee)===q.HIGHLIGHT?x(this,F,Sm).call(this,i):null;c==null||c.toggleDrawing();const u=new AbortController,h=this.combinedSignal(u),d=f=>{f.type==="pointerup"&&f.button!==0||(u.abort(),c==null||c.toggleDrawing(!0),f.type==="pointerup"&&x(this,F,qd).call(this,"main_toolbar"))};window.addEventListener("pointerup",d,{signal:h}),window.addEventListener("blur",d,{signal:h})}},qd=function(t=""){o(this,ee)===q.HIGHLIGHT?this.highlightSelection(t):o(this,Mu)&&x(this,F,rx).call(this)},ox=function(){document.addEventListener("selectionchange",x(this,F,ax).bind(this),{signal:this._signal})},lx=function(){if(o(this,Yi))return;g(this,Yi,new AbortController);const t=this.combinedSignal(o(this,Yi));window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})},cx=function(){var t;(t=o(this,Yi))==null||t.abort(),g(this,Yi,null)},_m=function(){if(o(this,Zi))return;g(this,Zi,new AbortController);const t=this.combinedSignal(o(this,Zi));window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})},ux=function(){var t;(t=o(this,Zi))==null||t.abort(),g(this,Zi,null)},Em=function(){if(o(this,Xi))return;g(this,Xi,new AbortController);const t=this.combinedSignal(o(this,Xi));document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})},Cm=function(){var t;(t=o(this,Xi))==null||t.abort(),g(this,Xi,null)},hx=function(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})},Le=function(t){Object.entries(t).some(([n,i])=>o(this,ju)[n]!==i)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(o(this,ju),t)}),o(this,ee)===q.HIGHLIGHT&&t.hasSelectedEditor===!1&&x(this,F,Vs).call(this,[[it.HIGHLIGHT_FREE,!0]]))},Vs=function(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})},dx=async function(){if(!o(this,Qi)){g(this,Qi,!0);const t=[];for(const e of o(this,ue).values())t.push(e.enable());await Promise.all(t);for(const e of o(this,Kt).values())e.enable()}},fx=function(){if(this.unselectAll(),o(this,Qi)){g(this,Qi,!1);for(const t of o(this,ue).values())t.disable();for(const t of o(this,Kt).values())t.disable()}},km=function(t){const e=o(this,ue).get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))},px=function(){let t=null;for(t of o(this,dt));return t},Fc=function(){if(o(this,Kt).size===0)return!0;if(o(this,Kt).size===1)for(const t of o(this,Kt).values())return t.isEmpty();return!1},Tm=function(t){for(const e of o(this,dt))e.unselect();o(this,dt).clear();for(const e of t)e.isEmpty()||(o(this,dt).add(e),e.select());x(this,F,Le).call(this,{hasSelectedEditor:this.hasSelection})},I(Vo,"TRANSLATE_SMALL",1),I(Vo,"TRANSLATE_BIG",10);let go=Vo;var ne,Cs,Zn,cl,ks,on,ul,Ts,Ye,Js,ua,Ps,nr,hs,Oc,Yd;const De=class De{constructor(t){A(this,hs);A(this,ne,null);A(this,Cs,!1);A(this,Zn,null);A(this,cl,null);A(this,ks,null);A(this,on,null);A(this,ul,!1);A(this,Ts,null);A(this,Ye,null);A(this,Js,null);A(this,ua,null);A(this,Ps,!1);g(this,Ye,t),g(this,Ps,t._uiManager.useNewAltTextFlow),o(De,nr)||g(De,nr,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(t){De._l10n??(De._l10n=t)}async render(){const t=g(this,Zn,document.createElement("button"));t.className="altText",t.tabIndex="0";const e=g(this,cl,document.createElement("span"));t.append(e),o(this,Ps)?(t.classList.add("new"),t.setAttribute("data-l10n-id",o(De,nr).missing),e.setAttribute("data-l10n-id",o(De,nr)["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=o(this,Ye)._uiManager._signal;t.addEventListener("contextmenu",gs,{signal:n}),t.addEventListener("pointerdown",r=>r.stopPropagation(),{signal:n});const i=r=>{r.preventDefault(),o(this,Ye)._uiManager.editAltText(o(this,Ye)),o(this,Ps)&&o(this,Ye)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:o(this,hs,Oc)}})};return t.addEventListener("click",i,{capture:!0,signal:n}),t.addEventListener("keydown",r=>{r.target===t&&r.key==="Enter"&&(g(this,ul,!0),i(r))},{signal:n}),await x(this,hs,Yd).call(this),t}finish(){o(this,Zn)&&(o(this,Zn).focus({focusVisible:o(this,ul)}),g(this,ul,!1))}isEmpty(){return o(this,Ps)?o(this,ne)===null:!o(this,ne)&&!o(this,Cs)}hasData(){return o(this,Ps)?o(this,ne)!==null||!!o(this,Js):this.isEmpty()}get guessedText(){return o(this,Js)}async setGuessedText(t){o(this,ne)===null&&(g(this,Js,t),g(this,ua,await De._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t})),x(this,hs,Yd).call(this))}toggleAltTextBadge(t=!1){var e;if(!o(this,Ps)||o(this,ne)){(e=o(this,Ts))==null||e.remove(),g(this,Ts,null);return}if(!o(this,Ts)){const n=g(this,Ts,document.createElement("div"));n.className="noAltTextBadge",o(this,Ye).div.append(n)}o(this,Ts).classList.toggle("hidden",!t)}serialize(t){let e=o(this,ne);return!t&&o(this,Js)===e&&(e=o(this,ua)),{altText:e,decorative:o(this,Cs),guessedText:o(this,Js),textWithDisclaimer:o(this,ua)}}get data(){return{altText:o(this,ne),decorative:o(this,Cs)}}set data({altText:t,decorative:e,guessedText:n,textWithDisclaimer:i,cancel:r=!1}){n&&(g(this,Js,n),g(this,ua,i)),!(o(this,ne)===t&&o(this,Cs)===e)&&(r||(g(this,ne,t),g(this,Cs,e)),x(this,hs,Yd).call(this))}toggle(t=!1){o(this,Zn)&&(!t&&o(this,on)&&(clearTimeout(o(this,on)),g(this,on,null)),o(this,Zn).disabled=!t)}shown(){o(this,Ye)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:o(this,hs,Oc)}})}destroy(){var t,e;(t=o(this,Zn))==null||t.remove(),g(this,Zn,null),g(this,cl,null),g(this,ks,null),(e=o(this,Ts))==null||e.remove(),g(this,Ts,null)}};ne=new WeakMap,Cs=new WeakMap,Zn=new WeakMap,cl=new WeakMap,ks=new WeakMap,on=new WeakMap,ul=new WeakMap,Ts=new WeakMap,Ye=new WeakMap,Js=new WeakMap,ua=new WeakMap,Ps=new WeakMap,nr=new WeakMap,hs=new WeakSet,Oc=function(){return o(this,ne)&&"added"||o(this,ne)===null&&this.guessedText&&"review"||"missing"},Yd=async function(){var i,r,a;const t=o(this,Zn);if(!t)return;if(o(this,Ps)){if(t.classList.toggle("done",!!o(this,ne)),t.setAttribute("data-l10n-id",o(De,nr)[o(this,hs,Oc)]),(i=o(this,cl))==null||i.setAttribute("data-l10n-id",o(De,nr)[`${o(this,hs,Oc)}-label`]),!o(this,ne)){(r=o(this,ks))==null||r.remove();return}}else{if(!o(this,ne)&&!o(this,Cs)){t.classList.remove("done"),(a=o(this,ks))==null||a.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=o(this,ks);if(!e){g(this,ks,e=document.createElement("span")),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${o(this,Ye).id}`;const l=100,c=o(this,Ye)._uiManager._signal;c.addEventListener("abort",()=>{clearTimeout(o(this,on)),g(this,on,null)},{once:!0}),t.addEventListener("mouseenter",()=>{g(this,on,setTimeout(()=>{g(this,on,null),o(this,ks).classList.add("show"),o(this,Ye)._reportTelemetry({action:"alt_text_tooltip"})},l))},{signal:c}),t.addEventListener("mouseleave",()=>{var u;o(this,on)&&(clearTimeout(o(this,on)),g(this,on,null)),(u=o(this,ks))==null||u.classList.remove("show")},{signal:c})}o(this,Cs)?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=o(this,ne)),e.parentNode||t.append(e);const n=o(this,Ye).getElementForAltText();n==null||n.setAttribute("aria-describedby",e.id)},A(De,nr,null),I(De,"_l10n",null);let qf=De;var hl,ha,Bu,Hu,$u,Uu,Vu,ti,da,ei,fa,ni,Hr,gx,mx,yx;const H0=class H0{constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:n=null,onPinchStart:i=null,onPinching:r=null,onPinchEnd:a=null,signal:l}){A(this,Hr);A(this,hl);A(this,ha,!1);A(this,Bu,null);A(this,Hu);A(this,$u);A(this,Uu);A(this,Vu);A(this,ti,null);A(this,da);A(this,ei,null);A(this,fa);A(this,ni,null);g(this,hl,t),g(this,Bu,n),g(this,Hu,e),g(this,$u,i),g(this,Uu,r),g(this,Vu,a),g(this,fa,new AbortController),g(this,da,AbortSignal.any([l,o(this,fa).signal])),t.addEventListener("touchstart",x(this,Hr,gx).bind(this),{passive:!1,signal:o(this,da)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Li.pixelRatio}destroy(){var t,e;(t=o(this,fa))==null||t.abort(),g(this,fa,null),(e=o(this,ti))==null||e.abort(),g(this,ti,null)}};hl=new WeakMap,ha=new WeakMap,Bu=new WeakMap,Hu=new WeakMap,$u=new WeakMap,Uu=new WeakMap,Vu=new WeakMap,ti=new WeakMap,da=new WeakMap,ei=new WeakMap,fa=new WeakMap,ni=new WeakMap,Hr=new WeakSet,gx=function(t){var i,r,a;if((i=o(this,Hu))!=null&&i.call(this))return;if(t.touches.length===1){if(o(this,ti))return;const l=g(this,ti,new AbortController),c=AbortSignal.any([o(this,da),l.signal]),u=o(this,hl),h={capture:!0,signal:c,passive:!1},d=f=>{var p;f.pointerType==="touch"&&((p=o(this,ti))==null||p.abort(),g(this,ti,null))};u.addEventListener("pointerdown",f=>{f.pointerType==="touch"&&(Ut(f),d(f))},h),u.addEventListener("pointerup",d,h),u.addEventListener("pointercancel",d,h);return}if(!o(this,ni)){g(this,ni,new AbortController);const l=AbortSignal.any([o(this,da),o(this,ni).signal]),c=o(this,hl),u={signal:l,capture:!1,passive:!1};c.addEventListener("touchmove",x(this,Hr,mx).bind(this),u);const h=x(this,Hr,yx).bind(this);c.addEventListener("touchend",h,u),c.addEventListener("touchcancel",h,u),u.capture=!0,c.addEventListener("pointerdown",Ut,u),c.addEventListener("pointermove",Ut,u),c.addEventListener("pointercancel",Ut,u),c.addEventListener("pointerup",Ut,u),(r=o(this,$u))==null||r.call(this)}if(Ut(t),t.touches.length!==2||(a=o(this,Bu))!=null&&a.call(this)){g(this,ei,null);return}let[e,n]=t.touches;e.identifier>n.identifier&&([e,n]=[n,e]),g(this,ei,{touch0X:e.screenX,touch0Y:e.screenY,touch1X:n.screenX,touch1Y:n.screenY})},mx=function(t){var _;if(!o(this,ei)||t.touches.length!==2)return;Ut(t);let[e,n]=t.touches;e.identifier>n.identifier&&([e,n]=[n,e]);const{screenX:i,screenY:r}=e,{screenX:a,screenY:l}=n,c=o(this,ei),{touch0X:u,touch0Y:h,touch1X:d,touch1Y:f}=c,p=d-u,w=f-h,y=a-i,S=l-r,m=Math.hypot(y,S)||1,v=Math.hypot(p,w)||1;if(!o(this,ha)&&Math.abs(v-m)<=H0.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(c.touch0X=i,c.touch0Y=r,c.touch1X=a,c.touch1Y=l,!o(this,ha)){g(this,ha,!0);return}const b=[(i+a)/2,(r+l)/2];(_=o(this,Uu))==null||_.call(this,b,v,m)},yx=function(t){var e;t.touches.length>=2||(o(this,ni)&&(o(this,ni).abort(),g(this,ni,null),(e=o(this,Vu))==null||e.call(this)),o(this,ei)&&(Ut(t),g(this,ei,null),g(this,ha,!1)))};let Yf=H0;var pa,Jn,_t,dl,sr,Wu,ga,he,ma,si,ir,Gu,ya,ln,Xu,va,ii,Rs,fl,pl,Ln,wa,qu,ap,G,Pm,Yu,Rm,Kd,vx,wx,Nm,Qd,Mm,Ax,xx,bx,Im,Sx,Lm,_x,Ex,Cx,Dm,jc;const Z=class Z{constructor(t){A(this,G);A(this,pa,null);A(this,Jn,null);A(this,_t,null);A(this,dl,!1);A(this,sr,null);A(this,Wu,"");A(this,ga,!1);A(this,he,null);A(this,ma,null);A(this,si,null);A(this,ir,null);A(this,Gu,"");A(this,ya,!1);A(this,ln,null);A(this,Xu,!1);A(this,va,!1);A(this,ii,!1);A(this,Rs,null);A(this,fl,0);A(this,pl,0);A(this,Ln,null);A(this,wa,null);I(this,"_isCopy",!1);I(this,"_editToolbar",null);I(this,"_initialOptions",Object.create(null));I(this,"_initialData",null);I(this,"_isVisible",!0);I(this,"_uiManager",null);I(this,"_focusEventsAllowed",!0);A(this,qu,!1);A(this,ap,Z._zIndex++);this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null;const{rotation:e,rawDims:{pageWidth:n,pageHeight:i,pageX:r,pageY:a}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,i],this.pageTranslation=[r,a];const[l,c]=this.parentDimensions;this.x=t.x/l,this.y=t.y/c,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const t=Z.prototype._resizeWithKeyboard,e=go.TRANSLATE_SMALL,n=go.TRANSLATE_BIG;return et(this,"_resizerKeyboardManager",new sd([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,n]}],[["Escape","mac+Escape"],Z.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get isDrawer(){return!1}static get _defaultLineColor(){return et(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new mC({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(Z._l10n??(Z._l10n=t),Z._l10nResizer||(Z._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),Z._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);Z._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){mt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return o(this,qu)}set _isDraggable(t){var e;g(this,qu,t),(e=this.div)==null||e.classList.toggle("draggable",t)}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=o(this,ap)}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):x(this,G,jc).call(this),this.parent=t}focusin(t){this._focusEventsAllowed&&(o(this,ya)?g(this,ya,!1):this.parent.setSelected(this))}focusout(t){var n;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const e=t.relatedTarget;e!=null&&e.closest(`#${this.id}`)||(t.preventDefault(),(n=this.parent)!=null&&n.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,n,i){const[r,a]=this.parentDimensions;[n,i]=this.screenToPageTranslation(n,i),this.x=(t+n)/r,this.y=(e+i)/a,this.fixAndSetPosition()}_moveAfterPaste(t,e){const[n,i]=this.parentDimensions;this.setAt(t*n,e*i,this.width*n,this.height*i),this._onTranslated()}translate(t,e){x(this,G,Pm).call(this,this.parentDimensions,t,e)}translateInPage(t,e){o(this,ln)||g(this,ln,[this.x,this.y,this.width,this.height]),x(this,G,Pm).call(this,this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,e){o(this,ln)||g(this,ln,[this.x,this.y,this.width,this.height]);const{div:n,parentDimensions:[i,r]}=this;if(this.x+=t/i,this.y+=e/r,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:d,y:f}=this.div.getBoundingClientRect();this.parent.findNewParent(this,d,f)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:a,y:l}=this;const[c,u]=this.getBaseTranslation();a+=c,l+=u;const{style:h}=n;h.left=`${(100*a).toFixed(2)}%`,h.top=`${(100*l).toFixed(2)}%`,this._onTranslating(a,l),n.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!o(this,ln)&&(o(this,ln)[0]!==this.x||o(this,ln)[1]!==this.y)}get _hasBeenResized(){return!!o(this,ln)&&(o(this,ln)[2]!==this.width||o(this,ln)[3]!==this.height)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:n}=Z,i=n/t,r=n/e;switch(this.rotation){case 90:return[-i,r];case 180:return[i,r];case 270:return[i,-r];default:return[-i,-r]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:e},pageDimensions:[n,i]}=this;let{x:r,y:a,width:l,height:c}=this;if(l*=n,c*=i,r*=n,a*=i,this._mustFixPosition)switch(t){case 0:r=Be(r,0,n-l),a=Be(a,0,i-c);break;case 90:r=Be(r,0,n-c),a=Be(a,l,i);break;case 180:r=Be(r,l,n),a=Be(a,c,i);break;case 270:r=Be(r,c,n),a=Be(a,0,i-l);break}this.x=r/=n,this.y=a/=i;const[u,h]=this.getBaseTranslation();r+=u,a+=h,e.left=`${(100*r).toFixed(2)}%`,e.top=`${(100*a).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(t,e){var n;return x(n=Z,Yu,Rm).call(n,t,e,this.parentRotation)}pageTranslationToScreen(t,e){var n;return x(n=Z,Yu,Rm).call(n,t,e,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,n]}=this;return[e*t,n*t]}setDims(t,e){const[n,i]=this.parentDimensions,{style:r}=this.div;r.width=`${(100*t/n).toFixed(2)}%`,o(this,ga)||(r.height=`${(100*e/i).toFixed(2)}%`)}fixDims(){const{style:t}=this.div,{height:e,width:n}=t,i=n.endsWith("%"),r=!o(this,ga)&&e.endsWith("%");if(i&&r)return;const[a,l]=this.parentDimensions;i||(t.width=`${(100*parseFloat(n)/a).toFixed(2)}%`),!o(this,ga)&&!r&&(t.height=`${(100*parseFloat(e)/l).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}_onResized(){}static _round(t){return Math.round(t*1e4)/1e4}_onResizing(){}altTextFinish(){var t;(t=o(this,_t))==null||t.finish()}async addEditToolbar(){return this._editToolbar||o(this,va)?this._editToolbar:(this._editToolbar=new Am(this),this.div.append(this._editToolbar.render()),o(this,_t)&&await this._editToolbar.addAltText(o(this,_t)),this._editToolbar)}removeEditToolbar(){var t;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(t=o(this,_t))==null||t.destroy())}addContainer(t){var n;const e=(n=this._editToolbar)==null?void 0:n.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){o(this,_t)||(qf.initialize(Z._l10n),g(this,_t,new qf(this)),o(this,pa)&&(o(this,_t).data=o(this,pa),g(this,pa,null)),await this.addEditToolbar())}get altTextData(){var t;return(t=o(this,_t))==null?void 0:t.data}set altTextData(t){o(this,_t)&&(o(this,_t).data=t)}get guessedAltText(){var t;return(t=o(this,_t))==null?void 0:t.guessedText}async setGuessedAltText(t){var e;await((e=o(this,_t))==null?void 0:e.setGuessedText(t))}serializeAltText(t){var e;return(e=o(this,_t))==null?void 0:e.serialize(t)}hasAltText(){return!!o(this,_t)&&!o(this,_t).isEmpty()}hasAltTextData(){var t;return((t=o(this,_t))==null?void 0:t.hasData())??!1}render(){var a;const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=o(this,dl)?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),x(this,G,Lm).call(this);const[e,n]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*n/e).toFixed(2)}%`,t.style.maxHeight=`${(100*e/n).toFixed(2)}%`);const[i,r]=this.getInitialTranslation();return this.translate(i,r),I0(this,t,["keydown","pointerdown"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(o(this,wa)||g(this,wa,new Yf({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:x(this,G,Ax).bind(this),onPinching:x(this,G,xx).bind(this),onPinchEnd:x(this,G,bx).bind(this),signal:this._uiManager._signal}))),(a=this._uiManager._editorUndoBar)==null||a.hide(),t}pointerdown(t){const{isMac:e}=Ae.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(g(this,ya,!0),this._isDraggable){x(this,G,Sx).call(this,t);return}x(this,G,Im).call(this,t)}get isSelected(){return this._uiManager.isSelected(this)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){o(this,Rs)&&clearTimeout(o(this,Rs)),g(this,Rs,setTimeout(()=>{var t;g(this,Rs,null),(t=this.parent)==null||t.moveEditorInDOM(this)},0))}_setParentAndPosition(t,e,n){t.changeParent(this),this.x=e,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,n=this.rotation){const i=this.parentScale,[r,a]=this.pageDimensions,[l,c]=this.pageTranslation,u=t/i,h=e/i,d=this.x*r,f=this.y*a,p=this.width*r,w=this.height*a;switch(n){case 0:return[d+u+l,a-f-h-w+c,d+u+p+l,a-f-h+c];case 90:return[d+h+l,a-f+u+c,d+h+w+l,a-f+u+p+c];case 180:return[d-u-p+l,a-f+h+c,d-u+l,a-f+h+w+c];case 270:return[d-h-w+l,a-f-u-p+c,d-h+l,a-f-u+c];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[n,i,r,a]=t,l=r-n,c=a-i;switch(this.rotation){case 0:return[n,e-a,l,c];case 90:return[n,e-i,c,l];case 180:return[r,e-i,l,c];case 270:return[r,e-a,c,l];default:throw new Error("Invalid rotation")}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){g(this,va,!0)}disableEditMode(){g(this,va,!1)}isInEditMode(){return o(this,va)}shouldGetKeyboardEvents(){return o(this,ii)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:e,bottom:n,right:i}=this.getClientDimensions(),{innerHeight:r,innerWidth:a}=window;return e<a&&i>0&&t<r&&n>0}rebuild(){x(this,G,Lm).call(this)}rotate(t){}resize(){}serializeDeleted(){var t;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((t=this._initialData)==null?void 0:t.popupRef)||""}}serialize(t=!1,e=null){mt("An editor must be serializable")}static async deserialize(t,e,n){const i=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:n});i.rotation=t.rotation,g(i,pa,t.accessibilityData),i._isCopy=t.isCopy||!1;const[r,a]=i.pageDimensions,[l,c,u,h]=i.getRectInCurrentCoords(t.rect,a);return i.x=l/r,i.y=c/a,i.width=u/r,i.height=h/a,i}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var t,e;if((t=o(this,ir))==null||t.abort(),g(this,ir,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),o(this,Rs)&&(clearTimeout(o(this,Rs)),g(this,Rs,null)),x(this,G,jc).call(this),this.removeEditToolbar(),o(this,Ln)){for(const n of o(this,Ln).values())clearTimeout(n);g(this,Ln,null)}this.parent=null,(e=o(this,wa))==null||e.destroy(),g(this,wa,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(x(this,G,vx).call(this),o(this,he).classList.remove("hidden"))}get toolbarPosition(){return null}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),g(this,si,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const e=o(this,he).children;if(!o(this,Jn)){g(this,Jn,Array.from(e));const a=x(this,G,_x).bind(this),l=x(this,G,Ex).bind(this),c=this._uiManager._signal;for(const u of o(this,Jn)){const h=u.getAttribute("data-resizer-name");u.setAttribute("role","spinbutton"),u.addEventListener("keydown",a,{signal:c}),u.addEventListener("blur",l,{signal:c}),u.addEventListener("focus",x(this,G,Cx).bind(this,h),{signal:c}),u.setAttribute("data-l10n-id",Z._l10nResizer[h])}}const n=o(this,Jn)[0];let i=0;for(const a of e){if(a===n)break;i++}const r=(360-this.rotation+this.parentRotation)%360/90*(o(this,Jn).length/4);if(r!==i){if(r<i)for(let l=0;l<i-r;l++)o(this,he).append(o(this,he).firstChild);else if(r>i)for(let l=0;l<r-i;l++)o(this,he).firstChild.before(o(this,he).lastChild);let a=0;for(const l of e){const u=o(this,Jn)[a++].getAttribute("data-resizer-name");l.setAttribute("data-l10n-id",Z._l10nResizer[u])}}x(this,G,Dm).call(this,0),g(this,ii,!0),o(this,he).firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}_resizeWithKeyboard(t,e){o(this,ii)&&x(this,G,Mm).call(this,o(this,Gu),{deltaX:t,deltaY:e,fromKeyboard:!0})}_stopResizingWithKeyboard(){x(this,G,jc).call(this),this.div.focus()}select(){var t,e,n;if(this.makeResizable(),(t=this.div)==null||t.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var i,r;(i=this.div)!=null&&i.classList.contains("selectedEditor")&&((r=this._editToolbar)==null||r.show())});return}(e=this._editToolbar)==null||e.show(),(n=o(this,_t))==null||n.toggleAltTextBadge(!1)}unselect(){var t,e,n,i,r;(t=o(this,he))==null||t.classList.add("hidden"),(e=this.div)==null||e.classList.remove("selectedEditor"),(n=this.div)!=null&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(i=this._editToolbar)==null||i.hide(),(r=o(this,_t))==null||r.toggleAltTextBadge(!0)}updateParams(t,e){}disableEditing(){}enableEditing(){}enterInEditMode(){}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return o(this,Xu)}set isEditing(t){g(this,Xu,t),this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(t,e){g(this,ga,!0);const n=t/e,{style:i}=this.div;i.aspectRatio=n,i.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){o(this,Ln)||g(this,Ln,new Map);const{action:n}=t;let i=o(this,Ln).get(n);i&&clearTimeout(i),i=setTimeout(()=>{this._reportTelemetry(t),o(this,Ln).delete(n),o(this,Ln).size===0&&g(this,Ln,null)},Z._telemetryTimeout),o(this,Ln).set(n,i);return}t.type||(t.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),g(this,dl,!1)}disable(){this.div&&(this.div.tabIndex=-1),g(this,dl,!0)}renderAnnotationElement(t){let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const n=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),n.before(e)}return e}resetAnnotationElement(t){const{firstChild:e}=t.container;(e==null?void 0:e.nodeName)==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}};pa=new WeakMap,Jn=new WeakMap,_t=new WeakMap,dl=new WeakMap,sr=new WeakMap,Wu=new WeakMap,ga=new WeakMap,he=new WeakMap,ma=new WeakMap,si=new WeakMap,ir=new WeakMap,Gu=new WeakMap,ya=new WeakMap,ln=new WeakMap,Xu=new WeakMap,va=new WeakMap,ii=new WeakMap,Rs=new WeakMap,fl=new WeakMap,pl=new WeakMap,Ln=new WeakMap,wa=new WeakMap,qu=new WeakMap,ap=new WeakMap,G=new WeakSet,Pm=function([t,e],n,i){[n,i]=this.screenToPageTranslation(n,i),this.x+=n/t,this.y+=i/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},Yu=new WeakSet,Rm=function(t,e,n){switch(n){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}},Kd=function(t){switch(t){case 90:{const[e,n]=this.pageDimensions;return[0,-e/n,n/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,n]=this.pageDimensions;return[0,e/n,-n/e,0]}default:return[1,0,0,1]}},vx=function(){if(o(this,he))return;g(this,he,document.createElement("div")),o(this,he).classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const n of t){const i=document.createElement("div");o(this,he).append(i),i.classList.add("resizer",n),i.setAttribute("data-resizer-name",n),i.addEventListener("pointerdown",x(this,G,wx).bind(this,n),{signal:e}),i.addEventListener("contextmenu",gs,{signal:e}),i.tabIndex=-1}this.div.prepend(o(this,he))},wx=function(t,e){var h;e.preventDefault();const{isMac:n}=Ae.platform;if(e.button!==0||e.ctrlKey&&n)return;(h=o(this,_t))==null||h.toggle(!1);const i=this._isDraggable;this._isDraggable=!1,g(this,ma,[e.screenX,e.screenY]);const r=new AbortController,a=this._uiManager.combinedSignal(r);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",x(this,G,Mm).bind(this,t),{passive:!0,capture:!0,signal:a}),window.addEventListener("touchmove",Ut,{passive:!1,signal:a}),window.addEventListener("contextmenu",gs,{signal:a}),g(this,si,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const l=this.parent.div.style.cursor,c=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const u=()=>{var d;r.abort(),this.parent.togglePointerEvents(!0),(d=o(this,_t))==null||d.toggle(!0),this._isDraggable=i,this.parent.div.style.cursor=l,this.div.style.cursor=c,x(this,G,Qd).call(this)};window.addEventListener("pointerup",u,{signal:a}),window.addEventListener("blur",u,{signal:a})},Nm=function(t,e,n,i){this.width=n,this.height=i,this.x=t,this.y=e;const[r,a]=this.parentDimensions;this.setDims(r*n,a*i),this.fixAndSetPosition(),this._onResized()},Qd=function(){if(!o(this,si))return;const{savedX:t,savedY:e,savedWidth:n,savedHeight:i}=o(this,si);g(this,si,null);const r=this.x,a=this.y,l=this.width,c=this.height;r===t&&a===e&&l===n&&c===i||this.addCommands({cmd:x(this,G,Nm).bind(this,r,a,l,c),undo:x(this,G,Nm).bind(this,t,e,n,i),mustExec:!0})},Mm=function(t,e){const[n,i]=this.parentDimensions,r=this.x,a=this.y,l=this.width,c=this.height,u=Z.MIN_SIZE/n,h=Z.MIN_SIZE/i,d=x(this,G,Kd).call(this,this.rotation),f=(B,$)=>[d[0]*B+d[2]*$,d[1]*B+d[3]*$],p=x(this,G,Kd).call(this,360-this.rotation),w=(B,$)=>[p[0]*B+p[2]*$,p[1]*B+p[3]*$];let y,S,m=!1,v=!1;switch(t){case"topLeft":m=!0,y=(B,$)=>[0,0],S=(B,$)=>[B,$];break;case"topMiddle":y=(B,$)=>[B/2,0],S=(B,$)=>[B/2,$];break;case"topRight":m=!0,y=(B,$)=>[B,0],S=(B,$)=>[0,$];break;case"middleRight":v=!0,y=(B,$)=>[B,$/2],S=(B,$)=>[0,$/2];break;case"bottomRight":m=!0,y=(B,$)=>[B,$],S=(B,$)=>[0,0];break;case"bottomMiddle":y=(B,$)=>[B/2,$],S=(B,$)=>[B/2,0];break;case"bottomLeft":m=!0,y=(B,$)=>[0,$],S=(B,$)=>[B,0];break;case"middleLeft":v=!0,y=(B,$)=>[0,$/2],S=(B,$)=>[B,$/2];break}const b=y(l,c),_=S(l,c);let E=f(..._);const k=Z._round(r+E[0]),T=Z._round(a+E[1]);let P=1,R=1,N,L;if(e.fromKeyboard)({deltaX:N,deltaY:L}=e);else{const{screenX:B,screenY:$}=e,[D,W]=o(this,ma);[N,L]=this.screenToPageTranslation(B-D,$-W),o(this,ma)[0]=B,o(this,ma)[1]=$}if([N,L]=w(N/n,L/i),m){const B=Math.hypot(l,c);P=R=Math.max(Math.min(Math.hypot(_[0]-b[0]-N,_[1]-b[1]-L)/B,1/l,1/c),u/l,h/c)}else v?P=Be(Math.abs(_[0]-b[0]-N),u,1)/l:R=Be(Math.abs(_[1]-b[1]-L),h,1)/c;const st=Z._round(l*P),rt=Z._round(c*R);E=f(...S(st,rt));const Q=k-E[0],ce=T-E[1];o(this,ln)||g(this,ln,[this.x,this.y,this.width,this.height]),this.width=st,this.height=rt,this.x=Q,this.y=ce,this.setDims(n*st,i*rt),this.fixAndSetPosition(),this._onResizing()},Ax=function(){var t;g(this,si,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(t=o(this,_t))==null||t.toggle(!1),this.parent.togglePointerEvents(!1)},xx=function(t,e,n){let r=.7*(n/e)+1-.7;if(r===1)return;const a=x(this,G,Kd).call(this,this.rotation),l=(k,T)=>[a[0]*k+a[2]*T,a[1]*k+a[3]*T],[c,u]=this.parentDimensions,h=this.x,d=this.y,f=this.width,p=this.height,w=Z.MIN_SIZE/c,y=Z.MIN_SIZE/u;r=Math.max(Math.min(r,1/f,1/p),w/f,y/p);const S=Z._round(f*r),m=Z._round(p*r);if(S===f&&m===p)return;o(this,ln)||g(this,ln,[h,d,f,p]);const v=l(f/2,p/2),b=Z._round(h+v[0]),_=Z._round(d+v[1]),E=l(S/2,m/2);this.x=b-E[0],this.y=_-E[1],this.width=S,this.height=m,this.setDims(c*S,u*m),this.fixAndSetPosition(),this._onResizing()},bx=function(){var t;(t=o(this,_t))==null||t.toggle(!0),this.parent.togglePointerEvents(!0),x(this,G,Qd).call(this)},Im=function(t){const{isMac:e}=Ae.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)},Sx=function(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();let n=!1;const i=new AbortController,r=this._uiManager.combinedSignal(i),a={capture:!0,passive:!1,signal:r},l=u=>{i.abort(),g(this,sr,null),g(this,ya,!1),this._uiManager.endDragSession()||x(this,G,Im).call(this,u),n&&this._onStopDragging()};e&&(g(this,fl,t.clientX),g(this,pl,t.clientY),g(this,sr,t.pointerId),g(this,Wu,t.pointerType),window.addEventListener("pointermove",u=>{n||(n=!0,this._onStartDragging());const{clientX:h,clientY:d,pointerId:f}=u;if(f!==o(this,sr)){Ut(u);return}const[p,w]=this.screenToPageTranslation(h-o(this,fl),d-o(this,pl));g(this,fl,h),g(this,pl,d),this._uiManager.dragSelectedEditors(p,w)},a),window.addEventListener("touchmove",Ut,a),window.addEventListener("pointerdown",u=>{u.pointerType===o(this,Wu)&&(o(this,wa)||u.isPrimary)&&l(u),Ut(u)},a));const c=u=>{if(!o(this,sr)||o(this,sr)===u.pointerId){l(u);return}Ut(u)};window.addEventListener("pointerup",c,{signal:r}),window.addEventListener("blur",c,{signal:r})},Lm=function(){if(o(this,ir)||!this.div)return;g(this,ir,new AbortController);const t=this._uiManager.combinedSignal(o(this,ir));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})},_x=function(t){Z._resizerKeyboardManager.exec(this,t)},Ex=function(t){var e;o(this,ii)&&((e=t.relatedTarget)==null?void 0:e.parentNode)!==o(this,he)&&x(this,G,jc).call(this)},Cx=function(t){g(this,Gu,o(this,ii)?t:"")},Dm=function(t){if(o(this,Jn))for(const e of o(this,Jn))e.tabIndex=t},jc=function(){g(this,ii,!1),x(this,G,Dm).call(this,-1),x(this,G,Qd).call(this)},A(Z,Yu),I(Z,"_l10n",null),I(Z,"_l10nResizer",null),I(Z,"_borderLineWidth",-1),I(Z,"_colorManager",new bm),I(Z,"_zIndex",1),I(Z,"_telemetryTimeout",1e3);let bt=Z;class mC extends bt{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const dw=3285377520,Rn=4294901760,ws=65535;class kx{constructor(t){this.h1=t?t&4294967295:dw,this.h2=t?t&4294967295:dw}update(t){let e,n;if(typeof t=="string"){e=new Uint8Array(t.length*2),n=0;for(let y=0,S=t.length;y<S;y++){const m=t.charCodeAt(y);m<=255?e[n++]=m:(e[n++]=m>>>8,e[n++]=m&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),n=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const i=n>>2,r=n-i*4,a=new Uint32Array(e.buffer,0,i);let l=0,c=0,u=this.h1,h=this.h2;const d=3432918353,f=461845907,p=d&ws,w=f&ws;for(let y=0;y<i;y++)y&1?(l=a[y],l=l*d&Rn|l*p&ws,l=l<<15|l>>>17,l=l*f&Rn|l*w&ws,u^=l,u=u<<13|u>>>19,u=u*5+3864292196):(c=a[y],c=c*d&Rn|c*p&ws,c=c<<15|c>>>17,c=c*f&Rn|c*w&ws,h^=c,h=h<<13|h>>>19,h=h*5+3864292196);switch(l=0,r){case 3:l^=e[i*4+2]<<16;case 2:l^=e[i*4+1]<<8;case 1:l^=e[i*4],l=l*d&Rn|l*p&ws,l=l<<15|l>>>17,l=l*f&Rn|l*w&ws,i&1?u^=l:h^=l}this.h1=u,this.h2=h}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&Rn|t*36045&ws,e=e*4283543511&Rn|((e<<16|t>>>16)*2950163797&Rn)>>>16,t^=e>>>1,t=t*444984403&Rn|t*60499&ws,e=e*3301882366&Rn|((e<<16|t>>>16)*3120437893&Rn)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const Fm=Object.freeze({map:null,hash:"",transfer:void 0});var Aa,xa,de,op,Tx;class L0{constructor(){A(this,op);A(this,Aa,!1);A(this,xa,null);A(this,de,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const n=o(this,de).get(t);return n===void 0?e:Object.assign(e,n)}getRawValue(t){return o(this,de).get(t)}remove(t){if(o(this,de).delete(t),o(this,de).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const e of o(this,de).values())if(e instanceof bt)return;this.onAnnotationEditor(null)}}setValue(t,e){const n=o(this,de).get(t);let i=!1;if(n!==void 0)for(const[r,a]of Object.entries(e))n[r]!==a&&(i=!0,n[r]=a);else i=!0,o(this,de).set(t,e);i&&x(this,op,Tx).call(this),e instanceof bt&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type)}has(t){return o(this,de).has(t)}get size(){return o(this,de).size}resetModified(){o(this,Aa)&&(g(this,Aa,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new Px(this)}get serializable(){if(o(this,de).size===0)return Fm;const t=new Map,e=new kx,n=[],i=Object.create(null);let r=!1;for(const[a,l]of o(this,de)){const c=l instanceof bt?l.serialize(!1,i):l;c&&(t.set(a,c),e.update(`${a}:${JSON.stringify(c)}`),r||(r=!!c.bitmap))}if(r)for(const a of t.values())a.bitmap&&n.push(a.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:n}:Fm}get editorStats(){let t=null;const e=new Map;for(const n of o(this,de).values()){if(!(n instanceof bt))continue;const i=n.telemetryFinalData;if(!i)continue;const{type:r}=i;e.has(r)||e.set(r,Object.getPrototypeOf(n).constructor),t||(t=Object.create(null));const a=t[r]||(t[r]=new Map);for(const[l,c]of Object.entries(i)){if(l==="type")continue;let u=a.get(l);u||(u=new Map,a.set(l,u));const h=u.get(c)??0;u.set(c,h+1)}}for(const[n,i]of e)t[n]=i.computeTelemetryFinalData(t[n]);return t}resetModifiedIds(){g(this,xa,null)}get modifiedIds(){if(o(this,xa))return o(this,xa);const t=[];for(const e of o(this,de).values())!(e instanceof bt)||!e.annotationElementId||!e.serialize()||t.push(e.annotationElementId);return g(this,xa,{ids:new Set(t),hash:t.join(",")})}[Symbol.iterator](){return o(this,de).entries()}}Aa=new WeakMap,xa=new WeakMap,de=new WeakMap,op=new WeakSet,Tx=function(){o(this,Aa)||(g(this,Aa,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var Ku;class Px extends L0{constructor(e){super();A(this,Ku);const{map:n,hash:i,transfer:r}=e.serializable,a=structuredClone(n,r?{transfer:r}:null);g(this,Ku,{map:a,hash:i,transfer:r})}get print(){mt("Should not call PrintAnnotationStorage.print")}get serializable(){return o(this,Ku)}get modifiedIds(){return et(this,"modifiedIds",{ids:new Set,hash:""})}}Ku=new WeakMap;var gl;class yC{constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){A(this,gl,new Set);this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),o(this,gl).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,disableFontFace:e,_inspectFont:n}){if(!(!t||o(this,gl).has(t.loadedName))){if(Wt(!e,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:i,src:r,style:a}=t,l=new FontFace(i,r,a);this.addNativeFontFace(l);try{await l.load(),o(this,gl).add(i),n==null||n(t)}catch{Y(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(l)}return}mt("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const n=t.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(i){throw Y(`Failed to load font '${n.family}': '${i}'.`),t.disableFontFace=!0,i}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const i=this._queueLoadingCallback(n);this._prepareFontLoadEvent(t,i)})}}get isFontLoadingAPISupported(){var e;const t=!!((e=this._document)!=null&&e.fonts);return et(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return et(this,"isSyncFontLoadingSupported",ze||Ae.platform.isFirefox)}_queueLoadingCallback(t){function e(){for(Wt(!i.done,"completeRequest() cannot be called twice."),i.done=!0;n.length>0&&n[0].done;){const r=n.shift();setTimeout(r.callback,0)}}const{loadingRequests:n}=this,i={done:!1,complete:e,callback:t};return n.push(i),i}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return et(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function n(_,E){return _.charCodeAt(E)<<24|_.charCodeAt(E+1)<<16|_.charCodeAt(E+2)<<8|_.charCodeAt(E+3)&255}function i(_,E,k,T){const P=_.substring(0,E),R=_.substring(E+k);return P+T+R}let r,a;const l=this._document.createElement("canvas");l.width=1,l.height=1;const c=l.getContext("2d");let u=0;function h(_,E){if(++u>30){Y("Load test font never loaded."),E();return}if(c.font="30px "+_,c.fillText(".",0,20),c.getImageData(0,0,1,1).data[3]>0){E();return}setTimeout(h.bind(null,_,E))}const d=`lt${Date.now()}${this.loadTestFontId++}`;let f=this._loadTestFont;f=i(f,976,d.length,d);const w=16,y=1482184792;let S=n(f,w);for(r=0,a=d.length-3;r<a;r+=4)S=S-y+n(d,r)|0;r<d.length&&(S=S-y+n(d+"XXX",r)|0),f=i(f,w,4,nC(S));const m=`url(data:font/opentype;base64,${btoa(f)});`,v=`@font-face {font-family:"${d}";src:${m}}`;this.insertRule(v);const b=this._document.createElement("div");b.style.visibility="hidden",b.style.width=b.style.height="10px",b.style.position="absolute",b.style.top=b.style.left="0px";for(const _ of[t.loadedName,d]){const E=this._document.createElement("span");E.textContent="Hi",E.style.fontFamily=_,b.append(E)}this._document.body.append(b),h(d,()=>{b.remove(),e.complete()})}}gl=new WeakMap;class vC{constructor(t,e=null){this.compiledGlyphs=Object.create(null);for(const n in t)this[n]=t[n];this._inspectFont=e}createNativeFontFace(){var e;if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const n={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(n.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,n)}return(e=this._inspectFont)==null||e.call(this,this),t}createFontFaceRule(){var n;if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${K1(this.data)});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let i=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(i+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${i}src:${t}}`}return(n=this._inspectFont)==null||n.call(this,this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];const n=this.loadedName+"_path_"+e;let i;try{i=t.get(n)}catch(a){Y(`getPathGenerator - ignoring character: "${a}".`)}const r=new Path2D(i||"");return this.fontExtraProperties||t.delete(n),this.compiledGlyphs[e]=r}}const Ed={DATA:1,ERROR:2},Ht={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function fw(){}function Xe(s){if(s instanceof jr||s instanceof ym||s instanceof cw||s instanceof Xf||s instanceof yg)return s;switch(s instanceof Error||typeof s=="object"&&s!==null||mt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),s.name){case"AbortException":return new jr(s.message);case"InvalidPDFException":return new ym(s.message);case"PasswordException":return new cw(s.message,s.code);case"ResponseException":return new Xf(s.message,s.status,s.missing);case"UnknownErrorException":return new yg(s.message,s.details)}return new yg(s.message,s.toString())}var ml,Wn,Rx,Nx,Mx,Zd;class zc{constructor(t,e,n){A(this,Wn);A(this,ml,new AbortController);this.sourceName=t,this.targetName=e,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",x(this,Wn,Rx).bind(this),{signal:o(this,ml).signal})}on(t,e){const n=this.actionHandler;if(n[t])throw new Error(`There is already an actionName called "${t}"`);n[t]=e}send(t,e,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},n)}sendWithPromise(t,e,n){const i=this.callbackId++,r=Promise.withResolvers();this.callbackCapabilities[i]=r;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:i,data:e},n)}catch(a){r.reject(a)}return r.promise}sendWithStream(t,e,n,i){const r=this.streamId++,a=this.sourceName,l=this.targetName,c=this.comObj;return new ReadableStream({start:u=>{const h=Promise.withResolvers();return this.streamControllers[r]={controller:u,startCall:h,pullCall:null,cancelCall:null,isClosed:!1},c.postMessage({sourceName:a,targetName:l,action:t,streamId:r,data:e,desiredSize:u.desiredSize},i),h.promise},pull:u=>{const h=Promise.withResolvers();return this.streamControllers[r].pullCall=h,c.postMessage({sourceName:a,targetName:l,stream:Ht.PULL,streamId:r,desiredSize:u.desiredSize}),h.promise},cancel:u=>{Wt(u instanceof Error,"cancel must have a valid reason");const h=Promise.withResolvers();return this.streamControllers[r].cancelCall=h,this.streamControllers[r].isClosed=!0,c.postMessage({sourceName:a,targetName:l,stream:Ht.CANCEL,streamId:r,reason:Xe(u)}),h.promise}},n)}destroy(){var t;(t=o(this,ml))==null||t.abort(),g(this,ml,null)}}ml=new WeakMap,Wn=new WeakSet,Rx=function({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){x(this,Wn,Mx).call(this,t);return}if(t.callback){const n=t.callbackId,i=this.callbackCapabilities[n];if(!i)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],t.callback===Ed.DATA)i.resolve(t.data);else if(t.callback===Ed.ERROR)i.reject(Xe(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const n=this.sourceName,i=t.sourceName,r=this.comObj;Promise.try(e,t.data).then(function(a){r.postMessage({sourceName:n,targetName:i,callback:Ed.DATA,callbackId:t.callbackId,data:a})},function(a){r.postMessage({sourceName:n,targetName:i,callback:Ed.ERROR,callbackId:t.callbackId,reason:Xe(a)})});return}if(t.streamId){x(this,Wn,Nx).call(this,t);return}e(t.data)},Nx=function(t){const e=t.streamId,n=this.sourceName,i=t.sourceName,r=this.comObj,a=this,l=this.actionHandler[t.action],c={enqueue(u,h=1,d){if(this.isCancelled)return;const f=this.desiredSize;this.desiredSize-=h,f>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),r.postMessage({sourceName:n,targetName:i,stream:Ht.ENQUEUE,streamId:e,chunk:u},d)},close(){this.isCancelled||(this.isCancelled=!0,r.postMessage({sourceName:n,targetName:i,stream:Ht.CLOSE,streamId:e}),delete a.streamSinks[e])},error(u){Wt(u instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,r.postMessage({sourceName:n,targetName:i,stream:Ht.ERROR,streamId:e,reason:Xe(u)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};c.sinkCapability.resolve(),c.ready=c.sinkCapability.promise,this.streamSinks[e]=c,Promise.try(l,t.data,c).then(function(){r.postMessage({sourceName:n,targetName:i,stream:Ht.START_COMPLETE,streamId:e,success:!0})},function(u){r.postMessage({sourceName:n,targetName:i,stream:Ht.START_COMPLETE,streamId:e,reason:Xe(u)})})},Mx=function(t){const e=t.streamId,n=this.sourceName,i=t.sourceName,r=this.comObj,a=this.streamControllers[e],l=this.streamSinks[e];switch(t.stream){case Ht.START_COMPLETE:t.success?a.startCall.resolve():a.startCall.reject(Xe(t.reason));break;case Ht.PULL_COMPLETE:t.success?a.pullCall.resolve():a.pullCall.reject(Xe(t.reason));break;case Ht.PULL:if(!l){r.postMessage({sourceName:n,targetName:i,stream:Ht.PULL_COMPLETE,streamId:e,success:!0});break}l.desiredSize<=0&&t.desiredSize>0&&l.sinkCapability.resolve(),l.desiredSize=t.desiredSize,Promise.try(l.onPull||fw).then(function(){r.postMessage({sourceName:n,targetName:i,stream:Ht.PULL_COMPLETE,streamId:e,success:!0})},function(u){r.postMessage({sourceName:n,targetName:i,stream:Ht.PULL_COMPLETE,streamId:e,reason:Xe(u)})});break;case Ht.ENQUEUE:if(Wt(a,"enqueue should have stream controller"),a.isClosed)break;a.controller.enqueue(t.chunk);break;case Ht.CLOSE:if(Wt(a,"close should have stream controller"),a.isClosed)break;a.isClosed=!0,a.controller.close(),x(this,Wn,Zd).call(this,a,e);break;case Ht.ERROR:Wt(a,"error should have stream controller"),a.controller.error(Xe(t.reason)),x(this,Wn,Zd).call(this,a,e);break;case Ht.CANCEL_COMPLETE:t.success?a.cancelCall.resolve():a.cancelCall.reject(Xe(t.reason)),x(this,Wn,Zd).call(this,a,e);break;case Ht.CANCEL:if(!l)break;const c=Xe(t.reason);Promise.try(l.onCancel||fw,c).then(function(){r.postMessage({sourceName:n,targetName:i,stream:Ht.CANCEL_COMPLETE,streamId:e,success:!0})},function(u){r.postMessage({sourceName:n,targetName:i,stream:Ht.CANCEL_COMPLETE,streamId:e,reason:Xe(u)})}),l.sinkCapability.reject(c),l.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}},Zd=async function(t,e){var n,i,r;await Promise.allSettled([(n=t.startCall)==null?void 0:n.promise,(i=t.pullCall)==null?void 0:i.promise,(r=t.cancelCall)==null?void 0:r.promise]),delete this.streamControllers[e]};var Qu;class Ix{constructor({enableHWA:t=!1}){A(this,Qu,!1);g(this,Qu,t)}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(t,e);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!o(this,Qu)})}}reset(t,e,n){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||n<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=n}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){mt("Abstract method `_createCanvas` called.")}}Qu=new WeakMap;class wC extends Ix{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const n=this._document.createElement("canvas");return n.width=t,n.height=e,n}}class Lx{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){mt("Abstract method `_fetch` called.")}}class pw extends Lx{async _fetch(t){const e=await ed(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):td(e)}}class Dx{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,n,i,r){return"none"}destroy(t=!1){}}var ba,yl,ri,ai,Te,Sa,_a,O,Ce,Bc,Eo,Jd,Co,Fx,Om,ko,Hc,$c,jm,Uc;class AC extends Dx{constructor({docId:e,ownerDocument:n=globalThis.document}){super();A(this,O);A(this,ba);A(this,yl);A(this,ri);A(this,ai);A(this,Te);A(this,Sa);A(this,_a,0);g(this,ai,e),g(this,Te,n)}addFilter(e){if(!e)return"none";let n=o(this,O,Ce).get(e);if(n)return n;const[i,r,a]=x(this,O,Jd).call(this,e),l=e.length===1?i:`${i}${r}${a}`;if(n=o(this,O,Ce).get(l),n)return o(this,O,Ce).set(e,n),n;const c=`g_${o(this,ai)}_transfer_map_${Ie(this,_a)._++}`,u=x(this,O,Co).call(this,c);o(this,O,Ce).set(e,u),o(this,O,Ce).set(l,u);const h=x(this,O,ko).call(this,c);return x(this,O,$c).call(this,i,r,a,h),u}addHCMFilter(e,n){var w;const i=`${e}-${n}`,r="base";let a=o(this,O,Bc).get(r);if((a==null?void 0:a.key)===i||(a?((w=a.filter)==null||w.remove(),a.key=i,a.url="none",a.filter=null):(a={key:i,url:"none",filter:null},o(this,O,Bc).set(r,a)),!e||!n))return a.url;const l=x(this,O,Uc).call(this,e);e=U.makeHexColor(...l);const c=x(this,O,Uc).call(this,n);if(n=U.makeHexColor(...c),o(this,O,Eo).style.color="",e==="#000000"&&n==="#ffffff"||e===n)return a.url;const u=new Array(256);for(let y=0;y<=255;y++){const S=y/255;u[y]=S<=.03928?S/12.92:((S+.055)/1.055)**2.4}const h=u.join(","),d=`g_${o(this,ai)}_hcm_filter`,f=a.filter=x(this,O,ko).call(this,d);x(this,O,$c).call(this,h,h,h,f),x(this,O,Om).call(this,f);const p=(y,S)=>{const m=l[y]/255,v=c[y]/255,b=new Array(S+1);for(let _=0;_<=S;_++)b[_]=m+_/S*(v-m);return b.join(",")};return x(this,O,$c).call(this,p(0,5),p(1,5),p(2,5),f),a.url=x(this,O,Co).call(this,d),a.url}addAlphaFilter(e){let n=o(this,O,Ce).get(e);if(n)return n;const[i]=x(this,O,Jd).call(this,[e]),r=`alpha_${i}`;if(n=o(this,O,Ce).get(r),n)return o(this,O,Ce).set(e,n),n;const a=`g_${o(this,ai)}_alpha_map_${Ie(this,_a)._++}`,l=x(this,O,Co).call(this,a);o(this,O,Ce).set(e,l),o(this,O,Ce).set(r,l);const c=x(this,O,ko).call(this,a);return x(this,O,jm).call(this,i,c),l}addLuminosityFilter(e){let n=o(this,O,Ce).get(e||"luminosity");if(n)return n;let i,r;if(e?([i]=x(this,O,Jd).call(this,[e]),r=`luminosity_${i}`):r="luminosity",n=o(this,O,Ce).get(r),n)return o(this,O,Ce).set(e,n),n;const a=`g_${o(this,ai)}_luminosity_map_${Ie(this,_a)._++}`,l=x(this,O,Co).call(this,a);o(this,O,Ce).set(e,l),o(this,O,Ce).set(r,l);const c=x(this,O,ko).call(this,a);return x(this,O,Fx).call(this,c),e&&x(this,O,jm).call(this,i,c),l}addHighlightHCMFilter(e,n,i,r,a){var v;const l=`${n}-${i}-${r}-${a}`;let c=o(this,O,Bc).get(e);if((c==null?void 0:c.key)===l||(c?((v=c.filter)==null||v.remove(),c.key=l,c.url="none",c.filter=null):(c={key:l,url:"none",filter:null},o(this,O,Bc).set(e,c)),!n||!i))return c.url;const[u,h]=[n,i].map(x(this,O,Uc).bind(this));let d=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),f=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),[p,w]=[r,a].map(x(this,O,Uc).bind(this));f<d&&([d,f,p,w]=[f,d,w,p]),o(this,O,Eo).style.color="";const y=(b,_,E)=>{const k=new Array(256),T=(f-d)/E,P=b/255,R=(_-b)/(255*E);let N=0;for(let L=0;L<=E;L++){const st=Math.round(d+L*T),rt=P+L*R;for(let Q=N;Q<=st;Q++)k[Q]=rt;N=st+1}for(let L=N;L<256;L++)k[L]=k[N-1];return k.join(",")},S=`g_${o(this,ai)}_hcm_${e}_filter`,m=c.filter=x(this,O,ko).call(this,S);return x(this,O,Om).call(this,m),x(this,O,$c).call(this,y(p[0],w[0],5),y(p[1],w[1],5),y(p[2],w[2],5),m),c.url=x(this,O,Co).call(this,S),c.url}destroy(e=!1){var n,i,r,a;e&&((n=o(this,Sa))!=null&&n.size)||((i=o(this,ri))==null||i.parentNode.parentNode.remove(),g(this,ri,null),(r=o(this,yl))==null||r.clear(),g(this,yl,null),(a=o(this,Sa))==null||a.clear(),g(this,Sa,null),g(this,_a,0))}}ba=new WeakMap,yl=new WeakMap,ri=new WeakMap,ai=new WeakMap,Te=new WeakMap,Sa=new WeakMap,_a=new WeakMap,O=new WeakSet,Ce=function(){return o(this,yl)||g(this,yl,new Map)},Bc=function(){return o(this,Sa)||g(this,Sa,new Map)},Eo=function(){if(!o(this,ri)){const e=o(this,Te).createElement("div"),{style:n}=e;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const i=o(this,Te).createElementNS(Us,"svg");i.setAttribute("width",0),i.setAttribute("height",0),g(this,ri,o(this,Te).createElementNS(Us,"defs")),e.append(i),i.append(o(this,ri)),o(this,Te).body.append(e)}return o(this,ri)},Jd=function(e){if(e.length===1){const u=e[0],h=new Array(256);for(let f=0;f<256;f++)h[f]=u[f]/255;const d=h.join(",");return[d,d,d]}const[n,i,r]=e,a=new Array(256),l=new Array(256),c=new Array(256);for(let u=0;u<256;u++)a[u]=n[u]/255,l[u]=i[u]/255,c[u]=r[u]/255;return[a.join(","),l.join(","),c.join(",")]},Co=function(e){if(o(this,ba)===void 0){g(this,ba,"");const n=o(this,Te).URL;n!==o(this,Te).baseURI&&(zp(n)?Y('#createUrl: ignore "data:"-URL for performance reasons.'):g(this,ba,X1(n,"")))}return`url(${o(this,ba)}#${e})`},Fx=function(e){const n=o(this,Te).createElementNS(Us,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(n)},Om=function(e){const n=o(this,Te).createElementNS(Us,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(n)},ko=function(e){const n=o(this,Te).createElementNS(Us,"filter");return n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("id",e),o(this,O,Eo).append(n),n},Hc=function(e,n,i){const r=o(this,Te).createElementNS(Us,n);r.setAttribute("type","discrete"),r.setAttribute("tableValues",i),e.append(r)},$c=function(e,n,i,r){const a=o(this,Te).createElementNS(Us,"feComponentTransfer");r.append(a),x(this,O,Hc).call(this,a,"feFuncR",e),x(this,O,Hc).call(this,a,"feFuncG",n),x(this,O,Hc).call(this,a,"feFuncB",i)},jm=function(e,n){const i=o(this,Te).createElementNS(Us,"feComponentTransfer");n.append(i),x(this,O,Hc).call(this,i,"feFuncA",e)},Uc=function(e){return o(this,O,Eo).style.color=e,M0(getComputedStyle(o(this,O,Eo)).getPropertyValue("color"))};class Ox{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(n=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){mt("Abstract method `_fetch` called.")}}class gw extends Ox{async _fetch(t){const e=await ed(t,"arraybuffer");return new Uint8Array(e)}}class jx{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(n=>{throw new Error(`Unable to load wasm data at: ${e}`)})}async _fetch(t){mt("Abstract method `_fetch` called.")}}class mw extends jx{async _fetch(t){const e=await ed(t,"arraybuffer");return new Uint8Array(e)}}ze&&Y("Please use the `legacy` build in Node.js environments.");async function D0(s){const e=await process.getBuiltinModule("fs").promises.readFile(s);return new Uint8Array(e)}class xC extends Dx{}class bC extends Ix{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,e)}}class SC extends Lx{async _fetch(t){return D0(t)}}class _C extends Ox{async _fetch(t){return D0(t)}}class EC extends jx{async _fetch(t){return D0(t)}}const me={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function zm(s,t){if(!t)return;const e=t[2]-t[0],n=t[3]-t[1],i=new Path2D;i.rect(t[0],t[1],e,n),s.clip(i)}class F0{isModifyingCurrentTransform(){return!1}getPattern(){mt("Abstract method `getPattern` called.")}}class CC extends F0{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;this._type==="axial"?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)e.addColorStop(n[0],n[1]);return e}getPattern(t,e,n,i){let r;if(i===me.STROKE||i===me.FILL){const a=e.current.getClippedPathBoundingBox(i,Nt(t))||[0,0,0,0],l=Math.ceil(a[2]-a[0])||1,c=Math.ceil(a[3]-a[1])||1,u=e.cachedCanvases.getCanvas("pattern",l,c),h=u.context;h.clearRect(0,0,h.canvas.width,h.canvas.height),h.beginPath(),h.rect(0,0,h.canvas.width,h.canvas.height),h.translate(-a[0],-a[1]),n=U.transform(n,[1,0,0,1,a[0],a[1]]),h.transform(...e.baseTransform),this.matrix&&h.transform(...this.matrix),zm(h,this._bbox),h.fillStyle=this._createGradient(h),h.fill(),r=t.createPattern(u.canvas,"no-repeat");const d=new DOMMatrix(n);r.setTransform(d)}else zm(t,this._bbox),r=this._createGradient(t);return r}}function Ag(s,t,e,n,i,r,a,l){const c=t.coords,u=t.colors,h=s.data,d=s.width*4;let f;c[e+1]>c[n+1]&&(f=e,e=n,n=f,f=r,r=a,a=f),c[n+1]>c[i+1]&&(f=n,n=i,i=f,f=a,a=l,l=f),c[e+1]>c[n+1]&&(f=e,e=n,n=f,f=r,r=a,a=f);const p=(c[e]+t.offsetX)*t.scaleX,w=(c[e+1]+t.offsetY)*t.scaleY,y=(c[n]+t.offsetX)*t.scaleX,S=(c[n+1]+t.offsetY)*t.scaleY,m=(c[i]+t.offsetX)*t.scaleX,v=(c[i+1]+t.offsetY)*t.scaleY;if(w>=v)return;const b=u[r],_=u[r+1],E=u[r+2],k=u[a],T=u[a+1],P=u[a+2],R=u[l],N=u[l+1],L=u[l+2],st=Math.round(w),rt=Math.round(v);let Q,ce,B,$,D,W,X,ct;for(let tt=st;tt<=rt;tt++){if(tt<S){const vt=tt<w?0:(w-tt)/(w-S);Q=p-(p-y)*vt,ce=b-(b-k)*vt,B=_-(_-T)*vt,$=E-(E-P)*vt}else{let vt;tt>v?vt=1:S===v?vt=0:vt=(S-tt)/(S-v),Q=y-(y-m)*vt,ce=k-(k-R)*vt,B=T-(T-N)*vt,$=P-(P-L)*vt}let wt;tt<w?wt=0:tt>v?wt=1:wt=(w-tt)/(w-v),D=p-(p-m)*wt,W=b-(b-R)*wt,X=_-(_-N)*wt,ct=E-(E-L)*wt;const Ge=Math.round(Math.min(Q,D)),Pn=Math.round(Math.max(Q,D));let be=d*tt+Ge*4;for(let vt=Ge;vt<=Pn;vt++)wt=(Q-vt)/(Q-D),wt<0?wt=0:wt>1&&(wt=1),h[be++]=ce-(ce-W)*wt|0,h[be++]=B-(B-X)*wt|0,h[be++]=$-($-ct)*wt|0,h[be++]=255}}function kC(s,t,e){const n=t.coords,i=t.colors;let r,a;switch(t.type){case"lattice":const l=t.verticesPerRow,c=Math.floor(n.length/l)-1,u=l-1;for(r=0;r<c;r++){let h=r*l;for(let d=0;d<u;d++,h++)Ag(s,e,n[h],n[h+1],n[h+l],i[h],i[h+1],i[h+l]),Ag(s,e,n[h+l+1],n[h+1],n[h+l],i[h+l+1],i[h+1],i[h+l])}break;case"triangles":for(r=0,a=n.length;r<a;r+=3)Ag(s,e,n[r],n[r+1],n[r+2],i[r],i[r+1],i[r+2]);break;default:throw new Error("illegal figure")}}class TC extends F0{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,e,n){const l=Math.floor(this._bounds[0]),c=Math.floor(this._bounds[1]),u=Math.ceil(this._bounds[2])-l,h=Math.ceil(this._bounds[3])-c,d=Math.min(Math.ceil(Math.abs(u*t[0]*1.1)),3e3),f=Math.min(Math.ceil(Math.abs(h*t[1]*1.1)),3e3),p=u/d,w=h/f,y={coords:this._coords,colors:this._colors,offsetX:-l,offsetY:-c,scaleX:1/p,scaleY:1/w},S=d+2*2,m=f+2*2,v=n.getCanvas("mesh",S,m),b=v.context,_=b.createImageData(d,f);if(e){const k=_.data;for(let T=0,P=k.length;T<P;T+=4)k[T]=e[0],k[T+1]=e[1],k[T+2]=e[2],k[T+3]=255}for(const k of this._figures)kC(_,k,y);return b.putImageData(_,2,2),{canvas:v.canvas,offsetX:l-2*p,offsetY:c-2*w,scaleX:p,scaleY:w}}isModifyingCurrentTransform(){return!0}getPattern(t,e,n,i){zm(t,this._bbox);const r=new Float32Array(2);if(i===me.SHADING)U.singularValueDecompose2dScale(Nt(t),r);else if(this.matrix){U.singularValueDecompose2dScale(this.matrix,r);const[l,c]=r;U.singularValueDecompose2dScale(e.baseTransform,r),r[0]*=l,r[1]*=c}else U.singularValueDecompose2dScale(e.baseTransform,r);const a=this._createMeshCanvas(r,i===me.SHADING?null:this._background,e.cachedCanvases);return i!==me.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(a.offsetX,a.offsetY),t.scale(a.scaleX,a.scaleY),t.createPattern(a.canvas,"no-repeat")}}class PC extends F0{getPattern(){return"hotpink"}}function RC(s){switch(s[0]){case"RadialAxial":return new CC(s);case"Mesh":return new TC(s);case"Dummy":return new PC}throw new Error(`Unknown IR type: ${s[0]}`)}const yw={COLORED:1,UNCOLORED:2},lp=class lp{constructor(t,e,n,i){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=e,this.canvasGraphicsFactory=n,this.baseTransform=i}createPatternCanvas(t){const{bbox:e,operatorList:n,paintType:i,tilingType:r,color:a,canvasGraphicsFactory:l}=this;let{xstep:c,ystep:u}=this;c=Math.abs(c),u=Math.abs(u),jp("TilingType: "+r);const h=e[0],d=e[1],f=e[2],p=e[3],w=f-h,y=p-d,S=new Float32Array(2);U.singularValueDecompose2dScale(this.matrix,S);const[m,v]=S;U.singularValueDecompose2dScale(this.baseTransform,S);const b=m*S[0],_=v*S[1];let E=w,k=y,T=!1,P=!1;const R=Math.ceil(c*b),N=Math.ceil(u*_),L=Math.ceil(w*b),st=Math.ceil(y*_);R>=L?E=c:T=!0,N>=st?k=u:P=!0;const rt=this.getSizeAndScale(E,this.ctx.canvas.width,b),Q=this.getSizeAndScale(k,this.ctx.canvas.height,_),ce=t.cachedCanvases.getCanvas("pattern",rt.size,Q.size),B=ce.context,$=l.createCanvasGraphics(B);if($.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext($,i,a),B.translate(-rt.scale*h,-Q.scale*d),$.transform(rt.scale,0,0,Q.scale,0,0),B.save(),this.clipBbox($,h,d,f,p),$.baseTransform=Nt($.ctx),$.executeOperatorList(n),$.endDrawing(),B.restore(),T||P){const D=ce.canvas;T&&(E=c),P&&(k=u);const W=this.getSizeAndScale(E,this.ctx.canvas.width,b),X=this.getSizeAndScale(k,this.ctx.canvas.height,_),ct=W.size,tt=X.size,wt=t.cachedCanvases.getCanvas("pattern-workaround",ct,tt),Ge=wt.context,Pn=T?Math.floor(w/c):0,be=P?Math.floor(y/u):0;for(let vt=0;vt<=Pn;vt++)for(let yc=0;yc<=be;yc++)Ge.drawImage(D,ct*vt,tt*yc,ct,tt,0,0,ct,tt);return{canvas:wt.canvas,scaleX:W.scale,scaleY:X.scale,offsetX:h,offsetY:d}}return{canvas:ce.canvas,scaleX:rt.scale,scaleY:Q.scale,offsetX:h,offsetY:d}}getSizeAndScale(t,e,n){const i=Math.max(lp.MAX_PATTERN_SIZE,e);let r=Math.ceil(t*n);return r>=i?r=i:n=r/t,{scale:n,size:r}}clipBbox(t,e,n,i,r){const a=i-e,l=r-n;t.ctx.rect(e,n,a,l),U.axialAlignedBoundingBox([e,n,i,r],Nt(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,n){const i=t.ctx,r=t.current;switch(e){case yw.COLORED:const a=this.ctx;i.fillStyle=a.fillStyle,i.strokeStyle=a.strokeStyle,r.fillColor=a.fillStyle,r.strokeColor=a.strokeStyle;break;case yw.UNCOLORED:const l=U.makeHexColor(n[0],n[1],n[2]);i.fillStyle=l,i.strokeStyle=l,r.fillColor=l,r.strokeColor=l;break;default:throw new eC(`Unsupported paint type: ${e}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,e,n,i){let r=n;i!==me.SHADING&&(r=U.transform(r,e.baseTransform),this.matrix&&(r=U.transform(r,this.matrix)));const a=this.createPatternCanvas(e);let l=new DOMMatrix(r);l=l.translate(a.offsetX,a.offsetY),l=l.scale(1/a.scaleX,1/a.scaleY);const c=t.createPattern(a.canvas,"repeat");return c.setTransform(l),c}};I(lp,"MAX_PATTERN_SIZE",3e3);let Bm=lp;function NC({src:s,srcPos:t=0,dest:e,width:n,height:i,nonBlackColor:r=4294967295,inverseDecode:a=!1}){const l=Ae.isLittleEndian?4278190080:255,[c,u]=a?[r,l]:[l,r],h=n>>3,d=n&7,f=s.length;e=new Uint32Array(e.buffer);let p=0;for(let w=0;w<i;w++){for(const S=t+h;t<S;t++){const m=t<f?s[t]:255;e[p++]=m&128?u:c,e[p++]=m&64?u:c,e[p++]=m&32?u:c,e[p++]=m&16?u:c,e[p++]=m&8?u:c,e[p++]=m&4?u:c,e[p++]=m&2?u:c,e[p++]=m&1?u:c}if(d===0)continue;const y=t<f?s[t++]:255;for(let S=0;S<d;S++)e[p++]=y&1<<7-S?u:c}return{srcPos:t,destPos:p}}const vw=16,ww=100,MC=15,Aw=10,Ze=16,xg=new DOMMatrix,xn=new Float32Array(2),Uo=new Float32Array([1/0,1/0,-1/0,-1/0]);function IC(s,t){if(s._removeMirroring)throw new Error("Context is already forwarding operations.");s.__originalSave=s.save,s.__originalRestore=s.restore,s.__originalRotate=s.rotate,s.__originalScale=s.scale,s.__originalTranslate=s.translate,s.__originalTransform=s.transform,s.__originalSetTransform=s.setTransform,s.__originalResetTransform=s.resetTransform,s.__originalClip=s.clip,s.__originalMoveTo=s.moveTo,s.__originalLineTo=s.lineTo,s.__originalBezierCurveTo=s.bezierCurveTo,s.__originalRect=s.rect,s.__originalClosePath=s.closePath,s.__originalBeginPath=s.beginPath,s._removeMirroring=()=>{s.save=s.__originalSave,s.restore=s.__originalRestore,s.rotate=s.__originalRotate,s.scale=s.__originalScale,s.translate=s.__originalTranslate,s.transform=s.__originalTransform,s.setTransform=s.__originalSetTransform,s.resetTransform=s.__originalResetTransform,s.clip=s.__originalClip,s.moveTo=s.__originalMoveTo,s.lineTo=s.__originalLineTo,s.bezierCurveTo=s.__originalBezierCurveTo,s.rect=s.__originalRect,s.closePath=s.__originalClosePath,s.beginPath=s.__originalBeginPath,delete s._removeMirroring},s.save=function(){t.save(),this.__originalSave()},s.restore=function(){t.restore(),this.__originalRestore()},s.translate=function(e,n){t.translate(e,n),this.__originalTranslate(e,n)},s.scale=function(e,n){t.scale(e,n),this.__originalScale(e,n)},s.transform=function(e,n,i,r,a,l){t.transform(e,n,i,r,a,l),this.__originalTransform(e,n,i,r,a,l)},s.setTransform=function(e,n,i,r,a,l){t.setTransform(e,n,i,r,a,l),this.__originalSetTransform(e,n,i,r,a,l)},s.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},s.rotate=function(e){t.rotate(e),this.__originalRotate(e)},s.clip=function(e){t.clip(e),this.__originalClip(e)},s.moveTo=function(e,n){t.moveTo(e,n),this.__originalMoveTo(e,n)},s.lineTo=function(e,n){t.lineTo(e,n),this.__originalLineTo(e,n)},s.bezierCurveTo=function(e,n,i,r,a,l){t.bezierCurveTo(e,n,i,r,a,l),this.__originalBezierCurveTo(e,n,i,r,a,l)},s.rect=function(e,n,i,r){t.rect(e,n,i,r),this.__originalRect(e,n,i,r)},s.closePath=function(){t.closePath(),this.__originalClosePath()},s.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class LC{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,n){let i;return this.cache[t]!==void 0?(i=this.cache[t],this.canvasFactory.reset(i,e,n)):(i=this.canvasFactory.create(e,n),this.cache[t]=i),i}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function Cd(s,t,e,n,i,r,a,l,c,u){const[h,d,f,p,w,y]=Nt(s);if(d===0&&f===0){const v=a*h+w,b=Math.round(v),_=l*p+y,E=Math.round(_),k=(a+c)*h+w,T=Math.abs(Math.round(k)-b)||1,P=(l+u)*p+y,R=Math.abs(Math.round(P)-E)||1;return s.setTransform(Math.sign(h),0,0,Math.sign(p),b,E),s.drawImage(t,e,n,i,r,0,0,T,R),s.setTransform(h,d,f,p,w,y),[T,R]}if(h===0&&p===0){const v=l*f+w,b=Math.round(v),_=a*d+y,E=Math.round(_),k=(l+u)*f+w,T=Math.abs(Math.round(k)-b)||1,P=(a+c)*d+y,R=Math.abs(Math.round(P)-E)||1;return s.setTransform(0,Math.sign(d),Math.sign(f),0,b,E),s.drawImage(t,e,n,i,r,0,0,R,T),s.setTransform(h,d,f,p,w,y),[R,T]}s.drawImage(t,e,n,i,r,a,l,c,u);const S=Math.hypot(h,d),m=Math.hypot(f,p);return[S*c,m*u]}class xw{constructor(t,e){I(this,"alphaIsShape",!1);I(this,"fontSize",0);I(this,"fontSizeScale",1);I(this,"textMatrix",null);I(this,"textMatrixScale",1);I(this,"fontMatrix",mm);I(this,"leading",0);I(this,"x",0);I(this,"y",0);I(this,"lineX",0);I(this,"lineY",0);I(this,"charSpacing",0);I(this,"wordSpacing",0);I(this,"textHScale",1);I(this,"textRenderingMode",Ee.FILL);I(this,"textRise",0);I(this,"fillColor","#000000");I(this,"strokeColor","#000000");I(this,"patternFill",!1);I(this,"patternStroke",!1);I(this,"fillAlpha",1);I(this,"strokeAlpha",1);I(this,"lineWidth",1);I(this,"activeSMask",null);I(this,"transferMaps","none");this.clipBox=new Float32Array([0,0,t,e]),this.minMax=Uo.slice()}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(t=me.FILL,e=null){const n=this.minMax.slice();if(t===me.STROKE){e||mt("Stroke bounding box must include transform."),U.singularValueDecompose2dScale(e,xn);const i=xn[0]*this.lineWidth/2,r=xn[1]*this.lineWidth/2;n[0]-=i,n[1]-=r,n[2]+=i,n[3]+=r}return n}updateClipFromPath(){const t=U.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(Uo,0)}getClippedPathBoundingBox(t=me.FILL,e=null){return U.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function bw(s,t){if(t instanceof ImageData){s.putImageData(t,0,0);return}const e=t.height,n=t.width,i=e%Ze,r=(e-i)/Ze,a=i===0?r:r+1,l=s.createImageData(n,Ze);let c=0,u;const h=t.data,d=l.data;let f,p,w,y;if(t.kind===Ud.GRAYSCALE_1BPP){const S=h.byteLength,m=new Uint32Array(d.buffer,0,d.byteLength>>2),v=m.length,b=n+7>>3,_=4294967295,E=Ae.isLittleEndian?4278190080:255;for(f=0;f<a;f++){for(w=f<r?Ze:i,u=0,p=0;p<w;p++){const k=S-c;let T=0;const P=k>b?n:k*8-7,R=P&-8;let N=0,L=0;for(;T<R;T+=8)L=h[c++],m[u++]=L&128?_:E,m[u++]=L&64?_:E,m[u++]=L&32?_:E,m[u++]=L&16?_:E,m[u++]=L&8?_:E,m[u++]=L&4?_:E,m[u++]=L&2?_:E,m[u++]=L&1?_:E;for(;T<P;T++)N===0&&(L=h[c++],N=128),m[u++]=L&N?_:E,N>>=1}for(;u<v;)m[u++]=0;s.putImageData(l,0,f*Ze)}}else if(t.kind===Ud.RGBA_32BPP){for(p=0,y=n*Ze*4,f=0;f<r;f++)d.set(h.subarray(c,c+y)),c+=y,s.putImageData(l,0,p),p+=Ze;f<a&&(y=n*i*4,d.set(h.subarray(c,c+y)),s.putImageData(l,0,p))}else if(t.kind===Ud.RGB_24BPP)for(w=Ze,y=n*w,f=0;f<a;f++){for(f>=r&&(w=i,y=n*w),u=0,p=y;p--;)d[u++]=h[c++],d[u++]=h[c++],d[u++]=h[c++],d[u++]=255;s.putImageData(l,0,f*Ze)}else throw new Error(`bad image kind: ${t.kind}`)}function Sw(s,t){if(t.bitmap){s.drawImage(t.bitmap,0,0);return}const e=t.height,n=t.width,i=e%Ze,r=(e-i)/Ze,a=i===0?r:r+1,l=s.createImageData(n,Ze);let c=0;const u=t.data,h=l.data;for(let d=0;d<a;d++){const f=d<r?Ze:i;({srcPos:c}=NC({src:u,srcPos:c,dest:h,width:n,height:f,nonBlackColor:0})),s.putImageData(l,0,d*Ze)}}function kc(s,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of e)s[n]!==void 0&&(t[n]=s[n]);s.setLineDash!==void 0&&(t.setLineDash(s.getLineDash()),t.lineDashOffset=s.lineDashOffset)}function kd(s){s.strokeStyle=s.fillStyle="#000000",s.fillRule="nonzero",s.globalAlpha=1,s.lineWidth=1,s.lineCap="butt",s.lineJoin="miter",s.miterLimit=10,s.globalCompositeOperation="source-over",s.font="10px sans-serif",s.setLineDash!==void 0&&(s.setLineDash([]),s.lineDashOffset=0);const{filter:t}=s;t!=="none"&&t!==""&&(s.filter="none")}function _w(s,t){if(t)return!0;U.singularValueDecompose2dScale(s,xn);const e=Math.fround(Li.pixelRatio*zr.PDF_TO_CSS_UNITS);return xn[0]<=e&&xn[1]<=e}const DC=["butt","round","square"],FC=["miter","round","bevel"],OC={},Ew={};var ms,Hm,$m,Um;const $0=class $0{constructor(t,e,n,i,r,{optionalContentConfig:a,markedContentStack:l=null},c,u){A(this,ms);this.ctx=t,this.current=new xw(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=n,this.canvasFactory=i,this.filterFactory=r,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=l||[],this.optionalContentConfig=a,this.cachedCanvases=new LC(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=c,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=u,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(t,e=null){return typeof t=="string"?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):e}beginDrawing({transform:t,viewport:e,transparency:n=!1,background:i=null}){const r=this.ctx.canvas.width,a=this.ctx.canvas.height,l=this.ctx.fillStyle;if(this.ctx.fillStyle=i||"#ffffff",this.ctx.fillRect(0,0,r,a),this.ctx.fillStyle=l,n){const c=this.cachedCanvases.getCanvas("transparent",r,a);this.compositeCtx=this.ctx,this.transparentCanvas=c.canvas,this.ctx=c.context,this.ctx.save(),this.ctx.transform(...Nt(this.compositeCtx))}this.ctx.save(),kd(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=Nt(this.ctx)}executeOperatorList(t,e,n,i){const r=t.argsArray,a=t.fnArray;let l=e||0;const c=r.length;if(c===l)return l;const u=c-l>Aw&&typeof n=="function",h=u?Date.now()+MC:0;let d=0;const f=this.commonObjs,p=this.objs;let w;for(;;){if(i!==void 0&&l===i.nextBreakPoint)return i.breakIt(l,n),l;if(w=a[l],w!==Gf.dependency)this[w].apply(this,r[l]);else for(const y of r[l]){const S=y.startsWith("g_")?f:p;if(!S.has(y))return S.get(y,n),l}if(l++,l===c)return l;if(u&&++d>Aw){if(Date.now()>h)return n(),l;d=0}}}endDrawing(){x(this,ms,Hm).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),x(this,ms,$m).call(this)}_scaleImage(t,e){const n=t.width??t.displayWidth,i=t.height??t.displayHeight;let r=Math.max(Math.hypot(e[0],e[1]),1),a=Math.max(Math.hypot(e[2],e[3]),1),l=n,c=i,u="prescale1",h,d;for(;r>2&&l>1||a>2&&c>1;){let f=l,p=c;r>2&&l>1&&(f=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l/2),r/=l/f),a>2&&c>1&&(p=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c)/2,a/=c/p),h=this.cachedCanvases.getCanvas(u,f,p),d=h.context,d.clearRect(0,0,f,p),d.drawImage(t,0,0,l,c,0,0,f,p),t=h.canvas,l=f,c=p,u=u==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:l,paintHeight:c}}_createMaskCanvas(t){const e=this.ctx,{width:n,height:i}=t,r=this.current.fillColor,a=this.current.patternFill,l=Nt(e);let c,u,h,d;if((t.bitmap||t.data)&&t.count>1){const R=t.bitmap||t.data.buffer;u=JSON.stringify(a?l:[l.slice(0,4),r]),c=this._cachedBitmapsMap.get(R),c||(c=new Map,this._cachedBitmapsMap.set(R,c));const N=c.get(u);if(N&&!a){const L=Math.round(Math.min(l[0],l[2])+l[4]),st=Math.round(Math.min(l[1],l[3])+l[5]);return{canvas:N,offsetX:L,offsetY:st}}h=N}h||(d=this.cachedCanvases.getCanvas("maskCanvas",n,i),Sw(d.context,t));let f=U.transform(l,[1/n,0,0,-1/i,0,0]);f=U.transform(f,[1,0,0,1,0,-i]);const p=Uo.slice();U.axialAlignedBoundingBox([0,0,n,i],f,p);const[w,y,S,m]=p,v=Math.round(S-w)||1,b=Math.round(m-y)||1,_=this.cachedCanvases.getCanvas("fillCanvas",v,b),E=_.context,k=w,T=y;E.translate(-k,-T),E.transform(...f),h||(h=this._scaleImage(d.canvas,vs(E)),h=h.img,c&&a&&c.set(u,h)),E.imageSmoothingEnabled=_w(Nt(E),t.interpolate),Cd(E,h,0,0,h.width,h.height,0,0,n,i),E.globalCompositeOperation="source-in";const P=U.transform(vs(E),[1,0,0,1,-k,-T]);return E.fillStyle=a?r.getPattern(e,this,P,me.FILL):r,E.fillRect(0,0,n,i),c&&!a&&(this.cachedCanvases.delete("fillCanvas"),c.set(u,_.canvas)),{canvas:_.canvas,offsetX:Math.round(k),offsetY:Math.round(T)}}setLineWidth(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(t){this.ctx.lineCap=DC[t]}setLineJoin(t){this.ctx.lineJoin=FC[t]}setMiterLimit(t){this.ctx.miterLimit=t}setDash(t,e){const n=this.ctx;n.setLineDash!==void 0&&(n.setLineDash(t),n.lineDashOffset=e)}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[e,n]of t)switch(e){case"LW":this.setLineWidth(n);break;case"LC":this.setLineCap(n);break;case"LJ":this.setLineJoin(n);break;case"ML":this.setMiterLimit(n);break;case"D":this.setDash(n[0],n[1]);break;case"RI":this.setRenderingIntent(n);break;case"FL":this.setFlatness(n);break;case"Font":this.setFont(n[0],n[1]);break;case"CA":this.current.strokeAlpha=n;break;case"ca":this.ctx.globalAlpha=this.current.fillAlpha=n;break;case"BM":this.ctx.globalCompositeOperation=n;break;case"SMask":this.current.activeSMask=n?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(n);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,e=this.ctx.canvas.height,n="smaskGroupAt"+this.groupLevel,i=this.cachedCanvases.getCanvas(n,t,e);this.suspendedCtx=this.ctx;const r=this.ctx=i.context;r.setTransform(this.suspendedCtx.getTransform()),kc(this.suspendedCtx,r),IC(r,this.suspendedCtx),this.setGState([["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),kc(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,n,i){const r=i[0],a=i[1],l=i[2]-r,c=i[3]-a;l===0||c===0||(this.genericComposeSMask(e.context,n,l,c,e.subtype,e.backdrop,e.transferMap,r,a,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(n.canvas,0,0),t.restore())}genericComposeSMask(t,e,n,i,r,a,l,c,u,h,d){let f=t.canvas,p=c-h,w=u-d;if(a){const S=U.makeHexColor(...a);if(p<0||w<0||p+n>f.width||w+i>f.height){const m=this.cachedCanvases.getCanvas("maskExtension",n,i),v=m.context;v.drawImage(f,-p,-w),v.globalCompositeOperation="destination-atop",v.fillStyle=S,v.fillRect(0,0,n,i),v.globalCompositeOperation="source-over",f=m.canvas,p=w=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const m=new Path2D;m.rect(p,w,n,i),t.clip(m),t.globalCompositeOperation="destination-atop",t.fillStyle=S,t.fillRect(p,w,n,i),t.restore()}}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),r==="Alpha"&&l?e.filter=this.filterFactory.addAlphaFilter(l):r==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(l));const y=new Path2D;y.rect(c,u,n,i),e.clip(y),e.globalCompositeOperation="destination-in",e.drawImage(f,p,w,n,i,c,u,n,i),e.restore()}save(){this.inSMaskMode&&kc(this.ctx,this.suspendedCtx),this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone()}restore(){if(this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&kc(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,e,n,i,r,a){this.ctx.transform(t,e,n,i,r,a),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,n){let[i]=e;if(!n){i||(i=e[0]=new Path2D),this[t](i);return}if(!(i instanceof Path2D)){const r=e[0]=new Path2D;for(let a=0,l=i.length;a<l;)switch(i[a++]){case _d.moveTo:r.moveTo(i[a++],i[a++]);break;case _d.lineTo:r.lineTo(i[a++],i[a++]);break;case _d.curveTo:r.bezierCurveTo(i[a++],i[a++],i[a++],i[a++],i[a++],i[a++]);break;case _d.closePath:r.closePath();break;default:Y(`Unrecognized drawing path operator: ${i[a-1]}`);break}i=r}U.axialAlignedBoundingBox(n,Nt(this.ctx),this.current.minMax),this[t](i)}closePath(){this.ctx.closePath()}stroke(t,e=!0){const n=this.ctx,i=this.current.strokeColor;if(n.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof i=="object"&&(i!=null&&i.getPattern)){const r=i.isModifyingCurrentTransform()?n.getTransform():null;if(n.save(),n.strokeStyle=i.getPattern(n,this,vs(n),me.STROKE),r){const a=new Path2D;a.addPath(t,n.getTransform().invertSelf().multiplySelf(r)),t=a}this.rescaleAndStroke(t,!1),n.restore()}else this.rescaleAndStroke(t,!0);e&&this.consumePath(t,this.current.getClippedPathBoundingBox(me.STROKE,Nt(this.ctx))),n.globalAlpha=this.current.fillAlpha}closeStroke(t){this.stroke(t)}fill(t,e=!0){const n=this.ctx,i=this.current.fillColor,r=this.current.patternFill;let a=!1;if(r){const c=i.isModifyingCurrentTransform()?n.getTransform():null;if(n.save(),n.fillStyle=i.getPattern(n,this,vs(n),me.FILL),c){const u=new Path2D;u.addPath(t,n.getTransform().invertSelf().multiplySelf(c)),t=u}a=!0}const l=this.current.getClippedPathBoundingBox();this.contentVisible&&l!==null&&(this.pendingEOFill?(n.fill(t,"evenodd"),this.pendingEOFill=!1):n.fill(t)),a&&n.restore(),e&&this.consumePath(t,l)}eoFill(t){this.pendingEOFill=!0,this.fill(t)}fillStroke(t){this.fill(t,!1),this.stroke(t,!1),this.consumePath(t)}eoFillStroke(t){this.pendingEOFill=!0,this.fillStroke(t)}closeFillStroke(t){this.fillStroke(t)}closeEOFillStroke(t){this.pendingEOFill=!0,this.fillStroke(t)}endPath(t){this.consumePath(t)}rawFillPath(t){this.ctx.fill(t)}clip(){this.pendingClip=OC}eoClip(){this.pendingClip=Ew}beginText(){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const t=this.pendingTextPaths,e=this.ctx;if(t===void 0)return;const n=new Path2D,i=e.getTransform().invertSelf();for(const{transform:r,x:a,y:l,fontSize:c,path:u}of t)n.addPath(u,new DOMMatrix(r).preMultiplySelf(i).translate(a,l).scale(c,-c));e.clip(n),delete this.pendingTextPaths}setCharSpacing(t){this.current.charSpacing=t}setWordSpacing(t){this.current.wordSpacing=t}setHScale(t){this.current.textHScale=t/100}setLeading(t){this.current.leading=-t}setFont(t,e){var h;const n=this.commonObjs.get(t),i=this.current;if(!n)throw new Error(`Can't find font for ${t}`);if(i.fontMatrix=n.fontMatrix||mm,(i.fontMatrix[0]===0||i.fontMatrix[3]===0)&&Y("Invalid font matrix for font "+t),e<0?(e=-e,i.fontDirection=-1):i.fontDirection=1,this.current.font=n,this.current.fontSize=e,n.isType3Font)return;const r=n.loadedName||"sans-serif",a=((h=n.systemFontInfo)==null?void 0:h.css)||`"${r}", ${n.fallbackName}`;let l="normal";n.black?l="900":n.bold&&(l="bold");const c=n.italic?"italic":"normal";let u=e;e<vw?u=vw:e>ww&&(u=ww),this.current.fontSizeScale=e/u,this.ctx.font=`${c} ${l} ${u}px ${a}`}setTextRenderingMode(t){this.current.textRenderingMode=t}setTextRise(t){this.current.textRise=t}moveText(t,e){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=e}setLeadingMoveText(t,e){this.setLeading(-e),this.moveText(t,e)}setTextMatrix(t){const{current:e}=this;e.textMatrix=t,e.textMatrixScale=Math.hypot(t[0],t[1]),e.x=e.lineX=0,e.y=e.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(t,e,n,i,r){const a=this.ctx,l=this.current,c=l.font,u=l.textRenderingMode,h=l.fontSize/l.fontSizeScale,d=u&Ee.FILL_STROKE_MASK,f=!!(u&Ee.ADD_TO_PATH_FLAG),p=l.patternFill&&!c.missingFile,w=l.patternStroke&&!c.missingFile;let y;if((c.disableFontFace||f||p||w)&&(y=c.getPathGenerator(this.commonObjs,t)),c.disableFontFace||p||w){a.save(),a.translate(e,n),a.scale(h,-h);let S;if((d===Ee.FILL||d===Ee.FILL_STROKE)&&(i?(S=a.getTransform(),a.setTransform(...i),a.fill(x(this,ms,Um).call(this,y,S,i))):a.fill(y)),d===Ee.STROKE||d===Ee.FILL_STROKE)if(r){S||(S=a.getTransform()),a.setTransform(...r);const{a:m,b:v,c:b,d:_}=S,E=U.inverseTransform(r),k=U.transform([m,v,b,_,0,0],E);U.singularValueDecompose2dScale(k,xn),a.lineWidth*=Math.max(xn[0],xn[1])/h,a.stroke(x(this,ms,Um).call(this,y,S,r))}else a.lineWidth/=h,a.stroke(y);a.restore()}else(d===Ee.FILL||d===Ee.FILL_STROKE)&&a.fillText(t,e,n),(d===Ee.STROKE||d===Ee.FILL_STROKE)&&a.strokeText(t,e,n);f&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:Nt(a),x:e,y:n,fontSize:h,path:y})}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let n=!1;for(let i=3;i<e.length;i+=4)if(e[i]>0&&e[i]<255){n=!0;break}return et(this,"isFontSubpixelAAEnabled",n)}showText(t){const e=this.current,n=e.font;if(n.isType3Font)return this.showType3Text(t);const i=e.fontSize;if(i===0)return;const r=this.ctx,a=e.fontSizeScale,l=e.charSpacing,c=e.wordSpacing,u=e.fontDirection,h=e.textHScale*u,d=t.length,f=n.vertical,p=f?1:-1,w=n.defaultVMetrics,y=i*e.fontMatrix[0],S=e.textRenderingMode===Ee.FILL&&!n.disableFontFace&&!e.patternFill;r.save(),e.textMatrix&&r.transform(...e.textMatrix),r.translate(e.x,e.y+e.textRise),u>0?r.scale(h,-1):r.scale(h,1);let m,v;if(e.patternFill){r.save();const T=e.fillColor.getPattern(r,this,vs(r),me.FILL);m=Nt(r),r.restore(),r.fillStyle=T}if(e.patternStroke){r.save();const T=e.strokeColor.getPattern(r,this,vs(r),me.STROKE);v=Nt(r),r.restore(),r.strokeStyle=T}let b=e.lineWidth;const _=e.textMatrixScale;if(_===0||b===0){const T=e.textRenderingMode&Ee.FILL_STROKE_MASK;(T===Ee.STROKE||T===Ee.FILL_STROKE)&&(b=this.getSinglePixelWidth())}else b/=_;if(a!==1&&(r.scale(a,a),b/=a),r.lineWidth=b,n.isInvalidPDFjsFont){const T=[];let P=0;for(const R of t)T.push(R.unicode),P+=R.width;r.fillText(T.join(""),0,0),e.x+=P*y*h,r.restore(),this.compose();return}let E=0,k;for(k=0;k<d;++k){const T=t[k];if(typeof T=="number"){E+=p*T*i/1e3;continue}let P=!1;const R=(T.isSpace?c:0)+l,N=T.fontChar,L=T.accent;let st,rt,Q=T.width;if(f){const B=T.vmetric||w,$=-(T.vmetric?B[1]:Q*.5)*y,D=B[2]*y;Q=B?-B[0]:Q,st=$/a,rt=(E+D)/a}else st=E/a,rt=0;if(n.remeasure&&Q>0){const B=r.measureText(N).width*1e3/i*a;if(Q<B&&this.isFontSubpixelAAEnabled){const $=Q/B;P=!0,r.save(),r.scale($,1),st/=$}else Q!==B&&(st+=(Q-B)/2e3*i/a)}if(this.contentVisible&&(T.isInFont||n.missingFile)){if(S&&!L)r.fillText(N,st,rt);else if(this.paintChar(N,st,rt,m,v),L){const B=st+i*L.offset.x/a,$=rt-i*L.offset.y/a;this.paintChar(L.fontChar,B,$,m,v)}}const ce=f?Q*y-R*u:Q*y+R*u;E+=ce,P&&r.restore()}f?e.y-=E:e.x+=E*h,r.restore(),this.compose()}showType3Text(t){const e=this.ctx,n=this.current,i=n.font,r=n.fontSize,a=n.fontDirection,l=i.vertical?1:-1,c=n.charSpacing,u=n.wordSpacing,h=n.textHScale*a,d=n.fontMatrix||mm,f=t.length,p=n.textRenderingMode===Ee.INVISIBLE;let w,y,S,m;if(!(p||r===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,e.save(),n.textMatrix&&e.transform(...n.textMatrix),e.translate(n.x,n.y+n.textRise),e.scale(h,a),w=0;w<f;++w){if(y=t[w],typeof y=="number"){m=l*y*r/1e3,this.ctx.translate(m,0),n.x+=m*h;continue}const v=(y.isSpace?u:0)+c,b=i.charProcOperatorList[y.operatorListId];b?this.contentVisible&&(this.save(),e.scale(r,r),e.transform(...d),this.executeOperatorList(b),this.restore()):Y(`Type3 character "${y.operatorListId}" is not available.`);const _=[y.width,0];U.applyTransform(_,d),S=_[0]*r+v,e.translate(S,0),n.x+=S*h}e.restore()}}setCharWidth(t,e){}setCharWidthAndBounds(t,e,n,i,r,a){const l=new Path2D;l.rect(n,i,r-n,a-i),this.ctx.clip(l),this.endPath()}getColorN_Pattern(t){let e;if(t[0]==="TilingPattern"){const n=this.baseTransform||Nt(this.ctx),i={createCanvasGraphics:r=>new $0(r,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};e=new Bm(t,this.ctx,i,n)}else e=this._getPattern(t[1],t[2]);return e}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(t,e,n){this.ctx.strokeStyle=this.current.strokeColor=U.makeHexColor(t,e,n),this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,e,n){this.ctx.fillStyle=this.current.fillColor=U.makeHexColor(t,e,n),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e=null){let n;return this.cachedPatterns.has(t)?n=this.cachedPatterns.get(t):(n=RC(this.getObject(t)),this.cachedPatterns.set(t,n)),e&&(n.matrix=e),n}shadingFill(t){if(!this.contentVisible)return;const e=this.ctx;this.save();const n=this._getPattern(t);e.fillStyle=n.getPattern(e,this,vs(e),me.SHADING);const i=vs(e);if(i){const{width:r,height:a}=e.canvas,l=Uo.slice();U.axialAlignedBoundingBox([0,0,r,a],i,l);const[c,u,h,d]=l;this.ctx.fillRect(c,u,h-c,d-u)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){mt("Should not call beginInlineImage")}beginImageData(){mt("Should not call beginImageData")}paintFormXObjectBegin(t,e){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),t&&this.transform(...t),this.baseTransform=Nt(this.ctx),e)){U.axialAlignedBoundingBox(e,this.baseTransform,this.current.minMax);const[n,i,r,a]=e,l=new Path2D;l.rect(n,i,r-n,a-i),this.ctx.clip(l),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const e=this.ctx;t.isolated||jp("TODO: Support non-isolated groups."),t.knockout&&Y("Knockout groups not supported.");const n=Nt(e);if(t.matrix&&e.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let i=Uo.slice();U.axialAlignedBoundingBox(t.bbox,Nt(e),i);const r=[0,0,e.canvas.width,e.canvas.height];i=U.intersect(i,r)||[0,0,0,0];const a=Math.floor(i[0]),l=Math.floor(i[1]),c=Math.max(Math.ceil(i[2])-a,1),u=Math.max(Math.ceil(i[3])-l,1);this.current.startNewPathAndClipBox([0,0,c,u]);let h="groupAt"+this.groupLevel;t.smask&&(h+="_smask_"+this.smaskCounter++%2);const d=this.cachedCanvases.getCanvas(h,c,u),f=d.context;f.translate(-a,-l),f.transform(...n);let p=new Path2D;const[w,y,S,m]=t.bbox;if(p.rect(w,y,S-w,m-y),t.matrix){const v=new Path2D;v.addPath(p,new DOMMatrix(t.matrix)),p=v}f.clip(p),t.smask?this.smaskStack.push({canvas:d.canvas,context:f,offsetX:a,offsetY:l,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(a,l),e.save()),kc(e,f),this.ctx=f,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++}endGroup(t){if(!this.contentVisible)return;this.groupLevel--;const e=this.ctx,n=this.groupStack.pop();if(this.ctx=n,this.ctx.imageSmoothingEnabled=!1,t.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const i=Nt(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...i);const r=Uo.slice();U.axialAlignedBoundingBox([0,0,e.canvas.width,e.canvas.height],i,r),this.ctx.drawImage(e.canvas,0,0),this.ctx.restore(),this.compose(r)}}beginAnnotation(t,e,n,i,r){if(x(this,ms,Hm).call(this),kd(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),e){const a=e[2]-e[0],l=e[3]-e[1];if(r&&this.annotationCanvasMap){n=n.slice(),n[4]-=e[0],n[5]-=e[1],e=e.slice(),e[0]=e[1]=0,e[2]=a,e[3]=l,U.singularValueDecompose2dScale(Nt(this.ctx),xn);const{viewportScale:c}=this,u=Math.ceil(a*this.outputScaleX*c),h=Math.ceil(l*this.outputScaleY*c);this.annotationCanvas=this.canvasFactory.create(u,h);const{canvas:d,context:f}=this.annotationCanvas;this.annotationCanvasMap.set(t,d),this.annotationCanvas.savedCtx=this.ctx,this.ctx=f,this.ctx.save(),this.ctx.setTransform(xn[0],0,0,-xn[1],0,l*xn[1]),kd(this.ctx)}else{kd(this.ctx),this.endPath();const c=new Path2D;c.rect(e[0],e[1],a,l),this.ctx.clip(c)}}this.current=new xw(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...n),this.transform(...i)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),x(this,ms,$m).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t){if(!this.contentVisible)return;const e=t.count;t=this.getObject(t.data,t),t.count=e;const n=this.ctx,i=this._createMaskCanvas(t),r=i.canvas;n.save(),n.setTransform(1,0,0,1,0,0),n.drawImage(r,i.offsetX,i.offsetY),n.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,n=0,i=0,r,a){if(!this.contentVisible)return;t=this.getObject(t.data,t);const l=this.ctx;l.save();const c=Nt(l);l.transform(e,n,i,r,0,0);const u=this._createMaskCanvas(t);l.setTransform(1,0,0,1,u.offsetX-c[4],u.offsetY-c[5]);for(let h=0,d=a.length;h<d;h+=2){const f=U.transform(c,[e,n,i,r,a[h],a[h+1]]);l.drawImage(u.canvas,f[4],f[5])}l.restore(),this.compose()}paintImageMaskXObjectGroup(t){if(!this.contentVisible)return;const e=this.ctx,n=this.current.fillColor,i=this.current.patternFill;for(const r of t){const{data:a,width:l,height:c,transform:u}=r,h=this.cachedCanvases.getCanvas("maskCanvas",l,c),d=h.context;d.save();const f=this.getObject(a,r);Sw(d,f),d.globalCompositeOperation="source-in",d.fillStyle=i?n.getPattern(d,this,vs(e),me.FILL):n,d.fillRect(0,0,l,c),d.restore(),e.save(),e.transform(...u),e.scale(1,-1),Cd(e,h.canvas,0,0,l,c,0,-1,1,1),e.restore()}this.compose()}paintImageXObject(t){if(!this.contentVisible)return;const e=this.getObject(t);if(!e){Y("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e)}paintImageXObjectRepeat(t,e,n,i){if(!this.contentVisible)return;const r=this.getObject(t);if(!r){Y("Dependent image isn't ready yet");return}const a=r.width,l=r.height,c=[];for(let u=0,h=i.length;u<h;u+=2)c.push({transform:[e,0,0,n,i[u],i[u+1]],x:0,y:0,w:a,h:l});this.paintInlineImageXObjectGroup(r,c)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:n,height:i}=t,r=this.cachedCanvases.getCanvas("inlineImage",n,i),a=r.context;return a.filter=this.current.transferMaps,a.drawImage(e,0,0),a.filter="none",r.canvas}paintInlineImageXObject(t){if(!this.contentVisible)return;const e=t.width,n=t.height,i=this.ctx;this.save();const{filter:r}=i;r!=="none"&&r!==""&&(i.filter="none"),i.scale(1/e,-1/n);let a;if(t.bitmap)a=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)a=t;else{const u=this.cachedCanvases.getCanvas("inlineImage",e,n).context;bw(u,t),a=this.applyTransferMapsToCanvas(u)}const l=this._scaleImage(a,vs(i));i.imageSmoothingEnabled=_w(Nt(i),t.interpolate),Cd(i,l.img,0,0,l.paintWidth,l.paintHeight,0,-n,e,n),this.compose(),this.restore()}paintInlineImageXObjectGroup(t,e){if(!this.contentVisible)return;const n=this.ctx;let i;if(t.bitmap)i=t.bitmap;else{const r=t.width,a=t.height,c=this.cachedCanvases.getCanvas("inlineImage",r,a).context;bw(c,t),i=this.applyTransferMapsToCanvas(c)}for(const r of e)n.save(),n.transform(...r.transform),n.scale(1,-1),Cd(n,i,r.x,r.y,r.w,r.h,0,-1,1,1),n.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t){}markPointProps(t,e){}beginMarkedContent(t){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e){t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(e)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(t,e){const n=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const i=this.ctx;this.pendingClip&&(n||(this.pendingClip===Ew?i.clip(t,"evenodd"):i.clip(t)),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=Nt(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),n=Math.hypot(t[0],t[2]),i=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(n,i)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:n,c:i,d:r}=this.ctx.getTransform();let a,l;if(n===0&&i===0){const c=Math.abs(e),u=Math.abs(r);if(c===u)if(t===0)a=l=1/c;else{const h=c*t;a=l=h<1?1/h:1}else if(t===0)a=1/c,l=1/u;else{const h=c*t,d=u*t;a=h<1?1/h:1,l=d<1?1/d:1}}else{const c=Math.abs(e*r-n*i),u=Math.hypot(e,n),h=Math.hypot(i,r);if(t===0)a=h/c,l=u/c;else{const d=t*c;a=h>d?h/d:1,l=u>d?u/d:1}}this._cachedScaleForStroking[0]=a,this._cachedScaleForStroking[1]=l}return this._cachedScaleForStroking}rescaleAndStroke(t,e){const{ctx:n,current:{lineWidth:i}}=this,[r,a]=this.getScaleForStroking();if(r===a){n.lineWidth=(i||1)*r,n.stroke(t);return}const l=n.getLineDash();e&&n.save(),n.scale(r,a),xg.a=1/r,xg.d=1/a;const c=new Path2D;if(c.addPath(t,xg),l.length>0){const u=Math.max(r,a);n.setLineDash(l.map(h=>h/u)),n.lineDashOffset/=u}n.lineWidth=i||1,n.stroke(c),e&&n.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}};ms=new WeakSet,Hm=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},$m=function(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}},Um=function(t,e,n){const i=new Path2D;return i.addPath(t,new DOMMatrix(n).invertSelf().multiplySelf(e)),i};let Zo=$0;for(const s in Gf)Zo.prototype[s]!==void 0&&(Zo.prototype[Gf[s]]=Zo.prototype[s]);var Zu,Ju;class zs{static get workerPort(){return o(this,Zu)}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");g(this,Zu,t)}static get workerSrc(){return o(this,Ju)}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");g(this,Ju,t)}}Zu=new WeakMap,Ju=new WeakMap,A(zs,Zu,null),A(zs,Ju,"");var vl,th;class jC{constructor({parsedData:t,rawData:e}){A(this,vl);A(this,th);g(this,vl,t),g(this,th,e)}getRaw(){return o(this,th)}get(t){return o(this,vl).get(t)??null}[Symbol.iterator](){return o(this,vl).entries()}}vl=new WeakMap,th=new WeakMap;const To=Symbol("INTERNAL");var eh,nh,sh,wl;class zC{constructor(t,{name:e,intent:n,usage:i,rbGroups:r}){A(this,eh,!1);A(this,nh,!1);A(this,sh,!1);A(this,wl,!0);g(this,eh,!!(t&wn.DISPLAY)),g(this,nh,!!(t&wn.PRINT)),this.name=e,this.intent=n,this.usage=i,this.rbGroups=r}get visible(){if(o(this,sh))return o(this,wl);if(!o(this,wl))return!1;const{print:t,view:e}=this.usage;return o(this,eh)?(e==null?void 0:e.viewState)!=="OFF":o(this,nh)?(t==null?void 0:t.printState)!=="OFF":!0}_setVisible(t,e,n=!1){t!==To&&mt("Internal method `_setVisible` called."),g(this,sh,n),g(this,wl,e)}}eh=new WeakMap,nh=new WeakMap,sh=new WeakMap,wl=new WeakMap;var rr,pt,Al,xl,ih,Vm;class BC{constructor(t,e=wn.DISPLAY){A(this,ih);A(this,rr,null);A(this,pt,new Map);A(this,Al,null);A(this,xl,null);if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,g(this,xl,t.order);for(const n of t.groups)o(this,pt).set(n.id,new zC(e,n));if(t.baseState==="OFF")for(const n of o(this,pt).values())n._setVisible(To,!1);for(const n of t.on)o(this,pt).get(n)._setVisible(To,!0);for(const n of t.off)o(this,pt).get(n)._setVisible(To,!1);g(this,Al,this.getHash())}}isVisible(t){if(o(this,pt).size===0)return!0;if(!t)return jp("Optional content group not defined."),!0;if(t.type==="OCG")return o(this,pt).has(t.id)?o(this,pt).get(t.id).visible:(Y(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return x(this,ih,Vm).call(this,t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!o(this,pt).has(e))return Y(`Optional content group not found: ${e}`),!0;if(o(this,pt).get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!o(this,pt).has(e))return Y(`Optional content group not found: ${e}`),!0;if(!o(this,pt).get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!o(this,pt).has(e))return Y(`Optional content group not found: ${e}`),!0;if(!o(this,pt).get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!o(this,pt).has(e))return Y(`Optional content group not found: ${e}`),!0;if(o(this,pt).get(e).visible)return!1}return!0}return Y(`Unknown optional content policy ${t.policy}.`),!0}return Y(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,n=!0){var r;const i=o(this,pt).get(t);if(!i){Y(`Optional content group not found: ${t}`);return}if(n&&e&&i.rbGroups.length)for(const a of i.rbGroups)for(const l of a)l!==t&&((r=o(this,pt).get(l))==null||r._setVisible(To,!1,!0));i._setVisible(To,!!e,!0),g(this,rr,null)}setOCGState({state:t,preserveRB:e}){let n;for(const i of t){switch(i){case"ON":case"OFF":case"Toggle":n=i;continue}const r=o(this,pt).get(i);if(r)switch(n){case"ON":this.setVisibility(i,!0,e);break;case"OFF":this.setVisibility(i,!1,e);break;case"Toggle":this.setVisibility(i,!r.visible,e);break}}g(this,rr,null)}get hasInitialVisibility(){return o(this,Al)===null||this.getHash()===o(this,Al)}getOrder(){return o(this,pt).size?o(this,xl)?o(this,xl).slice():[...o(this,pt).keys()]:null}getGroup(t){return o(this,pt).get(t)||null}getHash(){if(o(this,rr)!==null)return o(this,rr);const t=new kx;for(const[e,n]of o(this,pt))t.update(`${e}:${n.visible}`);return g(this,rr,t.hexdigest())}[Symbol.iterator](){return o(this,pt).entries()}}rr=new WeakMap,pt=new WeakMap,Al=new WeakMap,xl=new WeakMap,ih=new WeakSet,Vm=function(t){const e=t.length;if(e<2)return!0;const n=t[0];for(let i=1;i<e;i++){const r=t[i];let a;if(Array.isArray(r))a=x(this,ih,Vm).call(this,r);else if(o(this,pt).has(r))a=o(this,pt).get(r).visible;else return Y(`Optional content group not found: ${r}`),!0;switch(n){case"And":if(!a)return!1;break;case"Or":if(a)return!0;break;case"Not":return!a;default:return!0}}return n==="And"};class HC{constructor(t,{disableRange:e=!1,disableStream:n=!1}){Wt(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:i,initialData:r,progressiveDone:a,contentDispositionFilename:l}=t;if(this._queuedChunks=[],this._progressiveDone=a,this._contentDispositionFilename=l,(r==null?void 0:r.length)>0){const c=r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer;this._queuedChunks.push(c)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!n,this._isRangeSupported=!e,this._contentLength=i,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((c,u)=>{this._onReceiveData({begin:c,chunk:u})}),t.addProgressListener((c,u)=>{this._onProgress({loaded:c,total:u})}),t.addProgressiveReadListener(c=>{this._onReceiveData({chunk:c})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const n=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{const i=this._rangeReaders.some(function(r){return r._begin!==t?!1:(r._enqueue(n),!0)});Wt(i,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}_onProgress(t){var e,n,i,r;t.total===void 0?(n=(e=this._rangeReaders[0])==null?void 0:e.onProgress)==null||n.call(e,{loaded:t.loaded}):(r=(i=this._fullRequestReader)==null?void 0:i.onProgress)==null||r.call(i,{loaded:t.loaded,total:t.total})}_onProgressiveDone(){var t;(t=this._fullRequestReader)==null||t.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){Wt(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new $C(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new UC(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeReaders.slice(0))n.cancel(t);this._pdfDataRangeTransport.abort()}}class $C{constructor(t,e,n=!1,i=null){this._stream=t,this._done=n||!1,this._filename=R0(i)?i:null,this._queuedChunks=e||[],this._loaded=0;for(const r of this._queuedChunks)this._loaded+=r.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class UC{constructor(t,e,n){this._stream=t,this._begin=e,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function VC(s){let t=!0,e=n("filename\\*","i").exec(s);if(e){e=e[1];let h=l(e);return h=unescape(h),h=c(h),h=u(h),r(h)}if(e=a(s),e){const h=u(e);return r(h)}if(e=n("filename","i").exec(s),e){e=e[1];let h=l(e);return h=u(h),r(h)}function n(h,d){return new RegExp("(?:^|;)\\s*"+h+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',d)}function i(h,d){if(h){if(!/^[\x00-\xFF]+$/.test(d))return d;try{const f=new TextDecoder(h,{fatal:!0}),p=td(d);d=f.decode(p),t=!1}catch{}}return d}function r(h){return t&&/[\x80-\xff]/.test(h)&&(h=i("utf-8",h),t&&(h=i("iso-8859-1",h))),h}function a(h){const d=[];let f;const p=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(f=p.exec(h))!==null;){let[,y,S,m]=f;if(y=parseInt(y,10),y in d){if(y===0)break;continue}d[y]=[S,m]}const w=[];for(let y=0;y<d.length&&y in d;++y){let[S,m]=d[y];m=l(m),S&&(m=unescape(m),y===0&&(m=c(m))),w.push(m)}return w.join("")}function l(h){if(h.startsWith('"')){const d=h.slice(1).split('\\"');for(let f=0;f<d.length;++f){const p=d[f].indexOf('"');p!==-1&&(d[f]=d[f].slice(0,p),d.length=f+1),d[f]=d[f].replaceAll(/\\(.)/g,"$1")}h=d.join('"')}return h}function c(h){const d=h.indexOf("'");if(d===-1)return h;const f=h.slice(0,d),w=h.slice(d+1).replace(/^[^']*'/,"");return i(f,w)}function u(h){return!h.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(h)?h:h.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(d,f,p,w){if(p==="q"||p==="Q")return w=w.replaceAll("_"," "),w=w.replaceAll(/=([0-9a-fA-F]{2})/g,function(y,S){return String.fromCharCode(parseInt(S,16))}),i(f,w);try{w=atob(w)}catch{}return i(f,w)})}return""}function zx(s,t){const e=new Headers;if(!s||!t||typeof t!="object")return e;for(const n in t){const i=t[n];i!==void 0&&e.append(n,i)}return e}function Bp(s){var t;return((t=URL.parse(s))==null?void 0:t.origin)??null}function Bx({responseHeaders:s,isHttp:t,rangeChunkSize:e,disableRange:n}){const i={allowRangeRequests:!1,suggestedLength:void 0},r=parseInt(s.get("Content-Length"),10);return!Number.isInteger(r)||(i.suggestedLength=r,r<=2*e)||n||!t||s.get("Accept-Ranges")!=="bytes"||(s.get("Content-Encoding")||"identity")!=="identity"||(i.allowRangeRequests=!0),i}function Hx(s){const t=s.get("Content-Disposition");if(t){let e=VC(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(R0(e))return e}return null}function id(s,t){return new Xf(`Unexpected server response (${s}) while retrieving PDF "${t}".`,s,s===404||s===0&&t.startsWith("file:"))}function $x(s){return s===200||s===206}function Ux(s,t,e){return{method:"GET",headers:s,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function Vx(s){return s instanceof Uint8Array?s.buffer:s instanceof ArrayBuffer?s:(Y(`getArrayBuffer - unexpected data format: ${s}`),new Uint8Array(s).buffer)}class Cw{constructor(t){I(this,"_responseOrigin",null);this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=zx(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return Wt(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new WC(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new GC(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class WC{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;const n=new Headers(t.headers),i=e.url;fetch(i,Ux(n,this._withCredentials,this._abortController)).then(r=>{if(t._responseOrigin=Bp(r.url),!$x(r.status))throw id(r.status,i);this._reader=r.body.getReader(),this._headersCapability.resolve();const a=r.headers,{allowRangeRequests:l,suggestedLength:c}=Bx({responseHeaders:a,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=l,this._contentLength=c||this._contentLength,this._filename=Hx(a),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new jr("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:Vx(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}class GC{constructor(t,e,n){this._stream=t,this._reader=null,this._loaded=0;const i=t.source;this._withCredentials=i.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!i.disableStream,this._abortController=new AbortController;const r=new Headers(t.headers);r.append("Range",`bytes=${e}-${n-1}`);const a=i.url;fetch(a,Ux(r,this._withCredentials,this._abortController)).then(l=>{const c=Bp(l.url);if(c!==t._responseOrigin)throw new Error(`Expected range response-origin "${c}" to match "${t._responseOrigin}".`);if(!$x(l.status))throw id(l.status,a);this._readCapability.resolve(),this._reader=l.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:Vx(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}const bg=200,Sg=206;function XC(s){const t=s.response;return typeof t!="string"?t:td(t).buffer}class qC{constructor({url:t,httpHeaders:e,withCredentials:n}){I(this,"_responseOrigin",null);this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=zx(this.isHttp,e),this.withCredentials=n||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const e=new XMLHttpRequest,n=this.currXhrId++,i=this.pendingRequests[n]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const[r,a]of this.headers)e.setRequestHeader(r,a);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),i.expectedStatus=Sg):i.expectedStatus=bg,e.responseType="arraybuffer",Wt(t.onError,"Expected `onError` callback to be provided."),e.onerror=()=>{t.onError(e.status)},e.onreadystatechange=this.onStateChange.bind(this,n),e.onprogress=this.onProgress.bind(this,n),i.onHeadersReceived=t.onHeadersReceived,i.onDone=t.onDone,i.onError=t.onError,i.onProgress=t.onProgress,e.send(null),n}onProgress(t,e){var i;const n=this.pendingRequests[t];n&&((i=n.onProgress)==null||i.call(n,e))}onStateChange(t,e){const n=this.pendingRequests[t];if(!n)return;const i=n.xhr;if(i.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),i.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],i.status===0&&this.isHttp){n.onError(i.status);return}const r=i.status||bg;if(!(r===bg&&n.expectedStatus===Sg)&&r!==n.expectedStatus){n.onError(i.status);return}const l=XC(i);if(r===Sg){const c=i.getResponseHeader("Content-Range"),u=/bytes (\d+)-(\d+)\/(\d+)/.exec(c);u?n.onDone({begin:parseInt(u[1],10),chunk:l}):(Y('Missing or invalid "Content-Range" header.'),n.onError(0))}else l?n.onDone({begin:0,chunk:l}):n.onError(i.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class YC{constructor(t){this._source=t,this._manager=new qC(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return Wt(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new KC(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const n=new QC(this._manager,t,e);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class KC{constructor(t,e){this._manager=t,this._url=e.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t);this._manager._responseOrigin=Bp(e.responseURL);const n=e.getAllResponseHeaders(),i=new Headers(n?n.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(l=>{const[c,...u]=l.split(": ");return[c,u.join(": ")]}):[]),{allowRangeRequests:r,suggestedLength:a}=Bx({responseHeaders:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});r&&(this._isRangeSupported=!0),this._contentLength=a||this._contentLength,this._filename=Hx(i),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=id(t,this._url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){var e;(e=this.onProgress)==null||e.call(this,{loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class QC{constructor(t,e,n){this._manager=t,this._url=t.url,this._requestId=t.request({begin:e,end:n,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var e;const t=Bp((e=this._manager.getRequestXhr(this._requestId))==null?void 0:e.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var t;(t=this.onClosed)==null||t.call(this,this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??(this._storedError=id(t,this._url));for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){var e;this.isStreamingSupported||(e=this.onProgress)==null||e.call(this,{loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const ZC=/^[a-z][a-z0-9\-+.]+:/i;function JC(s){if(ZC.test(s))return new URL(s);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(s))}class tk{constructor(t){this.source=t,this.url=JC(t.url),Wt(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return Wt(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new ek(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new nk(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class ek{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const n=process.getBuiltinModule("fs");n.promises.lstat(this._url).then(i=>{this._contentLength=i.size,this._setReadableStream(n.createReadStream(this._url)),this._headersCapability.resolve()},i=>{i.code==="ENOENT"&&(i=id(0,this._url.href)),this._storedError=i,this._headersCapability.reject(i)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new jr("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class nk{constructor(t,e,n){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const i=t.source;this._isStreamingSupported=!i.disableStream;const r=process.getBuiltinModule("fs");this._setReadableStream(r.createReadStream(this._url,{start:e,end:n-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const sk=1e5,kw=30;var Nw,ar,Ke,rh,ah,Ea,oi,oh,lh,Ca,bl,Sl,or,_l,ch,El,ka,uh,hh,Cl,Ta,dh,lr,kl,Di,Wx,Gx,Wm,En,tf,Gm,Xx,qx;const qt=class qt{constructor({textContentSource:t,container:e,viewport:n}){A(this,Di);A(this,ar,Promise.withResolvers());A(this,Ke,null);A(this,rh,!1);A(this,ah,!!((Nw=globalThis.FontInspector)!=null&&Nw.enabled));A(this,Ea,null);A(this,oi,null);A(this,oh,0);A(this,lh,0);A(this,Ca,null);A(this,bl,null);A(this,Sl,0);A(this,or,0);A(this,_l,Object.create(null));A(this,ch,[]);A(this,El,null);A(this,ka,[]);A(this,uh,new WeakMap);A(this,hh,null);var c;if(t instanceof ReadableStream)g(this,El,t);else if(typeof t=="object")g(this,El,new ReadableStream({start(u){u.enqueue(t),u.close()}}));else throw new Error('No "textContentSource" parameter specified.');g(this,Ke,g(this,bl,e)),g(this,or,n.scale*Li.pixelRatio),g(this,Sl,n.rotation),g(this,oi,{div:null,properties:null,ctx:null});const{pageWidth:i,pageHeight:r,pageX:a,pageY:l}=n.rawDims;g(this,hh,[1,0,0,-1,-a,l+r]),g(this,lh,i),g(this,oh,r),x(c=qt,En,Xx).call(c),po(e,n),o(this,ar).promise.finally(()=>{o(qt,kl).delete(this),g(this,oi,null),g(this,_l,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=Ae.platform;return et(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{o(this,Ca).read().then(({value:e,done:n})=>{if(n){o(this,ar).resolve();return}o(this,Ea)??g(this,Ea,e.lang),Object.assign(o(this,_l),e.styles),x(this,Di,Wx).call(this,e.items),t()},o(this,ar).reject)};return g(this,Ca,o(this,El).getReader()),o(qt,kl).add(this),t(),o(this,ar).promise}update({viewport:t,onBefore:e=null}){var r;const n=t.scale*Li.pixelRatio,i=t.rotation;if(i!==o(this,Sl)&&(e==null||e(),g(this,Sl,i),po(o(this,bl),{rotation:i})),n!==o(this,or)){e==null||e(),g(this,or,n);const a={div:null,properties:null,ctx:x(r=qt,En,tf).call(r,o(this,Ea))};for(const l of o(this,ka))a.properties=o(this,uh).get(l),a.div=l,x(this,Di,Wm).call(this,a)}}cancel(){var e;const t=new jr("TextLayer task cancelled.");(e=o(this,Ca))==null||e.cancel(t).catch(()=>{}),g(this,Ca,null),o(this,ar).reject(t)}get textDivs(){return o(this,ka)}get textContentItemsStr(){return o(this,ch)}static cleanup(){if(!(o(this,kl).size>0)){o(this,Cl).clear();for(const{canvas:t}of o(this,Ta).values())t.remove();o(this,Ta).clear()}}};ar=new WeakMap,Ke=new WeakMap,rh=new WeakMap,ah=new WeakMap,Ea=new WeakMap,oi=new WeakMap,oh=new WeakMap,lh=new WeakMap,Ca=new WeakMap,bl=new WeakMap,Sl=new WeakMap,or=new WeakMap,_l=new WeakMap,ch=new WeakMap,El=new WeakMap,ka=new WeakMap,uh=new WeakMap,hh=new WeakMap,Cl=new WeakMap,Ta=new WeakMap,dh=new WeakMap,lr=new WeakMap,kl=new WeakMap,Di=new WeakSet,Wx=function(t){var i,r;if(o(this,rh))return;(r=o(this,oi)).ctx??(r.ctx=x(i=qt,En,tf).call(i,o(this,Ea)));const e=o(this,ka),n=o(this,ch);for(const a of t){if(e.length>sk){Y("Ignoring additional textDivs for performance reasons."),g(this,rh,!0);return}if(a.str===void 0){if(a.type==="beginMarkedContentProps"||a.type==="beginMarkedContent"){const l=o(this,Ke);g(this,Ke,document.createElement("span")),o(this,Ke).classList.add("markedContent"),a.id!==null&&o(this,Ke).setAttribute("id",`${a.id}`),l.append(o(this,Ke))}else a.type==="endMarkedContent"&&g(this,Ke,o(this,Ke).parentNode);continue}n.push(a.str),x(this,Di,Gx).call(this,a)}},Gx=function(t){var y;const e=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};o(this,ka).push(e);const i=U.transform(o(this,hh),t.transform);let r=Math.atan2(i[1],i[0]);const a=o(this,_l)[t.fontName];a.vertical&&(r+=Math.PI/2);let l=o(this,ah)&&a.fontSubstitution||a.fontFamily;l=qt.fontFamilyMap.get(l)||l;const c=Math.hypot(i[2],i[3]),u=c*x(y=qt,En,qx).call(y,l,a,o(this,Ea));let h,d;r===0?(h=i[4],d=i[5]-u):(h=i[4]+u*Math.sin(r),d=i[5]-u*Math.cos(r));const f="calc(var(--total-scale-factor) *",p=e.style;o(this,Ke)===o(this,bl)?(p.left=`${(100*h/o(this,lh)).toFixed(2)}%`,p.top=`${(100*d/o(this,oh)).toFixed(2)}%`):(p.left=`${f}${h.toFixed(2)}px)`,p.top=`${f}${d.toFixed(2)}px)`),p.fontSize=`${f}${(o(qt,lr)*c).toFixed(2)}px)`,p.fontFamily=l,n.fontSize=c,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,o(this,ah)&&(e.dataset.fontName=a.fontSubstitutionLoadedName||t.fontName),r!==0&&(n.angle=r*(180/Math.PI));let w=!1;if(t.str.length>1)w=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const S=Math.abs(t.transform[0]),m=Math.abs(t.transform[3]);S!==m&&Math.max(S,m)/Math.min(S,m)>1.5&&(w=!0)}if(w&&(n.canvasWidth=a.vertical?t.height:t.width),o(this,uh).set(e,n),o(this,oi).div=e,o(this,oi).properties=n,x(this,Di,Wm).call(this,o(this,oi)),n.hasText&&o(this,Ke).append(e),n.hasEOL){const S=document.createElement("br");S.setAttribute("role","presentation"),o(this,Ke).append(S)}},Wm=function(t){var l;const{div:e,properties:n,ctx:i}=t,{style:r}=e;let a="";if(o(qt,lr)>1&&(a=`scale(${1/o(qt,lr)})`),n.canvasWidth!==0&&n.hasText){const{fontFamily:c}=r,{canvasWidth:u,fontSize:h}=n;x(l=qt,En,Gm).call(l,i,h*o(this,or),c);const{width:d}=i.measureText(e.textContent);d>0&&(a=`scaleX(${u*o(this,or)/d}) ${a}`)}n.angle!==0&&(a=`rotate(${n.angle}deg) ${a}`),a.length>0&&(r.transform=a)},En=new WeakSet,tf=function(t=null){let e=o(this,Ta).get(t||(t=""));if(!e){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=t,document.body.append(n),e=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),o(this,Ta).set(t,e),o(this,dh).set(e,{size:0,family:""})}return e},Gm=function(t,e,n){const i=o(this,dh).get(t);e===i.size&&n===i.family||(t.font=`${e}px ${n}`,i.size=e,i.family=n)},Xx=function(){if(o(this,lr)!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),g(this,lr,t.getBoundingClientRect().height),t.remove()},qx=function(t,e,n){const i=o(this,Cl).get(t);if(i)return i;const r=x(this,En,tf).call(this,n);r.canvas.width=r.canvas.height=kw,x(this,En,Gm).call(this,r,kw,t);const a=r.measureText(""),l=a.fontBoundingBoxAscent,c=Math.abs(a.fontBoundingBoxDescent);r.canvas.width=r.canvas.height=0;let u=.8;return l?u=l/(l+c):(Ae.platform.isFirefox&&Y("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),e.ascent?u=e.ascent:e.descent&&(u=1+e.descent)),o(this,Cl).set(t,u),u},A(qt,En),A(qt,Cl,new Map),A(qt,Ta,new Map),A(qt,dh,new WeakMap),A(qt,lr,null),A(qt,kl,new Set);let _u=qt;class Eu{static textContent(t){const e=[],n={items:e,styles:Object.create(null)};function i(r){var c;if(!r)return;let a=null;const l=r.name;if(l==="#text")a=r.value;else if(Eu.shouldBuildText(l))(c=r==null?void 0:r.attributes)!=null&&c.textContent?a=r.attributes.textContent:r.value&&(a=r.value);else return;if(a!==null&&e.push({str:a}),!!r.children)for(const u of r.children)i(u)}return i(t),n}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}const ik=65536,rk=100;function Yx(s={}){typeof s=="string"||s instanceof URL?s={url:s}:(s instanceof ArrayBuffer||ArrayBuffer.isView(s))&&(s={data:s});const t=new qm,{docId:e}=t,n=s.url?ak(s.url):null,i=s.data?ok(s.data):null,r=s.httpHeaders||null,a=s.withCredentials===!0,l=s.password??null,c=s.range instanceof Kx?s.range:null,u=Number.isInteger(s.rangeChunkSize)&&s.rangeChunkSize>0?s.rangeChunkSize:ik;let h=s.worker instanceof Jo?s.worker:null;const d=s.verbosity,f=typeof s.docBaseUrl=="string"&&!zp(s.docBaseUrl)?s.docBaseUrl:null,p=Td(s.cMapUrl),w=s.cMapPacked!==!1,y=s.CMapReaderFactory||(ze?SC:pw),S=Td(s.iccUrl),m=Td(s.standardFontDataUrl),v=s.StandardFontDataFactory||(ze?_C:gw),b=Td(s.wasmUrl),_=s.WasmFactory||(ze?EC:mw),E=s.stopAtErrors!==!0,k=Number.isInteger(s.maxImageSize)&&s.maxImageSize>-1?s.maxImageSize:-1,T=s.isEvalSupported!==!1,P=typeof s.isOffscreenCanvasSupported=="boolean"?s.isOffscreenCanvasSupported:!ze,R=typeof s.isImageDecoderSupported=="boolean"?s.isImageDecoderSupported:!ze&&(Ae.platform.isFirefox||!globalThis.chrome),N=Number.isInteger(s.canvasMaxAreaInBytes)?s.canvasMaxAreaInBytes:-1,L=typeof s.disableFontFace=="boolean"?s.disableFontFace:ze,st=s.fontExtraProperties===!0,rt=s.enableXfa===!0,Q=s.ownerDocument||globalThis.document,ce=s.disableRange===!0,B=s.disableStream===!0,$=s.disableAutoFetch===!0,D=s.pdfBug===!0,W=s.CanvasFactory||(ze?bC:wC),X=s.FilterFactory||(ze?xC:AC),ct=s.enableHWA===!0,tt=s.useWasm!==!1,wt=c?c.length:s.length??NaN,Ge=typeof s.useSystemFonts=="boolean"?s.useSystemFonts:!ze&&!L,Pn=typeof s.useWorkerFetch=="boolean"?s.useWorkerFetch:!!(y===pw&&v===gw&&_===mw&&p&&m&&b&&_o(p,document.baseURI)&&_o(m,document.baseURI)&&_o(b,document.baseURI)),be=null;ZE(d);const vt={canvasFactory:new W({ownerDocument:Q,enableHWA:ct}),filterFactory:new X({docId:e,ownerDocument:Q}),cMapReaderFactory:Pn?null:new y({baseUrl:p,isCompressed:w}),standardFontDataFactory:Pn?null:new v({baseUrl:m}),wasmFactory:Pn?null:new _({baseUrl:b})};if(!h){const vc={verbosity:d,port:zs.workerPort};h=vc.port?Jo.fromPort(vc):new Jo(vc),t._worker=h}const yc={docId:e,apiVersion:"5.2.133",data:i,password:l,disableAutoFetch:$,rangeChunkSize:u,length:wt,docBaseUrl:f,enableXfa:rt,evaluatorOptions:{maxImageSize:k,disableFontFace:L,ignoreErrors:E,isEvalSupported:T,isOffscreenCanvasSupported:P,isImageDecoderSupported:R,canvasMaxAreaInBytes:N,fontExtraProperties:st,useSystemFonts:Ge,useWasm:tt,useWorkerFetch:Pn,cMapUrl:p,iccUrl:S,standardFontDataUrl:m,wasmUrl:b}},Jb={ownerDocument:Q,pdfBug:D,styleElement:be,loadingParams:{disableAutoFetch:$,enableXfa:rt}};return h.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const vc=h.messageHandler.sendWithPromise("GetDocRequest",yc,i?[i.buffer]:null);let $p;if(c)$p=new HC(c,{disableRange:ce,disableStream:B});else if(!i){if(!n)throw new Error("getDocument - no `url` parameter provided.");let xo;if(ze)if(_o(n)){if(typeof fetch>"u"||typeof Response>"u"||!("body"in Response.prototype))throw new Error("getDocument - the Fetch API was disabled in Node.js, see `--no-experimental-fetch`.");xo=Cw}else xo=tk;else xo=_o(n)?Cw:YC;$p=new xo({url:n,length:wt,httpHeaders:r,withCredentials:a,rangeChunkSize:u,disableRange:ce,disableStream:B})}return vc.then(xo=>{if(t.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const W0=new zc(e,xo,h.port),tS=new fk(W0,t,$p,Jb,vt);t._transport=tS,W0.send("Ready",null)})}).catch(t._capability.reject),t}function ak(s){if(s instanceof URL)return s.href;if(typeof s=="string"){if(ze)return s;const t=URL.parse(s,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function ok(s){if(ze&&typeof Buffer<"u"&&s instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength)return s;if(typeof s=="string")return td(s);if(s instanceof ArrayBuffer||ArrayBuffer.isView(s)||typeof s=="object"&&!isNaN(s==null?void 0:s.length))return new Uint8Array(s);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Td(s){if(typeof s!="string")return null;if(s.endsWith("/"))return s;throw new Error(`Invalid factory url: "${s}" must include trailing slash.`)}const Xm=s=>typeof s=="object"&&Number.isInteger(s==null?void 0:s.num)&&s.num>=0&&Number.isInteger(s==null?void 0:s.gen)&&s.gen>=0,lk=s=>typeof s=="object"&&typeof(s==null?void 0:s.name)=="string",ck=oC.bind(null,Xm,lk);var cp;const up=class up{constructor(){I(this,"_capability",Promise.withResolvers());I(this,"_transport",null);I(this,"_worker",null);I(this,"docId",`d${Ie(up,cp)._++}`);I(this,"destroyed",!1);I(this,"onPassword",null);I(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var t,e,n,i;this.destroyed=!0;try{(t=this._worker)!=null&&t.port&&(this._worker._pendingDestroy=!0),await((e=this._transport)==null?void 0:e.destroy())}catch(r){throw(n=this._worker)!=null&&n.port&&delete this._worker._pendingDestroy,r}this._transport=null,(i=this._worker)==null||i.destroy(),this._worker=null}async getData(){return this._transport.getData()}};cp=new WeakMap,A(up,cp,0);let qm=up;class Kx{constructor(t,e,n=!1,i=null){this.length=t,this.initialData=e,this.progressiveDone=n,this.contentDispositionFilename=i,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(t){this._rangeListeners.push(t)}addProgressListener(t){this._progressListeners.push(t)}addProgressiveReadListener(t){this._progressiveReadListeners.push(t)}addProgressiveDoneListener(t){this._progressiveDoneListeners.push(t)}onDataRange(t,e){for(const n of this._rangeListeners)n(t,e)}onDataProgress(t,e){this._readyCapability.promise.then(()=>{for(const n of this._progressListeners)n(t,e)})}onDataProgressiveRead(t){this._readyCapability.promise.then(()=>{for(const e of this._progressiveReadListeners)e(t)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const t of this._progressiveDoneListeners)t()})}transportReady(){this._readyCapability.resolve()}requestDataRange(t,e){mt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class uk{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return et(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var li,Pa,Vc;class hk{constructor(t,e,n,i=!1){A(this,Pa);A(this,li,!1);this._pageIndex=t,this._pageInfo=e,this._transport=n,this._stats=i?new hw:null,this._pdfBug=i,this.commonObjs=n.commonObjs,this.objs=new Qx,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:n=0,offsetY:i=0,dontFlip:r=!1}={}){return new nd({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:n,offsetY:i,dontFlip:r})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return et(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var t;return((t=this._transport._htmlForXfa)==null?void 0:t.children[this._pageIndex])||null}render({canvasContext:t,viewport:e,intent:n="display",annotationMode:i=Ui.ENABLE,transform:r=null,background:a=null,optionalContentConfigPromise:l=null,annotationCanvasMap:c=null,pageColors:u=null,printAnnotationStorage:h=null,isEditing:d=!1}){var _,E;(_=this._stats)==null||_.time("Overall");const f=this._transport.getRenderingIntent(n,i,h,d),{renderingIntent:p,cacheKey:w}=f;g(this,li,!1),l||(l=this._transport.getOptionalContentConfig(p));let y=this._intentStates.get(w);y||(y=Object.create(null),this._intentStates.set(w,y)),y.streamReaderCancelTimeout&&(clearTimeout(y.streamReaderCancelTimeout),y.streamReaderCancelTimeout=null);const S=!!(p&wn.PRINT);y.displayReadyCapability||(y.displayReadyCapability=Promise.withResolvers(),y.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(E=this._stats)==null||E.time("Page Request"),this._pumpOperatorList(f));const m=k=>{var T;y.renderTasks.delete(v),S&&g(this,li,!0),x(this,Pa,Vc).call(this),k?(v.capability.reject(k),this._abortOperatorList({intentState:y,reason:k instanceof Error?k:new Error(k)})):v.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(T=globalThis.Stats)!=null&&T.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},v=new Km({callback:m,params:{canvasContext:t,viewport:e,transform:r,background:a},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:c,operatorList:y.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!S,pdfBug:this._pdfBug,pageColors:u});(y.renderTasks||(y.renderTasks=new Set)).add(v);const b=v.task;return Promise.all([y.displayReadyCapability.promise,l]).then(([k,T])=>{var P;if(this.destroyed){m();return}if((P=this._stats)==null||P.time("Rendering"),!(T.renderingIntent&p))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");v.initializeGraphics({transparency:k,optionalContentConfig:T}),v.operatorListChanged()}).catch(m),b}getOperatorList({intent:t="display",annotationMode:e=Ui.ENABLE,printAnnotationStorage:n=null,isEditing:i=!1}={}){var u;function r(){l.operatorList.lastChunk&&(l.opListReadCapability.resolve(l.operatorList),l.renderTasks.delete(c))}const a=this._transport.getRenderingIntent(t,e,n,i,!0);let l=this._intentStates.get(a.cacheKey);l||(l=Object.create(null),this._intentStates.set(a.cacheKey,l));let c;return l.opListReadCapability||(c=Object.create(null),c.operatorListChanged=r,l.opListReadCapability=Promise.withResolvers(),(l.renderTasks||(l.renderTasks=new Set)).add(c),l.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(u=this._stats)==null||u.time("Page Request"),this._pumpOperatorList(a)),l.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(i){return i.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>Eu.textContent(n));const e=this.streamTextContent(t);return new Promise(function(n,i){function r(){a.read().then(function({value:c,done:u}){if(u){n(l);return}l.lang??(l.lang=c.lang),Object.assign(l.styles,c.styles),l.items.push(...c.items),r()},i)}const a=e.getReader(),l={items:[],styles:Object.create(null),lang:null};r()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const n of e.renderTasks)t.push(n.completed),n.cancel();return this.objs.clear(),g(this,li,!1),Promise.all(t)}cleanup(t=!1){g(this,li,!0);const e=x(this,Pa,Vc).call(this);return t&&e&&this._stats&&(this._stats=new hw),e}_startRenderPage(t,e){var i,r;const n=this._intentStates.get(e);n&&((i=this._stats)==null||i.timeEnd("Page Request"),(r=n.displayReadyCapability)==null||r.resolve(t))}_renderPageChunk(t,e){for(let n=0,i=t.length;n<i;n++)e.operatorList.fnArray.push(t.fnArray[n]),e.operatorList.argsArray.push(t.argsArray[n]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const n of e.renderTasks)n.operatorListChanged();t.lastChunk&&x(this,Pa,Vc).call(this)}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:n,modifiedIds:i}){const{map:r,transfer:a}=n,c=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:r,modifiedIds:i},a).getReader(),u=this._intentStates.get(e);u.streamReader=c;const h=()=>{c.read().then(({value:d,done:f})=>{if(f){u.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(d,u),h())},d=>{if(u.streamReader=null,!this._transport.destroyed){if(u.operatorList){u.operatorList.lastChunk=!0;for(const f of u.renderTasks)f.operatorListChanged();x(this,Pa,Vc).call(this)}if(u.displayReadyCapability)u.displayReadyCapability.reject(d);else if(u.opListReadCapability)u.opListReadCapability.reject(d);else throw d}})};h()}_abortOperatorList({intentState:t,reason:e,force:n=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!n){if(t.renderTasks.size>0)return;if(e instanceof P0){let i=rk;e.extraDelay>0&&e.extraDelay<1e3&&(i+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},i);return}}if(t.streamReader.cancel(new jr(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[i,r]of this._intentStates)if(r===t){this._intentStates.delete(i);break}this.cleanup()}}}get stats(){return this._stats}}li=new WeakMap,Pa=new WeakSet,Vc=function(){if(!o(this,li)||this.destroyed)return!1;for(const{renderTasks:t,operatorList:e}of this._intentStates.values())if(t.size>0||!e.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),g(this,li,!1),!0};var ci,hp;class dk{constructor(){A(this,ci,new Map);A(this,hp,Promise.resolve())}postMessage(t,e){const n={data:structuredClone(t,e?{transfer:e}:null)};o(this,hp).then(()=>{for(const[i]of o(this,ci))i.call(this,n)})}addEventListener(t,e,n=null){let i=null;if((n==null?void 0:n.signal)instanceof AbortSignal){const{signal:r}=n;if(r.aborted){Y("LoopbackPort - cannot use an `aborted` signal.");return}const a=()=>this.removeEventListener(t,e);i=()=>r.removeEventListener("abort",a),r.addEventListener("abort",a)}o(this,ci).set(e,i)}removeEventListener(t,e){const n=o(this,ci).get(e);n==null||n(),o(this,ci).delete(e)}terminate(){for(const[,t]of o(this,ci))t==null||t();o(this,ci).clear()}}ci=new WeakMap,hp=new WeakMap;var dp,Ra,Na,Tl,ef,Pl,nf;const Ct=class Ct{constructor({name:t=null,port:e=null,verbosity:n=JE()}={}){A(this,Tl);var i;if(this.name=t,this.destroyed=!1,this.verbosity=n,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,e){if((i=o(Ct,Na))!=null&&i.has(e))throw new Error("Cannot use more than one PDFWorker per port.");(o(Ct,Na)||g(Ct,Na,new WeakMap)).set(e,this),this._initializeFromPort(e);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(t){this._port=t,this._messageHandler=new zc("main","worker",t),this._messageHandler.on("ready",function(){}),x(this,Tl,ef).call(this)}_initialize(){if(o(Ct,Ra)||o(Ct,Pl,nf)){this._setupFakeWorker();return}let{workerSrc:t}=Ct;try{Ct._isSameOrigin(window.location,t)||(t=Ct._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),n=new zc("main","worker",e),i=()=>{r.abort(),n.destroy(),e.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},r=new AbortController;e.addEventListener("error",()=>{this._webWorker||i()},{signal:r.signal}),n.on("test",l=>{if(r.abort(),this.destroyed||!l){i();return}this._messageHandler=n,this._port=e,this._webWorker=e,x(this,Tl,ef).call(this)}),n.on("ready",l=>{if(r.abort(),this.destroyed){i();return}try{a()}catch{this._setupFakeWorker()}});const a=()=>{const l=new Uint8Array;n.send("test",l,[l.buffer])};a();return}catch{jp("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){o(Ct,Ra)||(Y("Setting up fake worker."),g(Ct,Ra,!0)),Ct._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const e=new dk;this._port=e;const n=`fake${Ie(Ct,dp)._++}`,i=new zc(n+"_worker",n,e);t.setup(i,e),this._messageHandler=new zc(n,n+"_worker",e),x(this,Tl,ef).call(this)}).catch(t=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${t.message}".`))})}destroy(){var t,e,n;this.destroyed=!0,(t=this._webWorker)==null||t.terminate(),this._webWorker=null,(e=o(Ct,Na))==null||e.delete(this._port),this._port=null,(n=this._messageHandler)==null||n.destroy(),this._messageHandler=null}static fromPort(t){var n;if(!(t!=null&&t.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const e=(n=o(this,Na))==null?void 0:n.get(t.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new Ct(t)}static get workerSrc(){if(zs.workerSrc)return zs.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return et(this,"_setupFakeWorkerGlobal",(async()=>o(this,Pl,nf)?o(this,Pl,nf):(await import(this.workerSrc)).WorkerMessageHandler)())}};dp=new WeakMap,Ra=new WeakMap,Na=new WeakMap,Tl=new WeakSet,ef=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},Pl=new WeakSet,nf=function(){var t;try{return((t=globalThis.pdfjsWorker)==null?void 0:t.WorkerMessageHandler)||null}catch{return null}},A(Ct,Pl),A(Ct,dp,0),A(Ct,Ra,!1),A(Ct,Na),ze&&(g(Ct,Ra,!0),zs.workerSrc||(zs.workerSrc="./pdf.worker.mjs")),Ct._isSameOrigin=(t,e)=>{const n=URL.parse(t);if(!(n!=null&&n.origin)||n.origin==="null")return!1;const i=new URL(e,n);return n.origin===i.origin},Ct._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))};let Jo=Ct;var ui,Ns,Rl,Nl,hi,Ma,Wc;class fk{constructor(t,e,n,i,r){A(this,Ma);A(this,ui,new Map);A(this,Ns,new Map);A(this,Rl,new Map);A(this,Nl,new Map);A(this,hi,null);this.messageHandler=t,this.loadingTask=e,this.commonObjs=new Qx,this.fontLoader=new yC({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this.loadingParams=i.loadingParams,this._params=i,this.canvasFactory=r.canvasFactory,this.filterFactory=r.filterFactory,this.cMapReaderFactory=r.cMapReaderFactory,this.standardFontDataFactory=r.standardFontDataFactory,this.wasmFactory=r.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return et(this,"annotationStorage",new L0)}getRenderingIntent(t,e=Ui.ENABLE,n=null,i=!1,r=!1){let a=wn.DISPLAY,l=Fm;switch(t){case"any":a=wn.ANY;break;case"display":break;case"print":a=wn.PRINT;break;default:Y(`getRenderingIntent - invalid intent: ${t}`)}const c=a&wn.PRINT&&n instanceof Px?n:this.annotationStorage;switch(e){case Ui.DISABLE:a+=wn.ANNOTATIONS_DISABLE;break;case Ui.ENABLE:break;case Ui.ENABLE_FORMS:a+=wn.ANNOTATIONS_FORMS;break;case Ui.ENABLE_STORAGE:a+=wn.ANNOTATIONS_STORAGE,l=c.serializable;break;default:Y(`getRenderingIntent - invalid annotationMode: ${e}`)}i&&(a+=wn.IS_EDITING),r&&(a+=wn.OPLIST);const{ids:u,hash:h}=c.modifiedIds,d=[a,l.hash,h];return{renderingIntent:a,cacheKey:d.join("_"),annotationStorageSerializable:l,modifiedIds:u}}destroy(){var n;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(n=o(this,hi))==null||n.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const i of o(this,Ns).values())t.push(i._destroy());o(this,Ns).clear(),o(this,Rl).clear(),o(this,Nl).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{var i,r;this.commonObjs.clear(),this.fontLoader.clear(),o(this,ui).clear(),this.filterFactory.destroy(),_u.cleanup(),(i=this._networkStream)==null||i.cancelAllRequests(new jr("Worker was terminated.")),(r=this.messageHandler)==null||r.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(n,i)=>{Wt(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=r=>{this._lastProgress={loaded:r.loaded,total:r.total}},i.onPull=()=>{this._fullReader.read().then(function({value:r,done:a}){if(a){i.close();return}Wt(r instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(r),1,[r])}).catch(r=>{i.error(r)})},i.onCancel=r=>{this._fullReader.cancel(r),i.ready.catch(a=>{if(!this.destroyed)throw a})}}),t.on("ReaderHeadersReady",async n=>{var l;await this._fullReader.headersReady;const{isStreamingSupported:i,isRangeSupported:r,contentLength:a}=this._fullReader;return(!i||!r)&&(this._lastProgress&&((l=e.onProgress)==null||l.call(e,this._lastProgress)),this._fullReader.onProgress=c=>{var u;(u=e.onProgress)==null||u.call(e,{loaded:c.loaded,total:c.total})}),{isStreamingSupported:i,isRangeSupported:r,contentLength:a}}),t.on("GetRangeReader",(n,i)=>{Wt(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const r=this._networkStream.getRangeReader(n.begin,n.end);if(!r){i.close();return}i.onPull=()=>{r.read().then(function({value:a,done:l}){if(l){i.close();return}Wt(a instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{i.error(a)})},i.onCancel=a=>{r.cancel(a),i.ready.catch(l=>{if(!this.destroyed)throw l})}}),t.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,e._capability.resolve(new uk(n,this))}),t.on("DocException",n=>{e._capability.reject(Xe(n))}),t.on("PasswordRequest",n=>{g(this,hi,Promise.withResolvers());try{if(!e.onPassword)throw Xe(n);const i=r=>{r instanceof Error?o(this,hi).reject(r):o(this,hi).resolve({password:r})};e.onPassword(i,n.code)}catch(i){o(this,hi).reject(i)}return o(this,hi).promise}),t.on("DataLoaded",n=>{var i;(i=e.onProgress)==null||i.call(e,{loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),t.on("StartRenderPage",n=>{if(this.destroyed)return;o(this,Ns).get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),t.on("commonobj",([n,i,r])=>{var a;if(this.destroyed||this.commonObjs.has(n))return null;switch(i){case"Font":if("error"in r){const h=r.error;Y(`Error during font loading: ${h}`),this.commonObjs.resolve(n,h);break}const l=this._params.pdfBug&&((a=globalThis.FontInspector)!=null&&a.enabled)?(h,d)=>globalThis.FontInspector.fontAdded(h,d):null,c=new vC(r,l);this.fontLoader.bind(c).catch(()=>t.sendWithPromise("FontFallback",{id:n})).finally(()=>{!c.fontExtraProperties&&c.data&&(c.data=null),this.commonObjs.resolve(n,c)});break;case"CopyLocalImage":const{imageRef:u}=r;Wt(u,"The imageRef must be defined.");for(const h of o(this,Ns).values())for(const[,d]of h.objs)if((d==null?void 0:d.ref)===u)return d.dataLen?(this.commonObjs.resolve(n,structuredClone(d)),d.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(n,r);break;default:throw new Error(`Got unknown common object type ${i}`)}return null}),t.on("obj",([n,i,r,a])=>{var c;if(this.destroyed)return;const l=o(this,Ns).get(i);if(!l.objs.has(n)){if(l._intentStates.size===0){(c=a==null?void 0:a.bitmap)==null||c.close();return}switch(r){case"Image":case"Pattern":l.objs.resolve(n,a);break;default:throw new Error(`Got unknown object type ${r}`)}}}),t.on("DocProgress",n=>{var i;this.destroyed||(i=e.onProgress)==null||i.call(e,{loaded:n.loaded,total:n.total})}),t.on("FetchBinaryData",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");const i=this[n.type];if(!i)throw new Error(`${n.type} not initialized, see the \`useWorkerFetch\` parameter.`);return i.fetch(n)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var n;this.annotationStorage.size<=0&&Y("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:((n=this._fullReader)==null?void 0:n.filename)??null},e).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,n=o(this,Rl).get(e);if(n)return n;const i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(r=>{if(this.destroyed)throw new Error("Transport destroyed");r.refStr&&o(this,Nl).set(r.refStr,t);const a=new hk(e,r,this,this._params.pdfBug);return o(this,Ns).set(e,a),a});return o(this,Rl).set(e,i),i}getPageIndex(t){return Xm(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return x(this,Ma,Wc).call(this,"GetFieldObjects")}hasJSActions(){return x(this,Ma,Wc).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return x(this,Ma,Wc).call(this,"GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return x(this,Ma,Wc).call(this,"GetOptionalContentConfig").then(e=>new BC(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=o(this,ui).get(t);if(e)return e;const n=this.messageHandler.sendWithPromise(t,null).then(i=>{var r,a;return{info:i[0],metadata:i[1]?new jC(i[1]):null,contentDispositionFilename:((r=this._fullReader)==null?void 0:r.filename)??null,contentLength:((a=this._fullReader)==null?void 0:a.contentLength)??null}});return o(this,ui).set(t,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of o(this,Ns).values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),o(this,ui).clear(),this.filterFactory.destroy(!0),_u.cleanup()}}cachedPageNumber(t){if(!Xm(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return o(this,Nl).get(e)??null}}ui=new WeakMap,Ns=new WeakMap,Rl=new WeakMap,Nl=new WeakMap,hi=new WeakMap,Ma=new WeakSet,Wc=function(t,e=null){const n=o(this,ui).get(t);if(n)return n;const i=this.messageHandler.sendWithPromise(t,e);return o(this,ui).set(t,i),i};const Tc=Symbol("INITIAL_DATA");var cn,fh,Ym;class Qx{constructor(){A(this,fh);A(this,cn,Object.create(null))}get(t,e=null){if(e){const i=x(this,fh,Ym).call(this,t);return i.promise.then(()=>e(i.data)),null}const n=o(this,cn)[t];if(!n||n.data===Tc)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return n.data}has(t){const e=o(this,cn)[t];return!!e&&e.data!==Tc}delete(t){const e=o(this,cn)[t];return!e||e.data===Tc?!1:(delete o(this,cn)[t],!0)}resolve(t,e=null){const n=x(this,fh,Ym).call(this,t);n.data=e,n.resolve()}clear(){var t;for(const e in o(this,cn)){const{data:n}=o(this,cn)[e];(t=n==null?void 0:n.bitmap)==null||t.close()}g(this,cn,Object.create(null))}*[Symbol.iterator](){for(const t in o(this,cn)){const{data:e}=o(this,cn)[t];e!==Tc&&(yield[t,e])}}}cn=new WeakMap,fh=new WeakSet,Ym=function(t){var e;return(e=o(this,cn))[t]||(e[t]={...Promise.withResolvers(),data:Tc})};var cr;class pk{constructor(t){A(this,cr,null);I(this,"onContinue",null);I(this,"onError",null);g(this,cr,t)}get promise(){return o(this,cr).capability.promise}cancel(t=0){o(this,cr).cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=o(this,cr).operatorList;if(!t)return!1;const{annotationCanvasMap:e}=o(this,cr);return t.form||t.canvas&&(e==null?void 0:e.size)>0}}cr=new WeakMap;var ur,Ia;const Zr=class Zr{constructor({callback:t,params:e,objs:n,commonObjs:i,annotationCanvasMap:r,operatorList:a,pageIndex:l,canvasFactory:c,filterFactory:u,useRequestAnimationFrame:h=!1,pdfBug:d=!1,pageColors:f=null}){A(this,ur,null);this.callback=t,this.params=e,this.objs=n,this.commonObjs=i,this.annotationCanvasMap=r,this.operatorListIdx=null,this.operatorList=a,this._pageIndex=l,this.canvasFactory=c,this.filterFactory=u,this._pdfBug=d,this.pageColors=f,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=h===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new pk(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){var l,c;if(this.cancelled)return;if(this._canvas){if(o(Zr,Ia).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");o(Zr,Ia).add(this._canvas)}this._pdfBug&&((l=globalThis.StepperManager)!=null&&l.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:n,viewport:i,transform:r,background:a}=this.params;this.gfx=new Zo(n,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:r,viewport:i,transparency:t,background:a}),this.operatorListIdx=0,this.graphicsReady=!0,(c=this.graphicsReadyCallback)==null||c.call(this)}cancel(t=null,e=0){var n,i,r;this.running=!1,this.cancelled=!0,(n=this.gfx)==null||n.endDrawing(),o(this,ur)&&(window.cancelAnimationFrame(o(this,ur)),g(this,ur,null)),o(Zr,Ia).delete(this._canvas),t||(t=new P0(`Rendering cancelled, page ${this._pageIndex+1}`,e)),this.callback(t),(r=(i=this.task).onError)==null||r.call(i,t)}operatorListChanged(){var t;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(t=this.stepper)==null||t.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?g(this,ur,window.requestAnimationFrame(()=>{g(this,ur,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),o(Zr,Ia).delete(this._canvas),this.callback())))}};ur=new WeakMap,Ia=new WeakMap,A(Zr,Ia,new WeakSet);let Km=Zr;const gk="5.2.133",mk="4f7761353";function Tw(s){return Math.floor(Math.max(0,Math.min(1,s))*255).toString(16).padStart(2,"0")}function Pc(s){return Math.max(0,Math.min(255,255*s))}class Pw{static CMYK_G([t,e,n,i]){return["G",1-Math.min(1,.3*t+.59*n+.11*e+i)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=Pc(t),[t,t,t]}static G_HTML([t]){const e=Tw(t);return`#${e}${e}${e}`}static RGB_G([t,e,n]){return["G",.3*t+.59*e+.11*n]}static RGB_rgb(t){return t.map(Pc)}static RGB_HTML(t){return`#${t.map(Tw).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,n,i]){return["RGB",1-Math.min(1,t+i),1-Math.min(1,n+i),1-Math.min(1,e+i)]}static CMYK_rgb([t,e,n,i]){return[Pc(1-Math.min(1,t+i)),Pc(1-Math.min(1,n+i)),Pc(1-Math.min(1,e+i))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,n]){const i=1-t,r=1-e,a=1-n,l=Math.min(i,r,a);return["CMYK",i,r,a,l]}}class yk{create(t,e,n=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),n||(i.setAttribute("width",`${t}px`),i.setAttribute("height",`${e}px`)),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox",`0 0 ${t} ${e}`),i}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){mt("Abstract method `_createSVG` called.")}}class Kf extends yk{_createSVG(t){return document.createElementNS(Us,t)}}class Zx{static setupStorage(t,e,n,i,r){const a=i.getValue(e,{value:null});switch(n.name){case"textarea":if(a.value!==null&&(t.textContent=a.value),r==="print")break;t.addEventListener("input",l=>{i.setValue(e,{value:l.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(a.value===n.attributes.xfaOn?t.setAttribute("checked",!0):a.value===n.attributes.xfaOff&&t.removeAttribute("checked"),r==="print")break;t.addEventListener("change",l=>{i.setValue(e,{value:l.target.checked?l.target.getAttribute("xfaOn"):l.target.getAttribute("xfaOff")})})}else{if(a.value!==null&&t.setAttribute("value",a.value),r==="print")break;t.addEventListener("input",l=>{i.setValue(e,{value:l.target.value})})}break;case"select":if(a.value!==null){t.setAttribute("value",a.value);for(const l of n.children)l.attributes.value===a.value?l.attributes.selected=!0:l.attributes.hasOwnProperty("selected")&&delete l.attributes.selected}t.addEventListener("input",l=>{const c=l.target.options,u=c.selectedIndex===-1?"":c[c.selectedIndex].value;i.setValue(e,{value:u})});break}}static setAttributes({html:t,element:e,storage:n=null,intent:i,linkService:r}){const{attributes:a}=e,l=t instanceof HTMLAnchorElement;a.type==="radio"&&(a.name=`${a.name}-${i}`);for(const[c,u]of Object.entries(a))if(u!=null)switch(c){case"class":u.length&&t.setAttribute(c,u.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",u);break;case"style":Object.assign(t.style,u);break;case"textContent":t.textContent=u;break;default:(!l||c!=="href"&&c!=="newWindow")&&t.setAttribute(c,u)}l&&r.addLinkAttributes(t,a.href,a.newWindow),n&&a.dataId&&this.setupStorage(t,a.dataId,e,n)}static render(t){var d,f;const e=t.annotationStorage,n=t.linkService,i=t.xfaHtml,r=t.intent||"display",a=document.createElement(i.name);i.attributes&&this.setAttributes({html:a,element:i,intent:r,linkService:n});const l=r!=="richText",c=t.div;if(c.append(a),t.viewport){const p=`matrix(${t.viewport.transform.join(",")})`;c.style.transform=p}l&&c.setAttribute("class","xfaLayer xfaFont");const u=[];if(i.children.length===0){if(i.value){const p=document.createTextNode(i.value);a.append(p),l&&Eu.shouldBuildText(i.name)&&u.push(p)}return{textDivs:u}}const h=[[i,-1,a]];for(;h.length>0;){const[p,w,y]=h.at(-1);if(w+1===p.children.length){h.pop();continue}const S=p.children[++h.at(-1)[1]];if(S===null)continue;const{name:m}=S;if(m==="#text"){const b=document.createTextNode(S.value);u.push(b),y.append(b);continue}const v=(d=S==null?void 0:S.attributes)!=null&&d.xmlns?document.createElementNS(S.attributes.xmlns,m):document.createElement(m);if(y.append(v),S.attributes&&this.setAttributes({html:v,element:S,storage:e,intent:r,linkService:n}),((f=S.children)==null?void 0:f.length)>0)h.push([S,-1,v]);else if(S.value){const b=document.createTextNode(S.value);l&&Eu.shouldBuildText(m)&&u.push(b),v.append(b)}}for(const p of c.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))p.setAttribute("readOnly",!0);return{textDivs:u}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const rd=1e3,vk=9,mo=new WeakSet;class Rw{static create(t){switch(t.data.annotationType){case $t.LINK:return new Jx(t);case $t.TEXT:return new wk(t);case $t.WIDGET:switch(t.data.fieldType){case"Tx":return new Ak(t);case"Btn":return t.data.radioButton?new nb(t):t.data.checkBox?new bk(t):new Sk(t);case"Ch":return new _k(t);case"Sig":return new xk(t)}return new Ao(t);case $t.POPUP:return new Zm(t);case $t.FREETEXT:return new ob(t);case $t.LINE:return new Ck(t);case $t.SQUARE:return new kk(t);case $t.CIRCLE:return new Tk(t);case $t.POLYLINE:return new lb(t);case $t.CARET:return new Rk(t);case $t.INK:return new O0(t);case $t.POLYGON:return new Pk(t);case $t.HIGHLIGHT:return new cb(t);case $t.UNDERLINE:return new Nk(t);case $t.SQUIGGLY:return new Mk(t);case $t.STRIKEOUT:return new Ik(t);case $t.STAMP:return new ub(t);case $t.FILEATTACHMENT:return new Lk(t);default:return new Bt(t)}}}var La,Ml,Il,ph,Qm;const U0=class U0{constructor(t,{isRenderable:e=!1,ignoreBorder:n=!1,createQuadrilaterals:i=!1}={}){A(this,ph);A(this,La,null);A(this,Ml,!1);A(this,Il,null);this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(n)),i&&this._createQuadrilaterals()}static _hasPopupData({titleObj:t,contentsObj:e,richText:n}){return!!(t!=null&&t.str||e!=null&&e.str||n!=null&&n.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return U0._hasPopupData(this.data)}updateEdited(t){var n;if(!this.container)return;o(this,La)||g(this,La,{rect:this.data.rect.slice(0)});const{rect:e}=t;e&&x(this,ph,Qm).call(this,e),(n=o(this,Il))==null||n.popup.updateEdited(t)}resetEdited(){var t;o(this,La)&&(x(this,ph,Qm).call(this,o(this,La).rect),(t=o(this,Il))==null||t.popup.resetEdited(),g(this,La,null))}_createContainer(t){const{data:e,parent:{page:n,viewport:i}}=this,r=document.createElement("section");r.setAttribute("data-annotation-id",e.id),this instanceof Ao||(r.tabIndex=rd);const{style:a}=r;if(a.zIndex=this.parent.zIndex++,e.alternativeText&&(r.title=e.alternativeText),e.noRotate&&r.classList.add("norotate"),!e.rect||this instanceof Zm){const{rotation:y}=e;return!e.hasOwnCanvas&&y!==0&&this.setRotation(y,r),r}const{width:l,height:c}=this;if(!t&&e.borderStyle.width>0){a.borderWidth=`${e.borderStyle.width}px`;const y=e.borderStyle.horizontalCornerRadius,S=e.borderStyle.verticalCornerRadius;if(y>0||S>0){const v=`calc(${y}px * var(--total-scale-factor)) / calc(${S}px * var(--total-scale-factor))`;a.borderRadius=v}else if(this instanceof nb){const v=`calc(${l}px * var(--total-scale-factor)) / calc(${c}px * var(--total-scale-factor))`;a.borderRadius=v}switch(e.borderStyle.style){case So.SOLID:a.borderStyle="solid";break;case So.DASHED:a.borderStyle="dashed";break;case So.BEVELED:Y("Unimplemented border style: beveled");break;case So.INSET:Y("Unimplemented border style: inset");break;case So.UNDERLINE:a.borderBottomStyle="solid";break}const m=e.borderColor||null;m?(g(this,Ml,!0),a.borderColor=U.makeHexColor(m[0]|0,m[1]|0,m[2]|0)):a.borderWidth=0}const u=U.normalizeRect([e.rect[0],n.view[3]-e.rect[1]+n.view[1],e.rect[2],n.view[3]-e.rect[3]+n.view[1]]),{pageWidth:h,pageHeight:d,pageX:f,pageY:p}=i.rawDims;a.left=`${100*(u[0]-f)/h}%`,a.top=`${100*(u[1]-p)/d}%`;const{rotation:w}=e;return e.hasOwnCanvas||w===0?(a.width=`${100*l/h}%`,a.height=`${100*c/d}%`):this.setRotation(w,r),r}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:i}=this.parent.viewport.rawDims;let{width:r,height:a}=this;t%180!==0&&([r,a]=[a,r]),e.style.width=`${100*r/n}%`,e.style.height=`${100*a/i}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,n,i)=>{const r=i.detail[e],a=r[0],l=r.slice(1);i.target.style[n]=Pw[`${a}_HTML`](l),this.annotationStorage.setValue(this.data.id,{[n]:Pw[`${a}_rgb`](l)})};return et(this,"_commonActions",{display:e=>{const{display:n}=e.detail,i=n%2===1;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:i,noPrint:n===1||n===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:n}=e.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const n=e.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(t,e){const n=this._commonActions;for(const i of Object.keys(e.detail)){const r=t[i]||n[i];r==null||r(e)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const n=this._commonActions;for(const[i,r]of Object.entries(e)){const a=n[i];if(a){const l={detail:{[i]:r},target:t};a(l),delete e[i]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,n,i,r]=this.data.rect.map(y=>Math.fround(y));if(t.length===8){const[y,S,m,v]=t.subarray(2,6);if(i===y&&r===S&&e===m&&n===v)return}const{style:a}=this.container;let l;if(o(this,Ml)){const{borderColor:y,borderWidth:S}=a;a.borderWidth=0,l=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${y}" stroke-width="${S}">`],this.container.classList.add("hasBorder")}const c=i-e,u=r-n,{svgFactory:h}=this,d=h.createElement("svg");d.classList.add("quadrilateralsContainer"),d.setAttribute("width",0),d.setAttribute("height",0);const f=h.createElement("defs");d.append(f);const p=h.createElement("clipPath"),w=`clippath_${this.data.id}`;p.setAttribute("id",w),p.setAttribute("clipPathUnits","objectBoundingBox"),f.append(p);for(let y=2,S=t.length;y<S;y+=8){const m=t[y],v=t[y+1],b=t[y+2],_=t[y+3],E=h.createElement("rect"),k=(b-e)/c,T=(r-v)/u,P=(m-b)/c,R=(v-_)/u;E.setAttribute("x",k),E.setAttribute("y",T),E.setAttribute("width",P),E.setAttribute("height",R),p.append(E),l==null||l.push(`<rect vector-effect="non-scaling-stroke" x="${k}" y="${T}" width="${P}" height="${R}"/>`)}o(this,Ml)&&(l.push("</g></svg>')"),a.backgroundImage=l.join("")),this.container.append(d),this.container.style.clipPath=`url(#${w})`}_createPopup(){const{data:t}=this,e=g(this,Il,new Zm({data:{color:t.color,titleObj:t.titleObj,modificationDate:t.modificationDate,contentsObj:t.contentsObj,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(e.render())}render(){mt("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const n=[];if(this._fieldObjects){const i=this._fieldObjects[t];if(i)for(const{page:r,id:a,exportValues:l}of i){if(r===-1||a===e)continue;const c=typeof l=="string"?l:null,u=document.querySelector(`[data-element-id="${a}"]`);if(u&&!mo.has(u)){Y(`_getElementsByName - element not allowed: ${a}`);continue}n.push({id:a,exportValue:c,domElement:u})}return n}for(const i of document.getElementsByName(t)){const{exportValue:r}=i,a=i.getAttribute("data-element-id");a!==e&&mo.has(i)&&n.push({id:a,exportValue:r,domElement:i})}return n}show(){var t;this.container&&(this.container.hidden=!1),(t=this.popup)==null||t.maybeShow()}hide(){var t;this.container&&(this.container.hidden=!0),(t=this.popup)==null||t.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{var n;(n=this.linkService.eventBus)==null||n.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};La=new WeakMap,Ml=new WeakMap,Il=new WeakMap,ph=new WeakSet,Qm=function(t){const{container:{style:e},data:{rect:n,rotation:i},parent:{viewport:{rawDims:{pageWidth:r,pageHeight:a,pageX:l,pageY:c}}}}=this;n==null||n.splice(0,4,...t),e.left=`${100*(t[0]-l)/r}%`,e.top=`${100*(a-t[3]+c)/a}%`,i===0?(e.width=`${100*(t[2]-t[0])/r}%`,e.height=`${100*(t[3]-t[1])/a}%`):this.setRotation(i)};let Bt=U0;var bn,qr,tb,eb;class Jx extends Bt{constructor(e,n=null){super(e,{isRenderable:!0,ignoreBorder:!!(n!=null&&n.ignoreBorder),createQuadrilaterals:!0});A(this,bn);this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:n}=this,i=document.createElement("a");i.setAttribute("data-element-id",e.id);let r=!1;return e.url?(n.addLinkAttributes(i,e.url,e.newWindow),r=!0):e.action?(this._bindNamedAction(i,e.action),r=!0):e.attachment?(x(this,bn,tb).call(this,i,e.attachment,e.attachmentDest),r=!0):e.setOCGState?(x(this,bn,eb).call(this,i,e.setOCGState),r=!0):e.dest?(this._bindLink(i,e.dest),r=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,e),r=!0),e.resetForm?(this._bindResetFormAction(i,e.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(i,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&this.container.append(i),this.container}_bindLink(e,n){e.href=this.linkService.getDestinationHash(n),e.onclick=()=>(n&&this.linkService.goToDestination(n),!1),(n||n==="")&&x(this,bn,qr).call(this)}_bindNamedAction(e,n){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(n),!1),x(this,bn,qr).call(this)}_bindJSAction(e,n){e.href=this.linkService.getAnchorUrl("");const i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(n.actions)){const a=i.get(r);a&&(e[a]=()=>{var l;return(l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n.id,name:r}}),!1})}e.onclick||(e.onclick=()=>!1),x(this,bn,qr).call(this)}_bindResetFormAction(e,n){const i=e.onclick;if(i||(e.href=this.linkService.getAnchorUrl("")),x(this,bn,qr).call(this),!this._fieldObjects){Y('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),i||(e.onclick=()=>!1);return}e.onclick=()=>{var d;i==null||i();const{fields:r,refs:a,include:l}=n,c=[];if(r.length!==0||a.length!==0){const f=new Set(a);for(const p of r){const w=this._fieldObjects[p]||[];for(const{id:y}of w)f.add(y)}for(const p of Object.values(this._fieldObjects))for(const w of p)f.has(w.id)===l&&c.push(w)}else for(const f of Object.values(this._fieldObjects))c.push(...f);const u=this.annotationStorage,h=[];for(const f of c){const{id:p}=f;switch(h.push(p),f.type){case"text":{const y=f.defaultValue||"";u.setValue(p,{value:y});break}case"checkbox":case"radiobutton":{const y=f.defaultValue===f.exportValues;u.setValue(p,{value:y});break}case"combobox":case"listbox":{const y=f.defaultValue||"";u.setValue(p,{value:y});break}default:continue}const w=document.querySelector(`[data-element-id="${p}"]`);if(w){if(!mo.has(w)){Y(`_bindResetFormAction - element not allowed: ${p}`);continue}}else continue;w.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((d=this.linkService.eventBus)==null||d.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:h,name:"ResetForm"}})),!1}}}bn=new WeakSet,qr=function(){this.container.setAttribute("data-internal-link","")},tb=function(e,n,i=null){e.href=this.linkService.getAnchorUrl(""),n.description&&(e.title=n.description),e.onclick=()=>{var r;return(r=this.downloadManager)==null||r.openOrDownloadData(n.content,n.filename,i),!1},x(this,bn,qr).call(this)},eb=function(e,n){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(n),!1),x(this,bn,qr).call(this)};class wk extends Bt{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class Ao extends Bt{render(){return this.container}showElementAndHideCanvas(t){var e;this.data.hasOwnCanvas&&(((e=t.previousSibling)==null?void 0:e.nodeName)==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return Ae.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,n,i,r){n.includes("mouse")?t.addEventListener(n,a=>{var l;(l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:r(a),shift:a.shiftKey,modifier:this._getKeyModifier(a)}})}):t.addEventListener(n,a=>{var l;if(n==="blur"){if(!e.focused||!a.relatedTarget)return;e.focused=!1}else if(n==="focus"){if(e.focused)return;e.focused=!0}r&&((l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:r(a)}}))})}_setEventListeners(t,e,n,i){var r,a,l;for(const[c,u]of n)(u==="Action"||(r=this.data.actions)!=null&&r[u])&&((u==="Focus"||u==="Blur")&&(e||(e={focused:!1})),this._setEventListener(t,e,c,u,i),u==="Focus"&&!((a=this.data.actions)!=null&&a.Blur)?this._setEventListener(t,e,"blur","Blur",null):u==="Blur"&&!((l=this.data.actions)!=null&&l.Focus)&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":U.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||vk,r=t.style;let a;const l=2,c=u=>Math.round(10*u)/10;if(this.data.multiLine){const u=Math.abs(this.data.rect[3]-this.data.rect[1]-l),h=Math.round(u/(mg*i))||1,d=u/h;a=Math.min(i,c(d/mg))}else{const u=Math.abs(this.data.rect[3]-this.data.rect[1]-l);a=Math.min(i,c(u/mg))}r.fontSize=`calc(${a}px * var(--total-scale-factor))`,r.color=U.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(r.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class Ak extends Ao{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,n,i){const r=this.annotationStorage;for(const a of this._getElementsByName(t.name,t.id))a.domElement&&(a.domElement[e]=n),r.setValue(a.id,{[i]:n})}render(){var i,r;const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const a=t.getValue(e,{value:this.data.fieldValue});let l=a.value||"";const c=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;c&&l.length>c&&(l=l.slice(0,c));let u=a.formattedValue||((i=this.data.textContent)==null?void 0:i.join(`
`))||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const h={userValue:l,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=u??l,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type=this.data.password?"password":"text",n.setAttribute("value",u??l),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),mo.add(n),n.setAttribute("data-element-id",e),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=rd,this._setRequired(n,this.data.required),c&&(n.maxLength=c),n.addEventListener("input",f=>{t.setValue(e,{value:f.target.value}),this.setPropertyOnSiblings(n,"value",f.target.value,"value"),h.formattedValue=null}),n.addEventListener("resetform",f=>{const p=this.data.defaultFieldValue??"";n.value=h.userValue=p,h.formattedValue=null});let d=f=>{const{formattedValue:p}=h;p!=null&&(f.target.value=p),f.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",p=>{var y;if(h.focused)return;const{target:w}=p;h.userValue&&(w.value=h.userValue),h.lastCommittedValue=w.value,h.commitKey=1,(y=this.data.actions)!=null&&y.Focus||(h.focused=!0)}),n.addEventListener("updatefromsandbox",p=>{this.showElementAndHideCanvas(p.target);const w={value(y){h.userValue=y.detail.value??"",t.setValue(e,{value:h.userValue.toString()}),y.target.value=h.userValue},formattedValue(y){const{formattedValue:S}=y.detail;h.formattedValue=S,S!=null&&y.target!==document.activeElement&&(y.target.value=S),t.setValue(e,{formattedValue:S})},selRange(y){y.target.setSelectionRange(...y.detail.selRange)},charLimit:y=>{var b;const{charLimit:S}=y.detail,{target:m}=y;if(S===0){m.removeAttribute("maxLength");return}m.setAttribute("maxLength",S);let v=h.userValue;!v||v.length<=S||(v=v.slice(0,S),m.value=h.userValue=v,t.setValue(e,{value:v}),(b=this.linkService.eventBus)==null||b.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:v,willCommit:!0,commitKey:1,selStart:m.selectionStart,selEnd:m.selectionEnd}}))}};this._dispatchEventFromSandbox(w,p)}),n.addEventListener("keydown",p=>{var S;h.commitKey=1;let w=-1;if(p.key==="Escape"?w=0:p.key==="Enter"&&!this.data.multiLine?w=2:p.key==="Tab"&&(h.commitKey=3),w===-1)return;const{value:y}=p.target;h.lastCommittedValue!==y&&(h.lastCommittedValue=y,h.userValue=y,(S=this.linkService.eventBus)==null||S.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:y,willCommit:!0,commitKey:w,selStart:p.target.selectionStart,selEnd:p.target.selectionEnd}}))});const f=d;d=null,n.addEventListener("blur",p=>{var y,S;if(!h.focused||!p.relatedTarget)return;(y=this.data.actions)!=null&&y.Blur||(h.focused=!1);const{value:w}=p.target;h.userValue=w,h.lastCommittedValue!==w&&((S=this.linkService.eventBus)==null||S.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:w,willCommit:!0,commitKey:h.commitKey,selStart:p.target.selectionStart,selEnd:p.target.selectionEnd}})),f(p)}),(r=this.data.actions)!=null&&r.Keystroke&&n.addEventListener("beforeinput",p=>{var E;h.lastCommittedValue=null;const{data:w,target:y}=p,{value:S,selectionStart:m,selectionEnd:v}=y;let b=m,_=v;switch(p.inputType){case"deleteWordBackward":{const k=S.substring(0,m).match(/\w*[^\w]*$/);k&&(b-=k[0].length);break}case"deleteWordForward":{const k=S.substring(m).match(/^[^\w]*\w*/);k&&(_+=k[0].length);break}case"deleteContentBackward":m===v&&(b-=1);break;case"deleteContentForward":m===v&&(_+=1);break}p.preventDefault(),(E=this.linkService.eventBus)==null||E.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:S,change:w||"",willCommit:!1,selStart:b,selEnd:_}})}),this._setEventListeners(n,h,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],p=>p.target.value)}if(d&&n.addEventListener("blur",d),this.data.comb){const p=(this.data.rect[2]-this.data.rect[0])/c;n.classList.add("comb"),n.style.letterSpacing=`calc(${p}px * var(--total-scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class xk extends Ao{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class bk extends Ao{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,n=e.id;let i=t.getValue(n,{value:e.exportValue===e.fieldValue}).value;typeof i=="string"&&(i=i!=="Off",t.setValue(n,{value:i})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const r=document.createElement("input");return mo.add(r),r.setAttribute("data-element-id",n),r.disabled=e.readOnly,this._setRequired(r,this.data.required),r.type="checkbox",r.name=e.fieldName,i&&r.setAttribute("checked",!0),r.setAttribute("exportValue",e.exportValue),r.tabIndex=rd,r.addEventListener("change",a=>{const{name:l,checked:c}=a.target;for(const u of this._getElementsByName(l,n)){const h=c&&u.exportValue===e.exportValue;u.domElement&&(u.domElement.checked=h),t.setValue(u.id,{value:h})}t.setValue(n,{value:c})}),r.addEventListener("resetform",a=>{const l=e.defaultFieldValue||"Off";a.target.checked=l===e.exportValue}),this.enableScripting&&this.hasJSActions&&(r.addEventListener("updatefromsandbox",a=>{const l={value(c){c.target.checked=c.detail.value!=="Off",t.setValue(n,{value:c.target.checked})}};this._dispatchEventFromSandbox(l,a)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class nb extends Ao{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,n=e.id;let i=t.getValue(n,{value:e.fieldValue===e.buttonValue}).value;if(typeof i=="string"&&(i=i!==e.buttonValue,t.setValue(n,{value:i})),i)for(const a of this._getElementsByName(e.fieldName,n))t.setValue(a.id,{value:!1});const r=document.createElement("input");if(mo.add(r),r.setAttribute("data-element-id",n),r.disabled=e.readOnly,this._setRequired(r,this.data.required),r.type="radio",r.name=e.fieldName,i&&r.setAttribute("checked",!0),r.tabIndex=rd,r.addEventListener("change",a=>{const{name:l,checked:c}=a.target;for(const u of this._getElementsByName(l,n))t.setValue(u.id,{value:!1});t.setValue(n,{value:c})}),r.addEventListener("resetform",a=>{const l=e.defaultFieldValue;a.target.checked=l!=null&&l===e.buttonValue}),this.enableScripting&&this.hasJSActions){const a=e.buttonValue;r.addEventListener("updatefromsandbox",l=>{const c={value:u=>{const h=a===u.detail.value;for(const d of this._getElementsByName(u.target.name)){const f=h&&d.id===n;d.domElement&&(d.domElement.checked=f),t.setValue(d.id,{value:f})}}};this._dispatchEventFromSandbox(c,l)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)}return this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class Sk extends Jx{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),t}}class _k extends Ao{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,n=t.getValue(e,{value:this.data.fieldValue}),i=document.createElement("select");mo.add(i),i.setAttribute("data-element-id",e),i.disabled=this.data.readOnly,this._setRequired(i,this.data.required),i.name=this.data.fieldName,i.tabIndex=rd;let r=this.data.combo&&this.data.options.length>0;this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0)),i.addEventListener("resetform",h=>{const d=this.data.defaultFieldValue;for(const f of i.options)f.selected=f.value===d});for(const h of this.data.options){const d=document.createElement("option");d.textContent=h.displayValue,d.value=h.exportValue,n.value.includes(h.exportValue)&&(d.setAttribute("selected",!0),r=!1),i.append(d)}let a=null;if(r){const h=document.createElement("option");h.value=" ",h.setAttribute("hidden",!0),h.setAttribute("selected",!0),i.prepend(h),a=()=>{h.remove(),i.removeEventListener("input",a),a=null},i.addEventListener("input",a)}const l=h=>{const d=h?"value":"textContent",{options:f,multiple:p}=i;return p?Array.prototype.filter.call(f,w=>w.selected).map(w=>w[d]):f.selectedIndex===-1?null:f[f.selectedIndex][d]};let c=l(!1);const u=h=>{const d=h.target.options;return Array.prototype.map.call(d,f=>({displayValue:f.textContent,exportValue:f.value}))};return this.enableScripting&&this.hasJSActions?(i.addEventListener("updatefromsandbox",h=>{const d={value(f){a==null||a();const p=f.detail.value,w=new Set(Array.isArray(p)?p:[p]);for(const y of i.options)y.selected=w.has(y.value);t.setValue(e,{value:l(!0)}),c=l(!1)},multipleSelection(f){i.multiple=!0},remove(f){const p=i.options,w=f.detail.remove;p[w].selected=!1,i.remove(w),p.length>0&&Array.prototype.findIndex.call(p,S=>S.selected)===-1&&(p[0].selected=!0),t.setValue(e,{value:l(!0),items:u(f)}),c=l(!1)},clear(f){for(;i.length!==0;)i.remove(0);t.setValue(e,{value:null,items:[]}),c=l(!1)},insert(f){const{index:p,displayValue:w,exportValue:y}=f.detail.insert,S=i.children[p],m=document.createElement("option");m.textContent=w,m.value=y,S?S.before(m):i.append(m),t.setValue(e,{value:l(!0),items:u(f)}),c=l(!1)},items(f){const{items:p}=f.detail;for(;i.length!==0;)i.remove(0);for(const w of p){const{displayValue:y,exportValue:S}=w,m=document.createElement("option");m.textContent=y,m.value=S,i.append(m)}i.options.length>0&&(i.options[0].selected=!0),t.setValue(e,{value:l(!0),items:u(f)}),c=l(!1)},indices(f){const p=new Set(f.detail.indices);for(const w of f.target.options)w.selected=p.has(w.index);t.setValue(e,{value:l(!0)}),c=l(!1)},editable(f){f.target.disabled=!f.detail.editable}};this._dispatchEventFromSandbox(d,h)}),i.addEventListener("input",h=>{var p;const d=l(!0),f=l(!1);t.setValue(e,{value:d}),h.preventDefault(),(p=this.linkService.eventBus)==null||p.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:c,change:f,changeEx:d,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(i,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],h=>h.target.value)):i.addEventListener("input",function(h){t.setValue(e,{value:l(!0)})}),this.data.combo&&this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class Zm extends Bt{constructor(t){const{data:e,elements:n}=t;super(t,{isRenderable:Bt._hasPopupData(e)}),this.elements=n,this.popup=null}render(){this.container.classList.add("popupAnnotation");const t=this.popup=new Ek({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),e=[];for(const n of this.elements)n.popup=t,n.container.ariaHasPopup="dialog",e.push(n.data.id),n.addHighlightArea();return this.container.setAttribute("aria-controls",e.map(n=>`${T0}${n}`).join(",")),this.container}}var Ll,fp,pp,Dl,Fl,Dt,di,Ol,gh,mh,jl,fi,ts,pi,yh,gi,vh,Da,Fa,yt,sf,Jm,sb,ib,rb,ab,rf,af,ty;class Ek{constructor({container:t,color:e,elements:n,titleObj:i,modificationDate:r,contentsObj:a,richText:l,parent:c,rect:u,parentRect:h,open:d}){A(this,yt);A(this,Ll,x(this,yt,rb).bind(this));A(this,fp,x(this,yt,ty).bind(this));A(this,pp,x(this,yt,af).bind(this));A(this,Dl,x(this,yt,rf).bind(this));A(this,Fl,null);A(this,Dt,null);A(this,di,null);A(this,Ol,null);A(this,gh,null);A(this,mh,null);A(this,jl,null);A(this,fi,!1);A(this,ts,null);A(this,pi,null);A(this,yh,null);A(this,gi,null);A(this,vh,null);A(this,Da,null);A(this,Fa,!1);var f;g(this,Dt,t),g(this,vh,i),g(this,di,a),g(this,gi,l),g(this,mh,c),g(this,Fl,e),g(this,yh,u),g(this,jl,h),g(this,gh,n),g(this,Ol,N0.toDateObject(r)),this.trigger=n.flatMap(p=>p.getElementsToTriggerPopup());for(const p of this.trigger)p.addEventListener("click",o(this,Dl)),p.addEventListener("mouseenter",o(this,pp)),p.addEventListener("mouseleave",o(this,fp)),p.classList.add("popupTriggerArea");for(const p of n)(f=p.container)==null||f.addEventListener("keydown",o(this,Ll));o(this,Dt).hidden=!0,d&&x(this,yt,rf).call(this)}render(){if(o(this,ts))return;const t=g(this,ts,document.createElement("div"));if(t.className="popup",o(this,Fl)){const r=t.style.outlineColor=U.makeHexColor(...o(this,Fl));t.style.backgroundColor=`color-mix(in srgb, ${r} 30%, white)`}const e=document.createElement("span");e.className="header";const n=document.createElement("h1");if(e.append(n),{dir:n.dir,str:n.textContent}=o(this,vh),t.append(e),o(this,Ol)){const r=document.createElement("span");r.classList.add("popupDate"),r.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),r.setAttribute("data-l10n-args",JSON.stringify({dateObj:o(this,Ol).valueOf()})),e.append(r)}const i=o(this,yt,sf);if(i)Zx.render({xfaHtml:i,intent:"richText",div:t}),t.lastChild.classList.add("richText","popupContent");else{const r=this._formatContents(o(this,di));t.append(r)}o(this,Dt).append(t)}_formatContents({str:t,dir:e}){const n=document.createElement("p");n.classList.add("popupContent"),n.dir=e;const i=t.split(/(?:\r\n?|\n)/);for(let r=0,a=i.length;r<a;++r){const l=i[r];n.append(document.createTextNode(l)),r<a-1&&n.append(document.createElement("br"))}return n}updateEdited({rect:t,popupContent:e}){var n;o(this,Da)||g(this,Da,{contentsObj:o(this,di),richText:o(this,gi)}),t&&g(this,pi,null),e&&(g(this,gi,x(this,yt,ib).call(this,e)),g(this,di,null)),(n=o(this,ts))==null||n.remove(),g(this,ts,null)}resetEdited(){var t;o(this,Da)&&({contentsObj:Ie(this,di)._,richText:Ie(this,gi)._}=o(this,Da),g(this,Da,null),(t=o(this,ts))==null||t.remove(),g(this,ts,null),g(this,pi,null))}forceHide(){g(this,Fa,this.isVisible),o(this,Fa)&&(o(this,Dt).hidden=!0)}maybeShow(){o(this,Fa)&&(o(this,ts)||x(this,yt,af).call(this),g(this,Fa,!1),o(this,Dt).hidden=!1)}get isVisible(){return o(this,Dt).hidden===!1}}Ll=new WeakMap,fp=new WeakMap,pp=new WeakMap,Dl=new WeakMap,Fl=new WeakMap,Dt=new WeakMap,di=new WeakMap,Ol=new WeakMap,gh=new WeakMap,mh=new WeakMap,jl=new WeakMap,fi=new WeakMap,ts=new WeakMap,pi=new WeakMap,yh=new WeakMap,gi=new WeakMap,vh=new WeakMap,Da=new WeakMap,Fa=new WeakMap,yt=new WeakSet,sf=function(){const t=o(this,gi),e=o(this,di);return t!=null&&t.str&&(!(e!=null&&e.str)||e.str===t.str)&&o(this,gi).html||null},Jm=function(){var t,e,n;return((n=(e=(t=o(this,yt,sf))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:n.fontSize)||0},sb=function(){var t,e,n;return((n=(e=(t=o(this,yt,sf))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:n.color)||null},ib=function(t){const e=[],n={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},i={style:{color:o(this,yt,sb),fontSize:o(this,yt,Jm)?`calc(${o(this,yt,Jm)}px * var(--total-scale-factor))`:""}};for(const r of t.split(`
`))e.push({name:"span",value:r,attributes:i});return n},rb=function(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&o(this,fi))&&x(this,yt,rf).call(this)},ab=function(){if(o(this,pi)!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:n,pageX:i,pageY:r}}}=o(this,mh);let a=!!o(this,jl),l=a?o(this,jl):o(this,yh);for(const w of o(this,gh))if(!l||U.intersect(w.data.rect,l)!==null){l=w.data.rect,a=!0;break}const c=U.normalizeRect([l[0],t[3]-l[1]+t[1],l[2],t[3]-l[3]+t[1]]),h=a?l[2]-l[0]+5:0,d=c[0]+h,f=c[1];g(this,pi,[100*(d-i)/e,100*(f-r)/n]);const{style:p}=o(this,Dt);p.left=`${o(this,pi)[0]}%`,p.top=`${o(this,pi)[1]}%`},rf=function(){g(this,fi,!o(this,fi)),o(this,fi)?(x(this,yt,af).call(this),o(this,Dt).addEventListener("click",o(this,Dl)),o(this,Dt).addEventListener("keydown",o(this,Ll))):(x(this,yt,ty).call(this),o(this,Dt).removeEventListener("click",o(this,Dl)),o(this,Dt).removeEventListener("keydown",o(this,Ll)))},af=function(){o(this,ts)||this.render(),this.isVisible?o(this,fi)&&o(this,Dt).classList.add("focused"):(x(this,yt,ab).call(this),o(this,Dt).hidden=!1,o(this,Dt).style.zIndex=parseInt(o(this,Dt).style.zIndex)+1e3)},ty=function(){o(this,Dt).classList.remove("focused"),!(o(this,fi)||!this.isVisible)&&(o(this,Dt).hidden=!0,o(this,Dt).style.zIndex=parseInt(o(this,Dt).style.zIndex)-1e3)};class ob extends Bt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=q.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const n=document.createElement("span");n.textContent=e,t.append(n)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var wh;class Ck extends Bt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});A(this,wh,null)}render(){this.container.classList.add("lineAnnotation");const{data:e,width:n,height:i}=this,r=this.svgFactory.create(n,i,!0),a=g(this,wh,this.svgFactory.createElement("svg:line"));return a.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),a.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),a.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),a.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),a.setAttribute("stroke-width",e.borderStyle.width||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),r.append(a),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return o(this,wh)}addHighlightArea(){this.container.classList.add("highlightArea")}}wh=new WeakMap;var Ah;class kk extends Bt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});A(this,Ah,null)}render(){this.container.classList.add("squareAnnotation");const{data:e,width:n,height:i}=this,r=this.svgFactory.create(n,i,!0),a=e.borderStyle.width,l=g(this,Ah,this.svgFactory.createElement("svg:rect"));return l.setAttribute("x",a/2),l.setAttribute("y",a/2),l.setAttribute("width",n-a),l.setAttribute("height",i-a),l.setAttribute("stroke-width",a||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),r.append(l),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return o(this,Ah)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ah=new WeakMap;var xh;class Tk extends Bt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});A(this,xh,null)}render(){this.container.classList.add("circleAnnotation");const{data:e,width:n,height:i}=this,r=this.svgFactory.create(n,i,!0),a=e.borderStyle.width,l=g(this,xh,this.svgFactory.createElement("svg:ellipse"));return l.setAttribute("cx",n/2),l.setAttribute("cy",i/2),l.setAttribute("rx",n/2-a/2),l.setAttribute("ry",i/2-a/2),l.setAttribute("stroke-width",a||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),r.append(l),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return o(this,xh)}addHighlightArea(){this.container.classList.add("highlightArea")}}xh=new WeakMap;var bh;class lb extends Bt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});A(this,bh,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:n,borderStyle:i,popupRef:r},width:a,height:l}=this;if(!n)return this.container;const c=this.svgFactory.create(a,l,!0);let u=[];for(let d=0,f=n.length;d<f;d+=2){const p=n[d]-e[0],w=e[3]-n[d+1];u.push(`${p},${w}`)}u=u.join(" ");const h=g(this,bh,this.svgFactory.createElement(this.svgElementName));return h.setAttribute("points",u),h.setAttribute("stroke-width",i.width||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),c.append(h),this.container.append(c),!r&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return o(this,bh)}addHighlightArea(){this.container.classList.add("highlightArea")}}bh=new WeakMap;class Pk extends lb{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class Rk extends Bt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var Sh,Oa,_h,ey;class O0 extends Bt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});A(this,_h);A(this,Sh,null);A(this,Oa,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?q.HIGHLIGHT:q.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,rotation:n,inkLists:i,borderStyle:r,popupRef:a}}=this,{transform:l,width:c,height:u}=x(this,_h,ey).call(this,n,e),h=this.svgFactory.create(c,u,!0),d=g(this,Sh,this.svgFactory.createElement("svg:g"));h.append(d),d.setAttribute("stroke-width",r.width||1),d.setAttribute("stroke-linecap","round"),d.setAttribute("stroke-linejoin","round"),d.setAttribute("stroke-miterlimit",10),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),d.setAttribute("transform",l);for(let f=0,p=i.length;f<p;f++){const w=this.svgFactory.createElement(this.svgElementName);o(this,Oa).push(w),w.setAttribute("points",i[f].join(",")),d.append(w)}return!a&&this.hasPopupData&&this._createPopup(),this.container.append(h),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);const{thickness:n,points:i,rect:r}=e,a=o(this,Sh);if(n>=0&&a.setAttribute("stroke-width",n||1),i)for(let l=0,c=o(this,Oa).length;l<c;l++)o(this,Oa)[l].setAttribute("points",i[l].join(","));if(r){const{transform:l,width:c,height:u}=x(this,_h,ey).call(this,this.data.rotation,r);a.parentElement.setAttribute("viewBox",`0 0 ${c} ${u}`),a.setAttribute("transform",l)}}getElementsToTriggerPopup(){return o(this,Oa)}addHighlightArea(){this.container.classList.add("highlightArea")}}Sh=new WeakMap,Oa=new WeakMap,_h=new WeakSet,ey=function(e,n){switch(e){case 90:return{transform:`rotate(90) translate(${-n[0]},${n[1]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};case 180:return{transform:`rotate(180) translate(${-n[2]},${n[1]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]};case 270:return{transform:`rotate(270) translate(${-n[2]},${n[3]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};default:return{transform:`translate(${-n[0]},${n[3]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]}}};class cb extends Bt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=q.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class Nk extends Bt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class Mk extends Bt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class Ik extends Bt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class ub extends Bt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=q.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Eh,Ch,ny;class Lk extends Bt{constructor(e){var i;super(e,{isRenderable:!0});A(this,Ch);A(this,Eh,null);const{file:n}=this.data;this.filename=n.filename,this.content=n.content,(i=this.linkService.eventBus)==null||i.dispatch("fileattachmentannotation",{source:this,...n})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:n}=this;let i;n.hasAppearance||n.fillAlpha===0?i=document.createElement("div"):(i=document.createElement("img"),i.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(n.name)?"paperclip":"pushpin"}.svg`,n.fillAlpha&&n.fillAlpha<1&&(i.style=`filter: opacity(${Math.round(n.fillAlpha*100)}%);`)),i.addEventListener("dblclick",x(this,Ch,ny).bind(this)),g(this,Eh,i);const{isMac:r}=Ae.platform;return e.addEventListener("keydown",a=>{a.key==="Enter"&&(r?a.metaKey:a.ctrlKey)&&x(this,Ch,ny).call(this)}),!n.popupRef&&this.hasPopupData?this._createPopup():i.classList.add("popupTriggerArea"),e.append(i),e}getElementsToTriggerPopup(){return o(this,Eh)}addHighlightArea(){this.container.classList.add("highlightArea")}}Eh=new WeakMap,Ch=new WeakSet,ny=function(){var e;(e=this.downloadManager)==null||e.openOrDownloadData(this.content,this.filename)};var kh,ja,hr,Th,$r,iy,ry;const V0=class V0{constructor({div:t,accessibilityManager:e,annotationCanvasMap:n,annotationEditorUIManager:i,page:r,viewport:a,structTreeLayer:l}){A(this,$r);A(this,kh,null);A(this,ja,null);A(this,hr,new Map);A(this,Th,null);this.div=t,g(this,kh,e),g(this,ja,n),g(this,Th,l||null),this.page=r,this.viewport=a,this.zIndex=0,this._annotationEditorUIManager=i}hasEditableAnnotations(){return o(this,hr).size>0}async render(t){var a;const{annotations:e}=t,n=this.div;po(n,this.viewport);const i=new Map,r={data:null,layer:n,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new Kf,annotationStorage:t.annotationStorage||new L0,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const l of e){if(l.noHTML)continue;const c=l.annotationType===$t.POPUP;if(c){const d=i.get(l.id);if(!d)continue;r.elements=d}else if(l.rect[2]===l.rect[0]||l.rect[3]===l.rect[1])continue;r.data=l;const u=Rw.create(r);if(!u.isRenderable)continue;if(!c&&l.popupRef){const d=i.get(l.popupRef);d?d.push(u):i.set(l.popupRef,[u])}const h=u.render();l.hidden&&(h.style.visibility="hidden"),await x(this,$r,iy).call(this,h,l.id),u._isEditable&&(o(this,hr).set(u.data.id,u),(a=this._annotationEditorUIManager)==null||a.renderAnnotationElement(u))}x(this,$r,ry).call(this)}async addLinkAnnotations(t,e){const n={data:null,layer:this.div,linkService:e,svgFactory:new Kf,parent:this};for(const i of t){i.borderStyle||(i.borderStyle=V0._defaultBorderStyle),n.data=i;const r=Rw.create(n);if(!r.isRenderable)continue;const a=r.render();await x(this,$r,iy).call(this,a,i.id)}}update({viewport:t}){const e=this.div;this.viewport=t,po(e,{rotation:t.rotation}),x(this,$r,ry).call(this),e.hidden=!1}getEditableAnnotations(){return Array.from(o(this,hr).values())}getEditableAnnotation(t){return o(this,hr).get(t)}static get _defaultBorderStyle(){return et(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:So.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};kh=new WeakMap,ja=new WeakMap,hr=new WeakMap,Th=new WeakMap,$r=new WeakSet,iy=async function(t,e){var a,l;const n=t.firstChild||t,i=n.id=`${T0}${e}`,r=await((a=o(this,Th))==null?void 0:a.getAriaAttributes(i));if(r)for(const[c,u]of r)n.setAttribute(c,u);this.div.append(t),(l=o(this,kh))==null||l.moveElementInDOM(this.div,t,n,!1)},ry=function(){var e;if(!o(this,ja))return;const t=this.div;for(const[n,i]of o(this,ja)){const r=t.querySelector(`[data-annotation-id="${n}"]`);if(!r)continue;i.className="annotationContent";const{firstChild:a}=r;a?a.nodeName==="CANVAS"?a.replaceWith(i):a.classList.contains("annotationContent")?a.after(i):a.before(i):r.append(i);const l=o(this,hr).get(n);l&&(l._hasNoCanvas?((e=this._annotationEditorUIManager)==null||e.setMissingCanvas(n,r.id,i),l._hasNoCanvas=!1):l.canvas=i)}o(this,ja).clear()};let sy=V0;const Pd=/\r\n?|\n/g;var es,un,Ph,za,hn,Gt,hb,db,fb,of,Pi,lf,cf,pb,oy,gb;const At=class At extends bt{constructor(e){super({...e,name:"freeTextEditor"});A(this,Gt);A(this,es);A(this,un,"");A(this,Ph,`${this.id}-editor`);A(this,za,null);A(this,hn);g(this,es,e.color||At._defaultColor||bt._defaultLineColor),g(this,hn,e.fontSize||At._defaultFontSize)}static get _keyboardManager(){const e=At.prototype,n=a=>a.isEmpty(),i=go.TRANSLATE_SMALL,r=go.TRANSLATE_BIG;return et(this,"_keyboardManager",new sd([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-i,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-r,0],checker:n}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[i,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[r,0],checker:n}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-i],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-r],checker:n}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,i],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,r],checker:n}]]))}static initialize(e,n){bt.initialize(e,n);const i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,n){switch(e){case it.FREETEXT_SIZE:At._defaultFontSize=n;break;case it.FREETEXT_COLOR:At._defaultColor=n;break}}updateParams(e,n){switch(e){case it.FREETEXT_SIZE:x(this,Gt,hb).call(this,n);break;case it.FREETEXT_COLOR:x(this,Gt,db).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[it.FREETEXT_SIZE,At._defaultFontSize],[it.FREETEXT_COLOR,At._defaultColor||bt._defaultLineColor]]}get propertiesToUpdate(){return[[it.FREETEXT_SIZE,o(this,hn)],[it.FREETEXT_COLOR,o(this,es)]]}_translateEmpty(e,n){this._uiManager.translateSelectedEditors(e,n,!0)}getInitialTranslation(){const e=this.parentScale;return[-At._internalPadding*e,-(At._internalPadding+o(this,hn))*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(q.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),g(this,za,new AbortController);const e=this._uiManager.combinedSignal(o(this,za));this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e})}disableEditMode(){var e;this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",o(this,Ph)),this._isDraggable=!0,(e=o(this,za))==null||e.abort(),g(this,za,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){var n;this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),(n=this._initialOptions)!=null&&n.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=o(this,un),n=g(this,un,x(this,Gt,fb).call(this).trimEnd());if(e===n)return;const i=r=>{if(g(this,un,r),!r){this.remove();return}x(this,Gt,cf).call(this),this._uiManager.rebuild(this),x(this,Gt,of).call(this)};this.addCommands({cmd:()=>{i(n)},undo:()=>{i(e)},mustExec:!1}),x(this,Gt,of).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(e){this.enterInEditMode()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){At._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let e,n;(this._isCopy||this.annotationElementId)&&(e=this.x,n=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",o(this,Ph)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:i}=this.editorDiv;if(i.fontSize=`calc(${o(this,hn)}px * var(--total-scale-factor))`,i.color=o(this,es),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),I0(this,this.div,["dblclick","keydown"]),this._isCopy||this.annotationElementId){const[r,a]=this.parentDimensions;if(this.annotationElementId){const{position:l}=this._initialData;let[c,u]=this.getInitialTranslation();[c,u]=this.pageTranslationToScreen(c,u);const[h,d]=this.pageDimensions,[f,p]=this.pageTranslation;let w,y;switch(this.rotation){case 0:w=e+(l[0]-f)/h,y=n+this.height-(l[1]-p)/d;break;case 90:w=e+(l[0]-f)/h,y=n-(l[1]-p)/d,[c,u]=[u,-c];break;case 180:w=e-this.width+(l[0]-f)/h,y=n-(l[1]-p)/d,[c,u]=[-c,-u];break;case 270:w=e+(l[0]-f-this.height*d)/h,y=n+(l[1]-p-this.width*h)/d,[c,u]=[-u,c];break}this.setAt(w*r,y*a,c,u)}else this._moveAfterPaste(e,n);x(this,Gt,cf).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(e){var w,y,S;const n=e.clipboardData||window.clipboardData,{types:i}=n;if(i.length===1&&i[0]==="text/plain")return;e.preventDefault();const r=x(w=At,Pi,oy).call(w,n.getData("text")||"").replaceAll(Pd,`
`);if(!r)return;const a=window.getSelection();if(!a.rangeCount)return;this.editorDiv.normalize(),a.deleteFromDocument();const l=a.getRangeAt(0);if(!r.includes(`
`)){l.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),a.collapseToStart();return}const{startContainer:c,startOffset:u}=l,h=[],d=[];if(c.nodeType===Node.TEXT_NODE){const m=c.parentElement;if(d.push(c.nodeValue.slice(u).replaceAll(Pd,"")),m!==this.editorDiv){let v=h;for(const b of this.editorDiv.childNodes){if(b===m){v=d;continue}v.push(x(y=At,Pi,lf).call(y,b))}}h.push(c.nodeValue.slice(0,u).replaceAll(Pd,""))}else if(c===this.editorDiv){let m=h,v=0;for(const b of this.editorDiv.childNodes)v++===u&&(m=d),m.push(x(S=At,Pi,lf).call(S,b))}g(this,un,`${h.join(`
`)}${r}${d.join(`
`)}`),x(this,Gt,cf).call(this);const f=new Range;let p=Math.sumPrecise(h.map(m=>m.length));for(const{firstChild:m}of this.editorDiv.childNodes)if(m.nodeType===Node.TEXT_NODE){const v=m.nodeValue.length;if(p<=v){f.setStart(m,p),f.setEnd(m,p);break}p-=v}a.removeAllRanges(),a.addRange(f)}get contentDiv(){return this.editorDiv}static async deserialize(e,n,i){var l;let r=null;if(e instanceof ob){const{data:{defaultAppearanceData:{fontSize:c,fontColor:u},rect:h,rotation:d,id:f,popupRef:p},textContent:w,textPosition:y,parent:{page:{pageNumber:S}}}=e;if(!w||w.length===0)return null;r=e={annotationType:q.FREETEXT,color:Array.from(u),fontSize:c,value:w.join(`
`),position:y,pageIndex:S-1,rect:h.slice(0),rotation:d,id:f,deleted:!1,popupRef:p}}const a=await super.deserialize(e,n,i);return g(a,hn,e.fontSize),g(a,es,U.makeHexColor(...e.color)),g(a,un,x(l=At,Pi,oy).call(l,e.value)),a.annotationElementId=e.id||null,a._initialData=r,a}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=At._internalPadding*this.parentScale,i=this.getRect(n,n),r=bt._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:o(this,es)),a={annotationType:q.FREETEXT,color:r,fontSize:o(this,hn),value:x(this,Gt,pb).call(this),pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?(a.isCopy=!0,a):this.annotationElementId&&!x(this,Gt,gb).call(this,a)?null:(a.id=this.annotationElementId,a)}renderAnnotationElement(e){const n=super.renderAnnotationElement(e);if(this.deleted)return n;const{style:i}=n;i.fontSize=`calc(${o(this,hn)}px * var(--total-scale-factor))`,i.color=o(this,es),n.replaceChildren();for(const a of o(this,un).split(`
`)){const l=document.createElement("div");l.append(a?document.createTextNode(a):document.createElement("br")),n.append(l)}const r=At._internalPadding*this.parentScale;return e.updateEdited({rect:this.getRect(r,r),popupContent:o(this,un)}),n}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}};es=new WeakMap,un=new WeakMap,Ph=new WeakMap,za=new WeakMap,hn=new WeakMap,Gt=new WeakSet,hb=function(e){const n=r=>{this.editorDiv.style.fontSize=`calc(${r}px * var(--total-scale-factor))`,this.translate(0,-(r-o(this,hn))*this.parentScale),g(this,hn,r),x(this,Gt,of).call(this)},i=o(this,hn);this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:it.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},db=function(e){const n=r=>{g(this,es,this.editorDiv.style.color=r)},i=o(this,es);this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:it.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},fb=function(){var i;const e=[];this.editorDiv.normalize();let n=null;for(const r of this.editorDiv.childNodes)(n==null?void 0:n.nodeType)===Node.TEXT_NODE&&r.nodeName==="BR"||(e.push(x(i=At,Pi,lf).call(i,r)),n=r);return e.join(`
`)},of=function(){const[e,n]=this.parentDimensions;let i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{const{currentLayer:r,div:a}=this,l=a.style.display,c=a.classList.contains("hidden");a.classList.remove("hidden"),a.style.display="hidden",r.div.append(this.div),i=a.getBoundingClientRect(),a.remove(),a.style.display=l,a.classList.toggle("hidden",c)}this.rotation%180===this.parentRotation%180?(this.width=i.width/e,this.height=i.height/n):(this.width=i.height/e,this.height=i.width/n),this.fixAndSetPosition()},Pi=new WeakSet,lf=function(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(Pd,"")},cf=function(){if(this.editorDiv.replaceChildren(),!!o(this,un))for(const e of o(this,un).split(`
`)){const n=document.createElement("div");n.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(n)}},pb=function(){return o(this,un).replaceAll(" "," ")},oy=function(e){return e.replaceAll(" "," ")},gb=function(e){const{value:n,fontSize:i,color:r,pageIndex:a}=this._initialData;return this._hasBeenMoved||e.value!==n||e.fontSize!==i||e.color.some((l,c)=>l!==r[c])||e.pageIndex!==a},A(At,Pi),I(At,"_freeTextDefaultContent",""),I(At,"_internalPadding",0),I(At,"_defaultColor",null),I(At,"_defaultFontSize",10),I(At,"_type","freetext"),I(At,"_editorType",q.FREETEXT);let ay=At;class j{toSVGPath(){mt("Abstract method `toSVGPath` must be implemented.")}get box(){mt("Abstract getter `box` must be implemented.")}serialize(t,e){mt("Abstract method `serialize` must be implemented.")}static _rescale(t,e,n,i,r,a){a||(a=new Float32Array(t.length));for(let l=0,c=t.length;l<c;l+=2)a[l]=e+t[l]*i,a[l+1]=n+t[l+1]*r;return a}static _rescaleAndSwap(t,e,n,i,r,a){a||(a=new Float32Array(t.length));for(let l=0,c=t.length;l<c;l+=2)a[l]=e+t[l+1]*i,a[l+1]=n+t[l]*r;return a}static _translate(t,e,n,i){i||(i=new Float32Array(t.length));for(let r=0,a=t.length;r<a;r+=2)i[r]=e+t[r],i[r+1]=n+t[r+1];return i}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,e,n,i,r){switch(r){case 90:return[1-e/n,t/i];case 180:return[1-t/n,1-e/i];case 270:return[e/n,1-t/i];default:return[t/n,e/i]}}static _normalizePagePoint(t,e,n){switch(n){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,n,i,r,a){return[(t+5*n)/6,(e+5*i)/6,(5*n+r)/6,(5*i+a)/6,(n+r)/2,(i+a)/2]}}I(j,"PRECISION",1e-4);var dn,ns,zl,Bl,Ms,J,Ba,Ha,Rh,Nh,Hl,$l,dr,Mh,gp,mp,te,Gc,mb,yb,vb,wb,Ab,xb;const qs=class qs{constructor({x:t,y:e},n,i,r,a,l=0){A(this,te);A(this,dn);A(this,ns,[]);A(this,zl);A(this,Bl);A(this,Ms,[]);A(this,J,new Float32Array(18));A(this,Ba);A(this,Ha);A(this,Rh);A(this,Nh);A(this,Hl);A(this,$l);A(this,dr,[]);g(this,dn,n),g(this,$l,r*i),g(this,Bl,a),o(this,J).set([NaN,NaN,NaN,NaN,t,e],6),g(this,zl,l),g(this,Nh,o(qs,Mh)*i),g(this,Rh,o(qs,mp)*i),g(this,Hl,i),o(this,dr).push(t,e)}isEmpty(){return isNaN(o(this,J)[8])}add({x:t,y:e}){var R;g(this,Ba,t),g(this,Ha,e);const[n,i,r,a]=o(this,dn);let[l,c,u,h]=o(this,J).subarray(8,12);const d=t-u,f=e-h,p=Math.hypot(d,f);if(p<o(this,Rh))return!1;const w=p-o(this,Nh),y=w/p,S=y*d,m=y*f;let v=l,b=c;l=u,c=h,u+=S,h+=m,(R=o(this,dr))==null||R.push(t,e);const _=-m/w,E=S/w,k=_*o(this,$l),T=E*o(this,$l);return o(this,J).set(o(this,J).subarray(2,8),0),o(this,J).set([u+k,h+T],4),o(this,J).set(o(this,J).subarray(14,18),12),o(this,J).set([u-k,h-T],16),isNaN(o(this,J)[6])?(o(this,Ms).length===0&&(o(this,J).set([l+k,c+T],2),o(this,Ms).push(NaN,NaN,NaN,NaN,(l+k-n)/r,(c+T-i)/a),o(this,J).set([l-k,c-T],14),o(this,ns).push(NaN,NaN,NaN,NaN,(l-k-n)/r,(c-T-i)/a)),o(this,J).set([v,b,l,c,u,h],6),!this.isEmpty()):(o(this,J).set([v,b,l,c,u,h],6),Math.abs(Math.atan2(b-c,v-l)-Math.atan2(m,S))<Math.PI/2?([l,c,u,h]=o(this,J).subarray(2,6),o(this,Ms).push(NaN,NaN,NaN,NaN,((l+u)/2-n)/r,((c+h)/2-i)/a),[l,c,v,b]=o(this,J).subarray(14,18),o(this,ns).push(NaN,NaN,NaN,NaN,((v+l)/2-n)/r,((b+c)/2-i)/a),!0):([v,b,l,c,u,h]=o(this,J).subarray(0,6),o(this,Ms).push(((v+5*l)/6-n)/r,((b+5*c)/6-i)/a,((5*l+u)/6-n)/r,((5*c+h)/6-i)/a,((l+u)/2-n)/r,((c+h)/2-i)/a),[u,h,l,c,v,b]=o(this,J).subarray(12,18),o(this,ns).push(((v+5*l)/6-n)/r,((b+5*c)/6-i)/a,((5*l+u)/6-n)/r,((5*c+h)/6-i)/a,((l+u)/2-n)/r,((c+h)/2-i)/a),!0))}toSVGPath(){if(this.isEmpty())return"";const t=o(this,Ms),e=o(this,ns);if(isNaN(o(this,J)[6])&&!this.isEmpty())return x(this,te,mb).call(this);const n=[];n.push(`M${t[4]} ${t[5]}`);for(let i=6;i<t.length;i+=6)isNaN(t[i])?n.push(`L${t[i+4]} ${t[i+5]}`):n.push(`C${t[i]} ${t[i+1]} ${t[i+2]} ${t[i+3]} ${t[i+4]} ${t[i+5]}`);x(this,te,vb).call(this,n);for(let i=e.length-6;i>=6;i-=6)isNaN(e[i])?n.push(`L${e[i+4]} ${e[i+5]}`):n.push(`C${e[i]} ${e[i+1]} ${e[i+2]} ${e[i+3]} ${e[i+4]} ${e[i+5]}`);return x(this,te,yb).call(this,n),n.join(" ")}newFreeDrawOutline(t,e,n,i,r,a){return new bb(t,e,n,i,r,a)}getOutlines(){var d;const t=o(this,Ms),e=o(this,ns),n=o(this,J),[i,r,a,l]=o(this,dn),c=new Float32Array((((d=o(this,dr))==null?void 0:d.length)??0)+2);for(let f=0,p=c.length-2;f<p;f+=2)c[f]=(o(this,dr)[f]-i)/a,c[f+1]=(o(this,dr)[f+1]-r)/l;if(c[c.length-2]=(o(this,Ba)-i)/a,c[c.length-1]=(o(this,Ha)-r)/l,isNaN(n[6])&&!this.isEmpty())return x(this,te,wb).call(this,c);const u=new Float32Array(o(this,Ms).length+24+o(this,ns).length);let h=t.length;for(let f=0;f<h;f+=2){if(isNaN(t[f])){u[f]=u[f+1]=NaN;continue}u[f]=t[f],u[f+1]=t[f+1]}h=x(this,te,xb).call(this,u,h);for(let f=e.length-6;f>=6;f-=6)for(let p=0;p<6;p+=2){if(isNaN(e[f+p])){u[h]=u[h+1]=NaN,h+=2;continue}u[h]=e[f+p],u[h+1]=e[f+p+1],h+=2}return x(this,te,Ab).call(this,u,h),this.newFreeDrawOutline(u,c,o(this,dn),o(this,Hl),o(this,zl),o(this,Bl))}};dn=new WeakMap,ns=new WeakMap,zl=new WeakMap,Bl=new WeakMap,Ms=new WeakMap,J=new WeakMap,Ba=new WeakMap,Ha=new WeakMap,Rh=new WeakMap,Nh=new WeakMap,Hl=new WeakMap,$l=new WeakMap,dr=new WeakMap,Mh=new WeakMap,gp=new WeakMap,mp=new WeakMap,te=new WeakSet,Gc=function(){const t=o(this,J).subarray(4,6),e=o(this,J).subarray(16,18),[n,i,r,a]=o(this,dn);return[(o(this,Ba)+(t[0]-e[0])/2-n)/r,(o(this,Ha)+(t[1]-e[1])/2-i)/a,(o(this,Ba)+(e[0]-t[0])/2-n)/r,(o(this,Ha)+(e[1]-t[1])/2-i)/a]},mb=function(){const[t,e,n,i]=o(this,dn),[r,a,l,c]=x(this,te,Gc).call(this);return`M${(o(this,J)[2]-t)/n} ${(o(this,J)[3]-e)/i} L${(o(this,J)[4]-t)/n} ${(o(this,J)[5]-e)/i} L${r} ${a} L${l} ${c} L${(o(this,J)[16]-t)/n} ${(o(this,J)[17]-e)/i} L${(o(this,J)[14]-t)/n} ${(o(this,J)[15]-e)/i} Z`},yb=function(t){const e=o(this,ns);t.push(`L${e[4]} ${e[5]} Z`)},vb=function(t){const[e,n,i,r]=o(this,dn),a=o(this,J).subarray(4,6),l=o(this,J).subarray(16,18),[c,u,h,d]=x(this,te,Gc).call(this);t.push(`L${(a[0]-e)/i} ${(a[1]-n)/r} L${c} ${u} L${h} ${d} L${(l[0]-e)/i} ${(l[1]-n)/r}`)},wb=function(t){const e=o(this,J),[n,i,r,a]=o(this,dn),[l,c,u,h]=x(this,te,Gc).call(this),d=new Float32Array(36);return d.set([NaN,NaN,NaN,NaN,(e[2]-n)/r,(e[3]-i)/a,NaN,NaN,NaN,NaN,(e[4]-n)/r,(e[5]-i)/a,NaN,NaN,NaN,NaN,l,c,NaN,NaN,NaN,NaN,u,h,NaN,NaN,NaN,NaN,(e[16]-n)/r,(e[17]-i)/a,NaN,NaN,NaN,NaN,(e[14]-n)/r,(e[15]-i)/a],0),this.newFreeDrawOutline(d,t,o(this,dn),o(this,Hl),o(this,zl),o(this,Bl))},Ab=function(t,e){const n=o(this,ns);return t.set([NaN,NaN,NaN,NaN,n[4],n[5]],e),e+=6},xb=function(t,e){const n=o(this,J).subarray(4,6),i=o(this,J).subarray(16,18),[r,a,l,c]=o(this,dn),[u,h,d,f]=x(this,te,Gc).call(this);return t.set([NaN,NaN,NaN,NaN,(n[0]-r)/l,(n[1]-a)/c,NaN,NaN,NaN,NaN,u,h,NaN,NaN,NaN,NaN,d,f,NaN,NaN,NaN,NaN,(i[0]-r)/l,(i[1]-a)/c],e),e+=24},A(qs,Mh,8),A(qs,gp,2),A(qs,mp,o(qs,Mh)+o(qs,gp));let Qf=qs;var Ul,$a,mi,Ih,fn,Lh,jt,yp,Sb;class bb extends j{constructor(e,n,i,r,a,l){super();A(this,yp);A(this,Ul);A(this,$a,new Float32Array(4));A(this,mi);A(this,Ih);A(this,fn);A(this,Lh);A(this,jt);g(this,jt,e),g(this,fn,n),g(this,Ul,i),g(this,Lh,r),g(this,mi,a),g(this,Ih,l),this.lastPoint=[NaN,NaN],x(this,yp,Sb).call(this,l);const[c,u,h,d]=o(this,$a);for(let f=0,p=e.length;f<p;f+=2)e[f]=(e[f]-c)/h,e[f+1]=(e[f+1]-u)/d;for(let f=0,p=n.length;f<p;f+=2)n[f]=(n[f]-c)/h,n[f+1]=(n[f+1]-u)/d}toSVGPath(){const e=[`M${o(this,jt)[4]} ${o(this,jt)[5]}`];for(let n=6,i=o(this,jt).length;n<i;n+=6){if(isNaN(o(this,jt)[n])){e.push(`L${o(this,jt)[n+4]} ${o(this,jt)[n+5]}`);continue}e.push(`C${o(this,jt)[n]} ${o(this,jt)[n+1]} ${o(this,jt)[n+2]} ${o(this,jt)[n+3]} ${o(this,jt)[n+4]} ${o(this,jt)[n+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,n,i,r],a){const l=i-e,c=r-n;let u,h;switch(a){case 0:u=j._rescale(o(this,jt),e,r,l,-c),h=j._rescale(o(this,fn),e,r,l,-c);break;case 90:u=j._rescaleAndSwap(o(this,jt),e,n,l,c),h=j._rescaleAndSwap(o(this,fn),e,n,l,c);break;case 180:u=j._rescale(o(this,jt),i,n,-l,c),h=j._rescale(o(this,fn),i,n,-l,c);break;case 270:u=j._rescaleAndSwap(o(this,jt),i,r,-l,-c),h=j._rescaleAndSwap(o(this,fn),i,r,-l,-c);break}return{outline:Array.from(u),points:[Array.from(h)]}}get box(){return o(this,$a)}newOutliner(e,n,i,r,a,l=0){return new Qf(e,n,i,r,a,l)}getNewOutline(e,n){const[i,r,a,l]=o(this,$a),[c,u,h,d]=o(this,Ul),f=a*h,p=l*d,w=i*h+c,y=r*d+u,S=this.newOutliner({x:o(this,fn)[0]*f+w,y:o(this,fn)[1]*p+y},o(this,Ul),o(this,Lh),e,o(this,Ih),n??o(this,mi));for(let m=2;m<o(this,fn).length;m+=2)S.add({x:o(this,fn)[m]*f+w,y:o(this,fn)[m+1]*p+y});return S.getOutlines()}}Ul=new WeakMap,$a=new WeakMap,mi=new WeakMap,Ih=new WeakMap,fn=new WeakMap,Lh=new WeakMap,jt=new WeakMap,yp=new WeakSet,Sb=function(e){const n=o(this,jt);let i=n[4],r=n[5];const a=[i,r,i,r];let l=i,c=r;const u=e?Math.max:Math.min;for(let d=6,f=n.length;d<f;d+=6){const p=n[d+4],w=n[d+5];if(isNaN(n[d]))U.pointBoundingBox(p,w,a),c<w?(l=p,c=w):c===w&&(l=u(l,p));else{const y=[1/0,1/0,-1/0,-1/0];U.bezierBoundingBox(i,r,...n.slice(d,d+6),y),U.rectBoundingBox(...y,a),c<y[3]?(l=y[2],c=y[3]):c===y[3]&&(l=u(l,y[2]))}i=p,r=w}const h=o(this,$a);h[0]=a[0]-o(this,mi),h[1]=a[1]-o(this,mi),h[2]=a[2]-a[0]+2*o(this,mi),h[3]=a[3]-a[1]+2*o(this,mi),this.lastPoint=[l,c]};var Dh,Fh,fr,ss,Ue,_b,uf,Eb,Cb,cy;class ly{constructor(t,e=0,n=0,i=!0){A(this,Ue);A(this,Dh);A(this,Fh);A(this,fr,[]);A(this,ss,[]);const r=[1/0,1/0,-1/0,-1/0],a=10**-4;for(const{x:p,y:w,width:y,height:S}of t){const m=Math.floor((p-e)/a)*a,v=Math.ceil((p+y+e)/a)*a,b=Math.floor((w-e)/a)*a,_=Math.ceil((w+S+e)/a)*a,E=[m,b,_,!0],k=[v,b,_,!1];o(this,fr).push(E,k),U.rectBoundingBox(m,b,v,_,r)}const l=r[2]-r[0]+2*n,c=r[3]-r[1]+2*n,u=r[0]-n,h=r[1]-n,d=o(this,fr).at(i?-1:-2),f=[d[0],d[2]];for(const p of o(this,fr)){const[w,y,S]=p;p[0]=(w-u)/l,p[1]=(y-h)/c,p[2]=(S-h)/c}g(this,Dh,new Float32Array([u,h,l,c])),g(this,Fh,f)}getOutlines(){o(this,fr).sort((e,n)=>e[0]-n[0]||e[1]-n[1]||e[2]-n[2]);const t=[];for(const e of o(this,fr))e[3]?(t.push(...x(this,Ue,cy).call(this,e)),x(this,Ue,Eb).call(this,e)):(x(this,Ue,Cb).call(this,e),t.push(...x(this,Ue,cy).call(this,e)));return x(this,Ue,_b).call(this,t)}}Dh=new WeakMap,Fh=new WeakMap,fr=new WeakMap,ss=new WeakMap,Ue=new WeakSet,_b=function(t){const e=[],n=new Set;for(const a of t){const[l,c,u]=a;e.push([l,c,a],[l,u,a])}e.sort((a,l)=>a[1]-l[1]||a[0]-l[0]);for(let a=0,l=e.length;a<l;a+=2){const c=e[a][2],u=e[a+1][2];c.push(u),u.push(c),n.add(c),n.add(u)}const i=[];let r;for(;n.size>0;){const a=n.values().next().value;let[l,c,u,h,d]=a;n.delete(a);let f=l,p=c;for(r=[l,u],i.push(r);;){let w;if(n.has(h))w=h;else if(n.has(d))w=d;else break;n.delete(w),[l,c,u,h,d]=w,f!==l&&(r.push(f,p,l,p===c?c:u),f=l),p=p===c?u:c}r.push(f,p)}return new Dk(i,o(this,Dh),o(this,Fh))},uf=function(t){const e=o(this,ss);let n=0,i=e.length-1;for(;n<=i;){const r=n+i>>1,a=e[r][0];if(a===t)return r;a<t?n=r+1:i=r-1}return i+1},Eb=function([,t,e]){const n=x(this,Ue,uf).call(this,t);o(this,ss).splice(n,0,[t,e])},Cb=function([,t,e]){const n=x(this,Ue,uf).call(this,t);for(let i=n;i<o(this,ss).length;i++){const[r,a]=o(this,ss)[i];if(r!==t)break;if(r===t&&a===e){o(this,ss).splice(i,1);return}}for(let i=n-1;i>=0;i--){const[r,a]=o(this,ss)[i];if(r!==t)break;if(r===t&&a===e){o(this,ss).splice(i,1);return}}},cy=function(t){const[e,n,i]=t,r=[[e,n,i]],a=x(this,Ue,uf).call(this,i);for(let l=0;l<a;l++){const[c,u]=o(this,ss)[l];for(let h=0,d=r.length;h<d;h++){const[,f,p]=r[h];if(!(u<=f||p<=c)){if(f>=c){if(p>u)r[h][1]=u;else{if(d===1)return[];r.splice(h,1),h--,d--}continue}r[h][2]=c,p>u&&r.push([e,u,p])}}}return r};var Oh,Vl;class Dk extends j{constructor(e,n,i){super();A(this,Oh);A(this,Vl);g(this,Vl,e),g(this,Oh,n),this.lastPoint=i}toSVGPath(){const e=[];for(const n of o(this,Vl)){let[i,r]=n;e.push(`M${i} ${r}`);for(let a=2;a<n.length;a+=2){const l=n[a],c=n[a+1];l===i?(e.push(`V${c}`),r=c):c===r&&(e.push(`H${l}`),i=l)}e.push("Z")}return e.join(" ")}serialize([e,n,i,r],a){const l=[],c=i-e,u=r-n;for(const h of o(this,Vl)){const d=new Array(h.length);for(let f=0;f<h.length;f+=2)d[f]=e+h[f]*c,d[f+1]=r-h[f+1]*u;l.push(d)}return l}get box(){return o(this,Oh)}get classNamesForOutlining(){return["highlightOutline"]}}Oh=new WeakMap,Vl=new WeakMap;class uy extends Qf{newFreeDrawOutline(t,e,n,i,r,a){return new Fk(t,e,n,i,r,a)}}class Fk extends bb{newOutliner(t,e,n,i,r,a=0){return new uy(t,e,n,i,r,a)}}var is,Ua,Wl,Qt,jh,Gl,zh,Bh,pr,rs,Xl,Hh,gt,hy,dy,fy,Yr,kb,ji;const qe=class qe{constructor({editor:t=null,uiManager:e=null}){A(this,gt);A(this,is,null);A(this,Ua,null);A(this,Wl);A(this,Qt,null);A(this,jh,!1);A(this,Gl,!1);A(this,zh,null);A(this,Bh);A(this,pr,null);A(this,rs,null);A(this,Xl);var n;t?(g(this,Gl,!1),g(this,Xl,it.HIGHLIGHT_COLOR),g(this,zh,t)):(g(this,Gl,!0),g(this,Xl,it.HIGHLIGHT_DEFAULT_COLOR)),g(this,rs,(t==null?void 0:t._uiManager)||e),g(this,Bh,o(this,rs)._eventBus),g(this,Wl,(t==null?void 0:t.color)||((n=o(this,rs))==null?void 0:n.highlightColors.values().next().value)||"#FFFF98"),o(qe,Hh)||g(qe,Hh,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return et(this,"_keyboardManager",new sd([[["Escape","mac+Escape"],qe.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],qe.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],qe.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],qe.prototype._moveToPrevious],[["Home","mac+Home"],qe.prototype._moveToBeginning],[["End","mac+End"],qe.prototype._moveToEnd]]))}renderButton(){const t=g(this,is,document.createElement("button"));t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.setAttribute("aria-haspopup",!0);const e=o(this,rs)._signal;t.addEventListener("click",x(this,gt,Yr).bind(this),{signal:e}),t.addEventListener("keydown",x(this,gt,fy).bind(this),{signal:e});const n=g(this,Ua,document.createElement("span"));return n.className="swatch",n.setAttribute("aria-hidden",!0),n.style.backgroundColor=o(this,Wl),t.append(n),t}renderMainDropdown(){const t=g(this,Qt,x(this,gt,hy).call(this));return t.setAttribute("aria-orientation","horizontal"),t.setAttribute("aria-labelledby","highlightColorPickerLabel"),t}_colorSelectFromKeyboard(t){if(t.target===o(this,is)){x(this,gt,Yr).call(this,t);return}const e=t.target.getAttribute("data-color");e&&x(this,gt,dy).call(this,e,t)}_moveToNext(t){var e,n;if(!o(this,gt,ji)){x(this,gt,Yr).call(this,t);return}if(t.target===o(this,is)){(e=o(this,Qt).firstChild)==null||e.focus();return}(n=t.target.nextSibling)==null||n.focus()}_moveToPrevious(t){var e,n;if(t.target===((e=o(this,Qt))==null?void 0:e.firstChild)||t.target===o(this,is)){o(this,gt,ji)&&this._hideDropdownFromKeyboard();return}o(this,gt,ji)||x(this,gt,Yr).call(this,t),(n=t.target.previousSibling)==null||n.focus()}_moveToBeginning(t){var e;if(!o(this,gt,ji)){x(this,gt,Yr).call(this,t);return}(e=o(this,Qt).firstChild)==null||e.focus()}_moveToEnd(t){var e;if(!o(this,gt,ji)){x(this,gt,Yr).call(this,t);return}(e=o(this,Qt).lastChild)==null||e.focus()}hideDropdown(){var t,e;(t=o(this,Qt))==null||t.classList.add("hidden"),(e=o(this,pr))==null||e.abort(),g(this,pr,null)}_hideDropdownFromKeyboard(){var t;if(!o(this,Gl)){if(!o(this,gt,ji)){(t=o(this,zh))==null||t.unselect();return}this.hideDropdown(),o(this,is).focus({preventScroll:!0,focusVisible:o(this,jh)})}}updateColor(t){if(o(this,Ua)&&(o(this,Ua).style.backgroundColor=t),!o(this,Qt))return;const e=o(this,rs).highlightColors.values();for(const n of o(this,Qt).children)n.setAttribute("aria-selected",e.next().value===t)}destroy(){var t,e;(t=o(this,is))==null||t.remove(),g(this,is,null),g(this,Ua,null),(e=o(this,Qt))==null||e.remove(),g(this,Qt,null)}};is=new WeakMap,Ua=new WeakMap,Wl=new WeakMap,Qt=new WeakMap,jh=new WeakMap,Gl=new WeakMap,zh=new WeakMap,Bh=new WeakMap,pr=new WeakMap,rs=new WeakMap,Xl=new WeakMap,Hh=new WeakMap,gt=new WeakSet,hy=function(){const t=document.createElement("div"),e=o(this,rs)._signal;t.addEventListener("contextmenu",gs,{signal:e}),t.className="dropdown",t.role="listbox",t.setAttribute("aria-multiselectable",!1),t.setAttribute("aria-orientation","vertical"),t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[n,i]of o(this,rs).highlightColors){const r=document.createElement("button");r.tabIndex="0",r.role="option",r.setAttribute("data-color",i),r.title=n,r.setAttribute("data-l10n-id",o(qe,Hh)[n]);const a=document.createElement("span");r.append(a),a.className="swatch",a.style.backgroundColor=i,r.setAttribute("aria-selected",i===o(this,Wl)),r.addEventListener("click",x(this,gt,dy).bind(this,i),{signal:e}),t.append(r)}return t.addEventListener("keydown",x(this,gt,fy).bind(this),{signal:e}),t},dy=function(t,e){e.stopPropagation(),o(this,Bh).dispatch("switchannotationeditorparams",{source:this,type:o(this,Xl),value:t})},fy=function(t){qe._keyboardManager.exec(this,t)},Yr=function(t){if(o(this,gt,ji)){this.hideDropdown();return}if(g(this,jh,t.detail===0),o(this,pr)||(g(this,pr,new AbortController),window.addEventListener("pointerdown",x(this,gt,kb).bind(this),{signal:o(this,rs).combinedSignal(o(this,pr))})),o(this,Qt)){o(this,Qt).classList.remove("hidden");return}const e=g(this,Qt,x(this,gt,hy).call(this));o(this,is).append(e)},kb=function(t){var e;(e=o(this,Qt))!=null&&e.contains(t.target)||this.hideDropdown()},ji=function(){return o(this,Qt)&&!o(this,Qt).classList.contains("hidden")},A(qe,Hh,null);let Zf=qe;var ql,$h,yi,Va,Yl,Qe,Uh,Vh,Wa,Dn,pn,fe,Kl,vi,Pe,Ql,Fn,Wh,K,py,hf,Tb,Pb,Rb,gy,Kr,$n,Po,Nb,df,Xc,Mb,Ib,Lb,Db,Fb;const ut=class ut extends bt{constructor(e){super({...e,name:"highlightEditor"});A(this,K);A(this,ql,null);A(this,$h,0);A(this,yi);A(this,Va,null);A(this,Yl,null);A(this,Qe,null);A(this,Uh,null);A(this,Vh,0);A(this,Wa,null);A(this,Dn,null);A(this,pn,null);A(this,fe,!1);A(this,Kl,null);A(this,vi);A(this,Pe,null);A(this,Ql,"");A(this,Fn);A(this,Wh,"");this.color=e.color||ut._defaultColor,g(this,Fn,e.thickness||ut._defaultThickness),g(this,vi,e.opacity||ut._defaultOpacity),g(this,yi,e.boxes||null),g(this,Wh,e.methodOfCreation||""),g(this,Ql,e.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",e.highlightId>-1?(g(this,fe,!0),x(this,K,hf).call(this,e),x(this,K,Kr).call(this)):o(this,yi)&&(g(this,ql,e.anchorNode),g(this,$h,e.anchorOffset),g(this,Uh,e.focusNode),g(this,Vh,e.focusOffset),x(this,K,py).call(this),x(this,K,Kr).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const e=ut.prototype;return et(this,"_keyboardManager",new sd([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:o(this,fe)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:o(this,Fn),methodOfCreation:o(this,Wh)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}static initialize(e,n){var i;bt.initialize(e,n),ut._defaultColor||(ut._defaultColor=((i=n.highlightColors)==null?void 0:i.values().next().value)||"#fff066")}static updateDefaultParams(e,n){switch(e){case it.HIGHLIGHT_DEFAULT_COLOR:ut._defaultColor=n;break;case it.HIGHLIGHT_THICKNESS:ut._defaultThickness=n;break}}translateInPage(e,n){}get toolbarPosition(){return o(this,Kl)}updateParams(e,n){switch(e){case it.HIGHLIGHT_COLOR:x(this,K,Tb).call(this,n);break;case it.HIGHLIGHT_THICKNESS:x(this,K,Pb).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[it.HIGHLIGHT_DEFAULT_COLOR,ut._defaultColor],[it.HIGHLIGHT_THICKNESS,ut._defaultThickness]]}get propertiesToUpdate(){return[[it.HIGHLIGHT_COLOR,this.color||ut._defaultColor],[it.HIGHLIGHT_THICKNESS,o(this,Fn)||ut._defaultThickness],[it.HIGHLIGHT_FREE,o(this,fe)]]}async addEditToolbar(){const e=await super.addEditToolbar();return e?(this._uiManager.highlightColors&&(g(this,Yl,new Zf({editor:this})),e.addColorPicker(o(this,Yl))),e):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(x(this,K,Xc).call(this))}getBaseTranslation(){return[0,0]}getRect(e,n){return super.getRect(e,n,x(this,K,Xc).call(this))}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){x(this,K,gy).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(x(this,K,Kr).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var i;let n=!1;this.parent&&!e?x(this,K,gy).call(this):e&&(x(this,K,Kr).call(this,e),n=!this.parent&&((i=this.div)==null?void 0:i.classList.contains("selectedEditor"))),super.setParent(e),this.show(this._isVisible),n&&this.select()}rotate(e){var r,a,l;const{drawLayer:n}=this.parent;let i;o(this,fe)?(e=(e-this.rotation+360)%360,i=x(r=ut,$n,Po).call(r,o(this,Dn).box,e)):i=x(a=ut,$n,Po).call(a,[this.x,this.y,this.width,this.height],e),n.updateProperties(o(this,pn),{bbox:i,root:{"data-main-rotation":e}}),n.updateProperties(o(this,Pe),{bbox:x(l=ut,$n,Po).call(l,o(this,Qe).box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;const e=super.render();o(this,Ql)&&(e.setAttribute("aria-label",o(this,Ql)),e.setAttribute("role","mark")),o(this,fe)?e.classList.add("free"):this.div.addEventListener("keydown",x(this,K,Nb).bind(this),{signal:this._uiManager._signal});const n=g(this,Wa,document.createElement("div"));e.append(n),n.setAttribute("aria-hidden","true"),n.className="internal",n.style.clipPath=o(this,Va);const[i,r]=this.parentDimensions;return this.setDims(this.width*i,this.height*r),I0(this,o(this,Wa),["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(o(this,Pe),{rootClass:{hovered:!0}})}pointerleave(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(o(this,Pe),{rootClass:{hovered:!1}})}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:x(this,K,df).call(this,!0);break;case 1:case 3:x(this,K,df).call(this,!1);break}}select(){var e;super.select(),o(this,Pe)&&((e=this.parent)==null||e.drawLayer.updateProperties(o(this,Pe),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var e;super.unselect(),o(this,Pe)&&((e=this.parent)==null||e.drawLayer.updateProperties(o(this,Pe),{rootClass:{selected:!1}}),o(this,fe)||x(this,K,df).call(this,!1))}get _mustFixPosition(){return!o(this,fe)}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(o(this,pn),{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(o(this,Pe),{rootClass:{hidden:!e}}))}static startHighlighting(e,n,{target:i,x:r,y:a}){const{x:l,y:c,width:u,height:h}=i.getBoundingClientRect(),d=new AbortController,f=e.combinedSignal(d),p=w=>{d.abort(),x(this,$n,Db).call(this,e,w)};window.addEventListener("blur",p,{signal:f}),window.addEventListener("pointerup",p,{signal:f}),window.addEventListener("pointerdown",Ut,{capture:!0,passive:!1,signal:f}),window.addEventListener("contextmenu",gs,{signal:f}),i.addEventListener("pointermove",x(this,$n,Lb).bind(this,e),{signal:f}),this._freeHighlight=new uy({x:r,y:a},[l,c,u,h],e.scale,this._defaultThickness/2,n,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(e,n,i){var y,S,m,v;let r=null;if(e instanceof cb){const{data:{quadPoints:b,rect:_,rotation:E,id:k,color:T,opacity:P,popupRef:R},parent:{page:{pageNumber:N}}}=e;r=e={annotationType:q.HIGHLIGHT,color:Array.from(T),opacity:P,quadPoints:b,boxes:null,pageIndex:N-1,rect:_.slice(0),rotation:E,id:k,deleted:!1,popupRef:R}}else if(e instanceof O0){const{data:{inkLists:b,rect:_,rotation:E,id:k,color:T,borderStyle:{rawWidth:P},popupRef:R},parent:{page:{pageNumber:N}}}=e;r=e={annotationType:q.HIGHLIGHT,color:Array.from(T),thickness:P,inkLists:b,boxes:null,pageIndex:N-1,rect:_.slice(0),rotation:E,id:k,deleted:!1,popupRef:R}}const{color:a,quadPoints:l,inkLists:c,opacity:u}=e,h=await super.deserialize(e,n,i);h.color=U.makeHexColor(...a),g(h,vi,u||1),c&&g(h,Fn,e.thickness),h.annotationElementId=e.id||null,h._initialData=r;const[d,f]=h.pageDimensions,[p,w]=h.pageTranslation;if(l){const b=g(h,yi,[]);for(let _=0;_<l.length;_+=8)b.push({x:(l[_]-p)/d,y:1-(l[_+1]-w)/f,width:(l[_+2]-l[_])/d,height:(l[_+1]-l[_+5])/f});x(y=h,K,py).call(y),x(S=h,K,Kr).call(S),h.rotate(h.rotation)}else if(c){g(h,fe,!0);const b=c[0],_={x:b[0]-p,y:f-(b[1]-w)},E=new uy(_,[0,0,d,f],1,o(h,Fn)/2,!0,.001);for(let P=0,R=b.length;P<R;P+=2)_.x=b[P]-p,_.y=f-(b[P+1]-w),E.add(_);const{id:k,clipPathId:T}=n.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:h.color,"fill-opacity":h._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:E.toSVGPath()}},!0,!0);x(m=h,K,hf).call(m,{highlightOutlines:E.getOutlines(),highlightId:k,clipPathId:T}),x(v=h,K,Kr).call(v),h.rotate(h.parentRotation)}return h}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const n=this.getRect(0,0),i=bt._colorManager.convert(this.color),r={annotationType:q.HIGHLIGHT,color:i,opacity:o(this,vi),thickness:o(this,Fn),quadPoints:x(this,K,Mb).call(this),outlines:x(this,K,Ib).call(this,n),pageIndex:this.pageIndex,rect:n,rotation:x(this,K,Xc).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!x(this,K,Fb).call(this,r)?null:(r.id=this.annotationElementId,r)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};ql=new WeakMap,$h=new WeakMap,yi=new WeakMap,Va=new WeakMap,Yl=new WeakMap,Qe=new WeakMap,Uh=new WeakMap,Vh=new WeakMap,Wa=new WeakMap,Dn=new WeakMap,pn=new WeakMap,fe=new WeakMap,Kl=new WeakMap,vi=new WeakMap,Pe=new WeakMap,Ql=new WeakMap,Fn=new WeakMap,Wh=new WeakMap,K=new WeakSet,py=function(){const e=new ly(o(this,yi),.001);g(this,Dn,e.getOutlines()),[this.x,this.y,this.width,this.height]=o(this,Dn).box;const n=new ly(o(this,yi),.0025,.001,this._uiManager.direction==="ltr");g(this,Qe,n.getOutlines());const{lastPoint:i}=o(this,Qe);g(this,Kl,[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height])},hf=function({highlightOutlines:e,highlightId:n,clipPathId:i}){var d,f;if(g(this,Dn,e),g(this,Qe,e.getNewOutline(o(this,Fn)/2+1.5,.0025)),n>=0)g(this,pn,n),g(this,Va,i),this.parent.drawLayer.finalizeDraw(n,{bbox:e.box,path:{d:e.toSVGPath()}}),g(this,Pe,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:o(this,Qe).box,path:{d:o(this,Qe).toSVGPath()}},!0));else if(this.parent){const p=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(o(this,pn),{bbox:x(d=ut,$n,Po).call(d,o(this,Dn).box,(p-this.rotation+360)%360),path:{d:e.toSVGPath()}}),this.parent.drawLayer.updateProperties(o(this,Pe),{bbox:x(f=ut,$n,Po).call(f,o(this,Qe).box,p),path:{d:o(this,Qe).toSVGPath()}})}const[a,l,c,u]=e.box;switch(this.rotation){case 0:this.x=a,this.y=l,this.width=c,this.height=u;break;case 90:{const[p,w]=this.parentDimensions;this.x=l,this.y=1-a,this.width=c*w/p,this.height=u*p/w;break}case 180:this.x=1-a,this.y=1-l,this.width=c,this.height=u;break;case 270:{const[p,w]=this.parentDimensions;this.x=1-l,this.y=a,this.width=c*w/p,this.height=u*p/w;break}}const{lastPoint:h}=o(this,Qe);g(this,Kl,[(h[0]-a)/c,(h[1]-l)/u])},Tb=function(e){const n=(a,l)=>{var c,u;this.color=a,g(this,vi,l),(c=this.parent)==null||c.drawLayer.updateProperties(o(this,pn),{root:{fill:a,"fill-opacity":l}}),(u=o(this,Yl))==null||u.updateColor(a)},i=this.color,r=o(this,vi);this.addCommands({cmd:n.bind(this,e,ut._defaultOpacity),undo:n.bind(this,i,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:it.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(e)},!0)},Pb=function(e){const n=o(this,Fn),i=r=>{g(this,Fn,r),x(this,K,Rb).call(this,r)};this.addCommands({cmd:i.bind(this,e),undo:i.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:it.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)},Rb=function(e){if(!o(this,fe))return;x(this,K,hf).call(this,{highlightOutlines:o(this,Dn).getNewOutline(e/2)}),this.fixAndSetPosition();const[n,i]=this.parentDimensions;this.setDims(this.width*n,this.height*i)},gy=function(){o(this,pn)===null||!this.parent||(this.parent.drawLayer.remove(o(this,pn)),g(this,pn,null),this.parent.drawLayer.remove(o(this,Pe)),g(this,Pe,null))},Kr=function(e=this.parent){o(this,pn)===null&&({id:Ie(this,pn)._,clipPathId:Ie(this,Va)._}=e.drawLayer.draw({bbox:o(this,Dn).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":o(this,vi)},rootClass:{highlight:!0,free:o(this,fe)},path:{d:o(this,Dn).toSVGPath()}},!1,!0),g(this,Pe,e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:o(this,fe)},bbox:o(this,Qe).box,path:{d:o(this,Qe).toSVGPath()}},o(this,fe))),o(this,Wa)&&(o(this,Wa).style.clipPath=o(this,Va)))},$n=new WeakSet,Po=function([e,n,i,r],a){switch(a){case 90:return[1-n-r,e,r,i];case 180:return[1-e-i,1-n-r,i,r];case 270:return[n,1-e-i,r,i]}return[e,n,i,r]},Nb=function(e){ut._keyboardManager.exec(this,e)},df=function(e){if(!o(this,ql))return;const n=window.getSelection();e?n.setPosition(o(this,ql),o(this,$h)):n.setPosition(o(this,Uh),o(this,Vh))},Xc=function(){return o(this,fe)?this.rotation:0},Mb=function(){if(o(this,fe))return null;const[e,n]=this.pageDimensions,[i,r]=this.pageTranslation,a=o(this,yi),l=new Float32Array(a.length*8);let c=0;for(const{x:u,y:h,width:d,height:f}of a){const p=u*e+i,w=(1-h)*n+r;l[c]=l[c+4]=p,l[c+1]=l[c+3]=w,l[c+2]=l[c+6]=p+d*e,l[c+5]=l[c+7]=w-f*n,c+=8}return l},Ib=function(e){return o(this,Dn).serialize(e,x(this,K,Xc).call(this))},Lb=function(e,n){this._freeHighlight.add(n)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},Db=function(e,n){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(n,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},Fb=function(e){const{color:n}=this._initialData;return e.color.some((i,r)=>i!==n[r])},A(ut,$n),I(ut,"_defaultColor",null),I(ut,"_defaultOpacity",1),I(ut,"_defaultThickness",12),I(ut,"_type","highlight"),I(ut,"_editorType",q.HIGHLIGHT),I(ut,"_freeHighlightId",-1),I(ut,"_freeHighlight",null),I(ut,"_freeHighlightClipId","");let Jf=ut;var Ga;class Ob{constructor(){A(this,Ga,Object.create(null))}updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(const[e,n]of Object.entries(t))e.startsWith("_")||this.updateProperty(e,n)}updateSVGProperty(t,e){o(this,Ga)[t]=e}toSVGProperties(){const t=o(this,Ga);return g(this,Ga,Object.create(null)),{root:t}}reset(){g(this,Ga,Object.create(null))}updateAll(t=this){this.updateProperties(t)}clone(){mt("Not implemented")}}Ga=new WeakMap;var gn,Zl,se,Xa,qa,gr,mr,yr,Ya,ot,my,yy,vy,qc,jb,ff,Yc,Ro;const H=class H extends bt{constructor(e){super(e);A(this,ot);A(this,gn,null);A(this,Zl);I(this,"_drawId",null);g(this,Zl,e.mustBeCommitted||!1),this._addOutlines(e)}_addOutlines(e){e.drawOutlines&&(x(this,ot,my).call(this,e),x(this,ot,qc).call(this))}static _mergeSVGProperties(e,n){const i=new Set(Object.keys(e));for(const[r,a]of Object.entries(n))i.has(r)?Object.assign(e[r],a):e[r]=a;return e}static getDefaultDrawingOptions(e){mt("Not implemented")}static get typesMap(){mt("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,n){const i=this.typesMap.get(e);i&&this._defaultDrawingOptions.updateProperty(i,n),this._currentParent&&(o(H,se).updateProperty(i,n),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,n){const i=this.constructor.typesMap.get(e);i&&this._updateProperty(e,i,n)}static get defaultPropertiesToUpdate(){const e=[],n=this._defaultDrawingOptions;for(const[i,r]of this.typesMap)e.push([i,n[r]]);return e}get propertiesToUpdate(){const e=[],{_drawingOptions:n}=this;for(const[i,r]of this.constructor.typesMap)e.push([i,n[r]]);return e}_updateProperty(e,n,i){const r=this._drawingOptions,a=r[n],l=c=>{var h;r.updateProperty(n,c);const u=o(this,gn).updateProperty(n,c);u&&x(this,ot,Yc).call(this,u),(h=this.parent)==null||h.drawLayer.updateProperties(this._drawId,r.toSVGProperties())};this.addCommands({cmd:l.bind(this,i),undo:l.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,H._mergeSVGProperties(o(this,gn).getPathResizingSVGProperties(x(this,ot,ff).call(this)),{bbox:x(this,ot,Ro).call(this)}))}_onResized(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,H._mergeSVGProperties(o(this,gn).getPathResizedSVGProperties(x(this,ot,ff).call(this)),{bbox:x(this,ot,Ro).call(this)}))}_onTranslating(e,n){var i;(i=this.parent)==null||i.drawLayer.updateProperties(this._drawId,{bbox:x(this,ot,Ro).call(this)})}_onTranslated(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,H._mergeSVGProperties(o(this,gn).getPathTranslatedSVGProperties(x(this,ot,ff).call(this),this.parentDimensions),{bbox:x(this,ot,Ro).call(this)}))}_onStartDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,o(this,Zl)&&(g(this,Zl,!1),this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){x(this,ot,vy).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(x(this,ot,qc).call(this),x(this,ot,Yc).call(this,o(this,gn).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var i;let n=!1;this.parent&&!e?(this._uiManager.removeShouldRescale(this),x(this,ot,vy).call(this)):e&&(this._uiManager.addShouldRescale(this),x(this,ot,qc).call(this,e),n=!this.parent&&((i=this.div)==null?void 0:i.classList.contains("selectedEditor"))),super.setParent(e),n&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,H._mergeSVGProperties({bbox:x(this,ot,Ro).call(this)},o(this,gn).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&x(this,ot,Yc).call(this,o(this,gn).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let e,n;this._isCopy&&(e=this.x,n=this.y);const i=super.render();i.classList.add("draw");const r=document.createElement("div");i.append(r),r.setAttribute("aria-hidden","true"),r.className="internal";const[a,l]=this.parentDimensions;return this.setDims(this.width*a,this.height*l),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(e,n),i}static createDrawerInstance(e,n,i,r,a){mt("Not implemented")}static startDrawing(e,n,i,r){var S;const{target:a,offsetX:l,offsetY:c,pointerId:u,pointerType:h}=r;if(o(H,mr)&&o(H,mr)!==h)return;const{viewport:{rotation:d}}=e,{width:f,height:p}=a.getBoundingClientRect(),w=g(H,Xa,new AbortController),y=e.combinedSignal(w);if(o(H,gr)||g(H,gr,u),o(H,mr)??g(H,mr,h),window.addEventListener("pointerup",m=>{var v;o(H,gr)===m.pointerId?this._endDraw(m):(v=o(H,yr))==null||v.delete(m.pointerId)},{signal:y}),window.addEventListener("pointercancel",m=>{var v;o(H,gr)===m.pointerId?this._currentParent.endDrawingSession():(v=o(H,yr))==null||v.delete(m.pointerId)},{signal:y}),window.addEventListener("pointerdown",m=>{o(H,mr)===m.pointerType&&((o(H,yr)||g(H,yr,new Set)).add(m.pointerId),o(H,se).isCancellable()&&(o(H,se).removeLastElement(),o(H,se).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:y}),window.addEventListener("contextmenu",gs,{signal:y}),a.addEventListener("pointermove",this._drawMove.bind(this),{signal:y}),a.addEventListener("touchmove",m=>{m.timeStamp===o(H,Ya)&&Ut(m)},{signal:y}),e.toggleDrawing(),(S=n._editorUndoBar)==null||S.hide(),o(H,se)){e.drawLayer.updateProperties(this._currentDrawId,o(H,se).startNew(l,c,f,p,d));return}n.updateUIForDefaultProperties(this),g(H,se,this.createDrawerInstance(l,c,f,p,d)),g(H,qa,this.getDefaultDrawingOptions()),this._currentParent=e,{id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(o(H,qa).toSVGProperties(),o(H,se).defaultSVGProperties),!0,!1)}static _drawMove(e){var a;if(g(H,Ya,-1),!o(H,se))return;const{offsetX:n,offsetY:i,pointerId:r}=e;if(o(H,gr)===r){if(((a=o(H,yr))==null?void 0:a.size)>=1){this._endDraw(e);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,o(H,se).add(n,i)),g(H,Ya,e.timeStamp),Ut(e)}}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,g(H,se,null),g(H,qa,null),g(H,mr,null),g(H,Ya,NaN)),o(H,Xa)&&(o(H,Xa).abort(),g(H,Xa,null),g(H,gr,NaN),g(H,yr,null))}static _endDraw(e){const n=this._currentParent;if(n){if(n.toggleDrawing(!0),this._cleanup(!1),(e==null?void 0:e.target)===n.div&&n.drawLayer.updateProperties(this._currentDrawId,o(H,se).end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){const i=o(H,se),r=this._currentDrawId,a=i.getLastElement();n.addCommands({cmd:()=>{n.drawLayer.updateProperties(r,i.setLastElement(a))},undo:()=>{n.drawLayer.updateProperties(r,i.removeLastElement())},mustExec:!1,type:it.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(e){const n=this._currentParent;if(!n)return null;if(n.toggleDrawing(!0),n.cleanUndoStack(it.DRAW_STEP),!o(H,se).isEmpty()){const{pageDimensions:[i,r],scale:a}=n,l=n.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:o(H,se).getOutlines(i*a,r*a,a,this._INNER_MARGIN),drawingOptions:o(H,qa),mustBeCommitted:!e});return this._cleanup(!0),l}return n.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,n,i,r,a,l){mt("Not implemented")}static async deserialize(e,n,i){var d,f;const{rawDims:{pageWidth:r,pageHeight:a,pageX:l,pageY:c}}=n.viewport,u=this.deserializeDraw(l,c,r,a,this._INNER_MARGIN,e),h=await super.deserialize(e,n,i);return h.createDrawingOptions(e),x(d=h,ot,my).call(d,{drawOutlines:u}),x(f=h,ot,qc).call(f),h.onScaleChanging(),h.rotate(),h}serializeDraw(e){const[n,i]=this.pageTranslation,[r,a]=this.pageDimensions;return o(this,gn).serialize([n,i,r,a],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};gn=new WeakMap,Zl=new WeakMap,se=new WeakMap,Xa=new WeakMap,qa=new WeakMap,gr=new WeakMap,mr=new WeakMap,yr=new WeakMap,Ya=new WeakMap,ot=new WeakSet,my=function({drawOutlines:e,drawId:n,drawingOptions:i}){g(this,gn,e),this._drawingOptions||(this._drawingOptions=i),n>=0?(this._drawId=n,this.parent.drawLayer.finalizeDraw(n,e.defaultProperties)):this._drawId=x(this,ot,yy).call(this,e,this.parent),x(this,ot,Yc).call(this,e.box)},yy=function(e,n){const{id:i}=n.drawLayer.draw(H._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return i},vy=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},qc=function(e=this.parent){if(!(this._drawId!==null&&this.parent===e)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,e.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=x(this,ot,yy).call(this,o(this,gn),e)}},jb=function([e,n,i,r]){const{parentDimensions:[a,l],rotation:c}=this;switch(c){case 90:return[n,1-e,i*(l/a),r*(a/l)];case 180:return[1-e,1-n,i,r];case 270:return[1-n,e,i*(l/a),r*(a/l)];default:return[e,n,i,r]}},ff=function(){const{x:e,y:n,width:i,height:r,parentDimensions:[a,l],rotation:c}=this;switch(c){case 90:return[1-n,e,i*(a/l),r*(l/a)];case 180:return[1-e,1-n,i,r];case 270:return[n,1-e,i*(a/l),r*(l/a)];default:return[e,n,i,r]}},Yc=function(e){if([this.x,this.y,this.width,this.height]=x(this,ot,jb).call(this,e),this.div){this.fixAndSetPosition();const[n,i]=this.parentDimensions;this.setDims(this.width*n,this.height*i)}this._onResized()},Ro=function(){const{x:e,y:n,width:i,height:r,rotation:a,parentRotation:l,parentDimensions:[c,u]}=this;switch((a*4+l)/90){case 1:return[1-n-r,e,r,i];case 2:return[1-e-i,1-n-r,i,r];case 3:return[n,1-e-i,r,i];case 4:return[e,n-i*(c/u),r*(u/c),i*(c/u)];case 5:return[1-n,e,i*(c/u),r*(u/c)];case 6:return[1-e-r*(u/c),1-n,r*(u/c),i*(c/u)];case 7:return[n-i*(c/u),1-e-r*(u/c),i*(c/u),r*(u/c)];case 8:return[e-i,n-r,i,r];case 9:return[1-n,e-i,r,i];case 10:return[1-e,1-n,i,r];case 11:return[n-r,1-e,r,i];case 12:return[e-r*(u/c),n,r*(u/c),i*(c/u)];case 13:return[1-n-i*(c/u),e-r*(u/c),i*(c/u),r*(u/c)];case 14:return[1-e,1-n-i*(c/u),r*(u/c),i*(c/u)];case 15:return[n,1-e,i*(c/u),r*(u/c)];default:return[e,n,i,r]}},I(H,"_currentDrawId",-1),I(H,"_currentParent",null),A(H,se,null),A(H,Xa,null),A(H,qa,null),A(H,gr,NaN),A(H,mr,null),A(H,yr,null),A(H,Ya,NaN),I(H,"_INNER_MARGIN",3);let tp=H;var Is,ie,re,Ka,Jl,Fe,pe,On,Qa,Za,Ja,tc,pf;class Ok{constructor(t,e,n,i,r,a){A(this,tc);A(this,Is,new Float64Array(6));A(this,ie);A(this,re);A(this,Ka);A(this,Jl);A(this,Fe);A(this,pe,"");A(this,On,0);A(this,Qa,new ad);A(this,Za);A(this,Ja);g(this,Za,n),g(this,Ja,i),g(this,Ka,r),g(this,Jl,a),[t,e]=x(this,tc,pf).call(this,t,e);const l=g(this,ie,[NaN,NaN,NaN,NaN,t,e]);g(this,Fe,[t,e]),g(this,re,[{line:l,points:o(this,Fe)}]),o(this,Is).set(l,0)}updateProperty(t,e){t==="stroke-width"&&g(this,Jl,e)}isEmpty(){return!o(this,re)||o(this,re).length===0}isCancellable(){return o(this,Fe).length<=10}add(t,e){[t,e]=x(this,tc,pf).call(this,t,e);const[n,i,r,a]=o(this,Is).subarray(2,6),l=t-r,c=e-a;return Math.hypot(o(this,Za)*l,o(this,Ja)*c)<=2?null:(o(this,Fe).push(t,e),isNaN(n)?(o(this,Is).set([r,a,t,e],2),o(this,ie).push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(o(this,Is)[0])&&o(this,ie).splice(6,6),o(this,Is).set([n,i,r,a,t,e],0),o(this,ie).push(...j.createBezierPoints(n,i,r,a,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){const n=this.add(t,e);return n||(o(this,Fe).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,n,i,r){g(this,Za,n),g(this,Ja,i),g(this,Ka,r),[t,e]=x(this,tc,pf).call(this,t,e);const a=g(this,ie,[NaN,NaN,NaN,NaN,t,e]);g(this,Fe,[t,e]);const l=o(this,re).at(-1);return l&&(l.line=new Float32Array(l.line),l.points=new Float32Array(l.points)),o(this,re).push({line:a,points:o(this,Fe)}),o(this,Is).set(a,0),g(this,On,0),this.toSVGPath(),null}getLastElement(){return o(this,re).at(-1)}setLastElement(t){return o(this,re)?(o(this,re).push(t),g(this,ie,t.line),g(this,Fe,t.points),g(this,On,0),{path:{d:this.toSVGPath()}}):o(this,Qa).setLastElement(t)}removeLastElement(){if(!o(this,re))return o(this,Qa).removeLastElement();o(this,re).pop(),g(this,pe,"");for(let t=0,e=o(this,re).length;t<e;t++){const{line:n,points:i}=o(this,re)[t];g(this,ie,n),g(this,Fe,i),g(this,On,0),this.toSVGPath()}return{path:{d:o(this,pe)}}}toSVGPath(){const t=j.svgRound(o(this,ie)[4]),e=j.svgRound(o(this,ie)[5]);if(o(this,Fe).length===2)return g(this,pe,`${o(this,pe)} M ${t} ${e} Z`),o(this,pe);if(o(this,Fe).length<=6){const i=o(this,pe).lastIndexOf("M");g(this,pe,`${o(this,pe).slice(0,i)} M ${t} ${e}`),g(this,On,6)}if(o(this,Fe).length===4){const i=j.svgRound(o(this,ie)[10]),r=j.svgRound(o(this,ie)[11]);return g(this,pe,`${o(this,pe)} L ${i} ${r}`),g(this,On,12),o(this,pe)}const n=[];o(this,On)===0&&(n.push(`M ${t} ${e}`),g(this,On,6));for(let i=o(this,On),r=o(this,ie).length;i<r;i+=6){const[a,l,c,u,h,d]=o(this,ie).slice(i,i+6).map(j.svgRound);n.push(`C${a} ${l} ${c} ${u} ${h} ${d}`)}return g(this,pe,o(this,pe)+n.join(" ")),g(this,On,o(this,ie).length),o(this,pe)}getOutlines(t,e,n,i){const r=o(this,re).at(-1);return r.line=new Float32Array(r.line),r.points=new Float32Array(r.points),o(this,Qa).build(o(this,re),t,e,n,o(this,Ka),o(this,Jl),i),g(this,Is,null),g(this,ie,null),g(this,re,null),g(this,pe,null),o(this,Qa)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}Is=new WeakMap,ie=new WeakMap,re=new WeakMap,Ka=new WeakMap,Jl=new WeakMap,Fe=new WeakMap,pe=new WeakMap,On=new WeakMap,Qa=new WeakMap,Za=new WeakMap,Ja=new WeakMap,tc=new WeakSet,pf=function(t,e){return j._normalizePoint(t,e,o(this,Za),o(this,Ja),o(this,Ka))};var Oe,Gh,Xh,mn,Ls,Ds,ec,nc,to,ye,Ws,zb,Bb,Hb;class ad extends j{constructor(){super(...arguments);A(this,ye);A(this,Oe);A(this,Gh,0);A(this,Xh);A(this,mn);A(this,Ls);A(this,Ds);A(this,ec);A(this,nc);A(this,to)}build(e,n,i,r,a,l,c){g(this,Ls,n),g(this,Ds,i),g(this,ec,r),g(this,nc,a),g(this,to,l),g(this,Xh,c??0),g(this,mn,e),x(this,ye,Bb).call(this)}get thickness(){return o(this,to)}setLastElement(e){return o(this,mn).push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return o(this,mn).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const e=[];for(const{line:n}of o(this,mn)){if(e.push(`M${j.svgRound(n[4])} ${j.svgRound(n[5])}`),n.length===6){e.push("Z");continue}if(n.length===12&&isNaN(n[6])){e.push(`L${j.svgRound(n[10])} ${j.svgRound(n[11])}`);continue}for(let i=6,r=n.length;i<r;i+=6){const[a,l,c,u,h,d]=n.subarray(i,i+6).map(j.svgRound);e.push(`C${a} ${l} ${c} ${u} ${h} ${d}`)}}return e.join("")}serialize([e,n,i,r],a){const l=[],c=[],[u,h,d,f]=x(this,ye,zb).call(this);let p,w,y,S,m,v,b,_,E;switch(o(this,nc)){case 0:E=j._rescale,p=e,w=n+r,y=i,S=-r,m=e+u*i,v=n+(1-h-f)*r,b=e+(u+d)*i,_=n+(1-h)*r;break;case 90:E=j._rescaleAndSwap,p=e,w=n,y=i,S=r,m=e+h*i,v=n+u*r,b=e+(h+f)*i,_=n+(u+d)*r;break;case 180:E=j._rescale,p=e+i,w=n,y=-i,S=r,m=e+(1-u-d)*i,v=n+h*r,b=e+(1-u)*i,_=n+(h+f)*r;break;case 270:E=j._rescaleAndSwap,p=e+i,w=n+r,y=-i,S=-r,m=e+(1-h-f)*i,v=n+(1-u-d)*r,b=e+(1-h)*i,_=n+(1-u)*r;break}for(const{line:k,points:T}of o(this,mn))l.push(E(k,p,w,y,S,a?new Array(k.length):null)),c.push(E(T,p,w,y,S,a?new Array(T.length):null));return{lines:l,points:c,rect:[m,v,b,_]}}static deserialize(e,n,i,r,a,{paths:{lines:l,points:c},rotation:u,thickness:h}){const d=[];let f,p,w,y,S;switch(u){case 0:S=j._rescale,f=-e/i,p=n/r+1,w=1/i,y=-1/r;break;case 90:S=j._rescaleAndSwap,f=-n/r,p=-e/i,w=1/r,y=1/i;break;case 180:S=j._rescale,f=e/i+1,p=-n/r,w=-1/i,y=1/r;break;case 270:S=j._rescaleAndSwap,f=n/r+1,p=e/i+1,w=-1/r,y=-1/i;break}if(!l){l=[];for(const v of c){const b=v.length;if(b===2){l.push(new Float32Array([NaN,NaN,NaN,NaN,v[0],v[1]]));continue}if(b===4){l.push(new Float32Array([NaN,NaN,NaN,NaN,v[0],v[1],NaN,NaN,NaN,NaN,v[2],v[3]]));continue}const _=new Float32Array(3*(b-2));l.push(_);let[E,k,T,P]=v.subarray(0,4);_.set([NaN,NaN,NaN,NaN,E,k],0);for(let R=4;R<b;R+=2){const N=v[R],L=v[R+1];_.set(j.createBezierPoints(E,k,T,P,N,L),(R-2)*3),[E,k,T,P]=[T,P,N,L]}}}for(let v=0,b=l.length;v<b;v++)d.push({line:S(l[v].map(_=>_??NaN),f,p,w,y),points:S(c[v].map(_=>_??NaN),f,p,w,y)});const m=new this.prototype.constructor;return m.build(d,i,r,1,u,h,a),m}get box(){return o(this,Oe)}updateProperty(e,n){return e==="stroke-width"?x(this,ye,Hb).call(this,n):null}updateParentDimensions([e,n],i){const[r,a]=x(this,ye,Ws).call(this);g(this,Ls,e),g(this,Ds,n),g(this,ec,i);const[l,c]=x(this,ye,Ws).call(this),u=l-r,h=c-a,d=o(this,Oe);return d[0]-=u,d[1]-=h,d[2]+=2*u,d[3]+=2*h,d}updateRotation(e){return g(this,Gh,e),{path:{transform:this.rotationTransform}}}get viewBox(){return o(this,Oe).map(j.svgRound).join(" ")}get defaultProperties(){const[e,n]=o(this,Oe);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${j.svgRound(e)} ${j.svgRound(n)}`}}}get rotationTransform(){const[,,e,n]=o(this,Oe);let i=0,r=0,a=0,l=0,c=0,u=0;switch(o(this,Gh)){case 90:r=n/e,a=-e/n,c=e;break;case 180:i=-1,l=-1,c=e,u=n;break;case 270:r=-n/e,a=e/n,u=n;break;default:return""}return`matrix(${i} ${r} ${a} ${l} ${j.svgRound(c)} ${j.svgRound(u)})`}getPathResizingSVGProperties([e,n,i,r]){const[a,l]=x(this,ye,Ws).call(this),[c,u,h,d]=o(this,Oe);if(Math.abs(h-a)<=j.PRECISION||Math.abs(d-l)<=j.PRECISION){const S=e+i/2-(c+h/2),m=n+r/2-(u+d/2);return{path:{"transform-origin":`${j.svgRound(e)} ${j.svgRound(n)}`,transform:`${this.rotationTransform} translate(${S} ${m})`}}}const f=(i-2*a)/(h-2*a),p=(r-2*l)/(d-2*l),w=h/i,y=d/r;return{path:{"transform-origin":`${j.svgRound(c)} ${j.svgRound(u)}`,transform:`${this.rotationTransform} scale(${w} ${y}) translate(${j.svgRound(a)} ${j.svgRound(l)}) scale(${f} ${p}) translate(${j.svgRound(-a)} ${j.svgRound(-l)})`}}}getPathResizedSVGProperties([e,n,i,r]){const[a,l]=x(this,ye,Ws).call(this),c=o(this,Oe),[u,h,d,f]=c;if(c[0]=e,c[1]=n,c[2]=i,c[3]=r,Math.abs(d-a)<=j.PRECISION||Math.abs(f-l)<=j.PRECISION){const m=e+i/2-(u+d/2),v=n+r/2-(h+f/2);for(const{line:b,points:_}of o(this,mn))j._translate(b,m,v,b),j._translate(_,m,v,_);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${j.svgRound(e)} ${j.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const p=(i-2*a)/(d-2*a),w=(r-2*l)/(f-2*l),y=-p*(u+a)+e+a,S=-w*(h+l)+n+l;if(p!==1||w!==1||y!==0||S!==0)for(const{line:m,points:v}of o(this,mn))j._rescale(m,y,S,p,w,m),j._rescale(v,y,S,p,w,v);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${j.svgRound(e)} ${j.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([e,n],i){const[r,a]=i,l=o(this,Oe),c=e-l[0],u=n-l[1];if(o(this,Ls)===r&&o(this,Ds)===a)for(const{line:h,points:d}of o(this,mn))j._translate(h,c,u,h),j._translate(d,c,u,d);else{const h=o(this,Ls)/r,d=o(this,Ds)/a;g(this,Ls,r),g(this,Ds,a);for(const{line:f,points:p}of o(this,mn))j._rescale(f,c,u,h,d,f),j._rescale(p,c,u,h,d,p);l[2]*=h,l[3]*=d}return l[0]=e,l[1]=n,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${j.svgRound(e)} ${j.svgRound(n)}`}}}get defaultSVGProperties(){const e=o(this,Oe);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${j.svgRound(e[0])} ${j.svgRound(e[1])}`,transform:this.rotationTransform||null},bbox:e}}}Oe=new WeakMap,Gh=new WeakMap,Xh=new WeakMap,mn=new WeakMap,Ls=new WeakMap,Ds=new WeakMap,ec=new WeakMap,nc=new WeakMap,to=new WeakMap,ye=new WeakSet,Ws=function(e=o(this,to)){const n=o(this,Xh)+e/2*o(this,ec);return o(this,nc)%180===0?[n/o(this,Ls),n/o(this,Ds)]:[n/o(this,Ds),n/o(this,Ls)]},zb=function(){const[e,n,i,r]=o(this,Oe),[a,l]=x(this,ye,Ws).call(this,0);return[e+a,n+l,i-2*a,r-2*l]},Bb=function(){const e=g(this,Oe,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:r}of o(this,mn)){if(r.length<=12){for(let c=4,u=r.length;c<u;c+=6)U.pointBoundingBox(r[c],r[c+1],e);continue}let a=r[4],l=r[5];for(let c=6,u=r.length;c<u;c+=6){const[h,d,f,p,w,y]=r.subarray(c,c+6);U.bezierBoundingBox(a,l,h,d,f,p,w,y,e),a=w,l=y}}const[n,i]=x(this,ye,Ws).call(this);e[0]=Be(e[0]-n,0,1),e[1]=Be(e[1]-i,0,1),e[2]=Be(e[2]+n,0,1),e[3]=Be(e[3]+i,0,1),e[2]-=e[0],e[3]-=e[1]},Hb=function(e){const[n,i]=x(this,ye,Ws).call(this);g(this,to,e);const[r,a]=x(this,ye,Ws).call(this),[l,c]=[r-n,a-i],u=o(this,Oe);return u[0]-=l,u[1]-=c,u[2]+=2*l,u[3]+=2*c,u};class Hp extends Ob{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:bt._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,e){t==="stroke-width"&&(e??(e=this["stroke-width"]),e*=this._viewParameters.realScale),super.updateSVGProperty(t,e)}clone(){const t=new Hp(this._viewParameters);return t.updateAll(this),t}}var vp,$b;const Wo=class Wo extends tp{constructor(e){super({...e,name:"inkEditor"});A(this,vp);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(e,n){bt.initialize(e,n),this._defaultDrawingOptions=new Hp(n.viewParameters)}static getDefaultDrawingOptions(e){const n=this._defaultDrawingOptions.clone();return n.updateProperties(e),n}static get supportMultipleDrawings(){return!0}static get typesMap(){return et(this,"typesMap",new Map([[it.INK_THICKNESS,"stroke-width"],[it.INK_COLOR,"stroke"],[it.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,n,i,r,a){return new Ok(e,n,i,r,a,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,n,i,r,a,l){return ad.deserialize(e,n,i,r,a,l)}static async deserialize(e,n,i){let r=null;if(e instanceof O0){const{data:{inkLists:l,rect:c,rotation:u,id:h,color:d,opacity:f,borderStyle:{rawWidth:p},popupRef:w},parent:{page:{pageNumber:y}}}=e;r=e={annotationType:q.INK,color:Array.from(d),thickness:p,opacity:f,paths:{points:l},boxes:null,pageIndex:y-1,rect:c.slice(0),rotation:u,id:h,deleted:!1,popupRef:w}}const a=await super.deserialize(e,n,i);return a.annotationElementId=e.id||null,a._initialData=r,a}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:e,_drawingOptions:n,parent:i}=this;n.updateSVGProperty("stroke-width"),i.drawLayer.updateProperties(e,n.toSVGProperties())}static onScaleChangingWhenDrawing(){const e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:e,thickness:n,opacity:i}){this._drawingOptions=Wo.getDefaultDrawingOptions({stroke:U.makeHexColor(...e),"stroke-width":n,"stroke-opacity":i})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:n,points:i,rect:r}=this.serializeDraw(e),{_drawingOptions:{stroke:a,"stroke-opacity":l,"stroke-width":c}}=this,u={annotationType:q.INK,color:bt._colorManager.convert(a),opacity:l,thickness:c,paths:{lines:n,points:i},pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?(u.isCopy=!0,u):this.annotationElementId&&!x(this,vp,$b).call(this,u)?null:(u.id=this.annotationElementId,u)}renderAnnotationElement(e){const{points:n,rect:i}=this.serializeDraw(!1);return e.updateEdited({rect:i,thickness:this._drawingOptions["stroke-width"],points:n}),null}};vp=new WeakSet,$b=function(e){const{color:n,thickness:i,opacity:r,pageIndex:a}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||e.color.some((l,c)=>l!==n[c])||e.thickness!==i||e.opacity!==r||e.pageIndex!==a},I(Wo,"_type","ink"),I(Wo,"_editorType",q.INK),I(Wo,"_defaultDrawingOptions",null);let wy=Wo;class Ay extends ad{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}const Rd=8,Rc=3;var eo,ht,xy,as,Ub,Vb,by,gf,Wb,Gb,Xb,Sy,_y,qb;class _i{static extractContoursFromText(t,{fontFamily:e,fontStyle:n,fontWeight:i},r,a,l,c){let u=new OffscreenCanvas(1,1),h=u.getContext("2d",{alpha:!1});const d=200,f=h.font=`${n} ${i} ${d}px ${e}`,{actualBoundingBoxLeft:p,actualBoundingBoxRight:w,actualBoundingBoxAscent:y,actualBoundingBoxDescent:S,fontBoundingBoxAscent:m,fontBoundingBoxDescent:v,width:b}=h.measureText(t),_=1.5,E=Math.ceil(Math.max(Math.abs(p)+Math.abs(w)||0,b)*_),k=Math.ceil(Math.max(Math.abs(y)+Math.abs(S)||d,Math.abs(m)+Math.abs(v)||d)*_);u=new OffscreenCanvas(E,k),h=u.getContext("2d",{alpha:!0,willReadFrequently:!0}),h.font=f,h.filter="grayscale(1)",h.fillStyle="white",h.fillRect(0,0,E,k),h.fillStyle="black",h.fillText(t,E*(_-1)/2,k*(3-_)/2);const T=x(this,ht,Sy).call(this,h.getImageData(0,0,E,k).data),P=x(this,ht,Xb).call(this,T),R=x(this,ht,_y).call(this,P),N=x(this,ht,by).call(this,T,E,k,R);return this.processDrawnLines({lines:{curves:N,width:E,height:k},pageWidth:r,pageHeight:a,rotation:l,innerMargin:c,mustSmooth:!0,areContours:!0})}static process(t,e,n,i,r){const[a,l,c]=x(this,ht,qb).call(this,t),[u,h]=x(this,ht,Gb).call(this,a,l,c,Math.hypot(l,c)*o(this,eo).sigmaSFactor,o(this,eo).sigmaR,o(this,eo).kernelSize),d=x(this,ht,_y).call(this,h),f=x(this,ht,by).call(this,u,l,c,d);return this.processDrawnLines({lines:{curves:f,width:l,height:c},pageWidth:e,pageHeight:n,rotation:i,innerMargin:r,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:e,pageHeight:n,rotation:i,innerMargin:r,mustSmooth:a,areContours:l}){i%180!==0&&([e,n]=[n,e]);const{curves:c,width:u,height:h}=t,d=t.thickness??0,f=[],p=Math.min(e/u,n/h),w=p/e,y=p/n,S=[];for(const{points:v}of c){const b=a?x(this,ht,Wb).call(this,v):v;if(!b)continue;S.push(b);const _=b.length,E=new Float32Array(_),k=new Float32Array(3*(_===2?2:_-2));if(f.push({line:k,points:E}),_===2){E[0]=b[0]*w,E[1]=b[1]*y,k.set([NaN,NaN,NaN,NaN,E[0],E[1]],0);continue}let[T,P,R,N]=b;T*=w,P*=y,R*=w,N*=y,E.set([T,P,R,N],0),k.set([NaN,NaN,NaN,NaN,T,P],0);for(let L=4;L<_;L+=2){const st=E[L]=b[L]*w,rt=E[L+1]=b[L+1]*y;k.set(j.createBezierPoints(T,P,R,N,st,rt),(L-2)*3),[T,P,R,N]=[R,N,st,rt]}}if(f.length===0)return null;const m=l?new Ay:new ad;return m.build(f,e,n,1,i,l?0:d,r),{outline:m,newCurves:S,areContours:l,thickness:d,width:u,height:h}}static async compressSignature({outlines:t,areContours:e,thickness:n,width:i,height:r}){let a=1/0,l=-1/0,c=0;for(const b of t){c+=b.length;for(let _=2,E=b.length;_<E;_++){const k=b[_]-b[_-2];a=Math.min(a,k),l=Math.max(l,k)}}let u;a>=-128&&l<=127?u=Int8Array:a>=-32768&&l<=32767?u=Int16Array:u=Int32Array;const h=t.length,d=Rd+Rc*h,f=new Uint32Array(d);let p=0;f[p++]=d*Uint32Array.BYTES_PER_ELEMENT+(c-2*h)*u.BYTES_PER_ELEMENT,f[p++]=0,f[p++]=i,f[p++]=r,f[p++]=e?0:1,f[p++]=Math.max(0,Math.floor(n??0)),f[p++]=h,f[p++]=u.BYTES_PER_ELEMENT;for(const b of t)f[p++]=b.length-2,f[p++]=b[0],f[p++]=b[1];const w=new CompressionStream("deflate-raw"),y=w.writable.getWriter();await y.ready,y.write(f);const S=u.prototype.constructor;for(const b of t){const _=new S(b.length-2);for(let E=2,k=b.length;E<k;E++)_[E-2]=b[E]-b[E-2];y.write(_)}y.close();const m=await new Response(w.readable).arrayBuffer(),v=new Uint8Array(m);return K1(v)}static async decompressSignature(t){try{const e=lC(t),{readable:n,writable:i}=new DecompressionStream("deflate-raw"),r=i.getWriter();await r.ready,r.write(e).then(async()=>{await r.ready,await r.close()}).catch(()=>{});let a=null,l=0;for await(const b of n)a||(a=new Uint8Array(new Uint32Array(b.buffer,0,4)[0])),a.set(b,l),l+=b.length;const c=new Uint32Array(a.buffer,0,a.length>>2),u=c[1];if(u!==0)throw new Error(`Invalid version: ${u}`);const h=c[2],d=c[3],f=c[4]===0,p=c[5],w=c[6],y=c[7],S=[],m=(Rd+Rc*w)*Uint32Array.BYTES_PER_ELEMENT;let v;switch(y){case Int8Array.BYTES_PER_ELEMENT:v=new Int8Array(a.buffer,m);break;case Int16Array.BYTES_PER_ELEMENT:v=new Int16Array(a.buffer,m);break;case Int32Array.BYTES_PER_ELEMENT:v=new Int32Array(a.buffer,m);break}l=0;for(let b=0;b<w;b++){const _=c[Rc*b+Rd],E=new Float32Array(_+2);S.push(E);for(let k=0;k<Rc-1;k++)E[k]=c[Rc*b+Rd+k+1];for(let k=0;k<_;k++)E[k+2]=E[k]+v[l++]}return{areContours:f,thickness:p,outlines:S,width:h,height:d}}catch(e){return Y(`decompressSignature: ${e}`),null}}}eo=new WeakMap,ht=new WeakSet,xy=function(t,e,n,i){return n-=t,i-=e,n===0?i>0?0:4:n===1?i+6:2-i},as=new WeakMap,Ub=function(t,e,n,i,r,a,l){const c=x(this,ht,xy).call(this,n,i,r,a);for(let u=0;u<8;u++){const h=(-u+c-l+16)%8,d=o(this,as)[2*h],f=o(this,as)[2*h+1];if(t[(n+d)*e+(i+f)]!==0)return h}return-1},Vb=function(t,e,n,i,r,a,l){const c=x(this,ht,xy).call(this,n,i,r,a);for(let u=0;u<8;u++){const h=(u+c+l+16)%8,d=o(this,as)[2*h],f=o(this,as)[2*h+1];if(t[(n+d)*e+(i+f)]!==0)return h}return-1},by=function(t,e,n,i){const r=t.length,a=new Int32Array(r);for(let h=0;h<r;h++)a[h]=t[h]<=i?1:0;for(let h=1;h<n-1;h++)a[h*e]=a[h*e+e-1]=0;for(let h=0;h<e;h++)a[h]=a[e*n-1-h]=0;let l=1,c;const u=[];for(let h=1;h<n-1;h++){c=1;for(let d=1;d<e-1;d++){const f=h*e+d,p=a[f];if(p===0)continue;let w=h,y=d;if(p===1&&a[f-1]===0)l+=1,y-=1;else if(p>=1&&a[f+1]===0)l+=1,y+=1,p>1&&(c=p);else{p!==1&&(c=Math.abs(p));continue}const S=[d,h],m=y===d+1,v={isHole:m,points:S,id:l,parent:0};u.push(v);let b;for(const L of u)if(L.id===c){b=L;break}b?b.isHole?v.parent=m?b.parent:c:v.parent=m?c:b.parent:v.parent=m?c:0;const _=x(this,ht,Ub).call(this,a,e,h,d,w,y,0);if(_===-1){a[f]=-l,a[f]!==1&&(c=Math.abs(a[f]));continue}let E=o(this,as)[2*_],k=o(this,as)[2*_+1];const T=h+E,P=d+k;w=T,y=P;let R=h,N=d;for(;;){const L=x(this,ht,Vb).call(this,a,e,R,N,w,y,1);E=o(this,as)[2*L],k=o(this,as)[2*L+1];const st=R+E,rt=N+k;S.push(rt,st);const Q=R*e+N;if(a[Q+1]===0?a[Q]=-l:a[Q]===1&&(a[Q]=l),st===h&&rt===d&&R===T&&N===P){a[f]!==1&&(c=Math.abs(a[f]));break}else w=R,y=N,R=st,N=rt}}}return u},gf=function(t,e,n,i){if(n-e<=4){for(let T=e;T<n-2;T+=2)i.push(t[T],t[T+1]);return}const r=t[e],a=t[e+1],l=t[n-4]-r,c=t[n-3]-a,u=Math.hypot(l,c),h=l/u,d=c/u,f=h*a-d*r,p=c/l,w=1/u,y=Math.atan(p),S=Math.cos(y),m=Math.sin(y),v=w*(Math.abs(S)+Math.abs(m)),b=w*(1-v+v**2),_=Math.max(Math.atan(Math.abs(m+S)*b),Math.atan(Math.abs(m-S)*b));let E=0,k=e;for(let T=e+2;T<n-2;T+=2){const P=Math.abs(f-h*t[T+1]+d*t[T]);P>E&&(k=T,E=P)}E>(u*_)**2?(x(this,ht,gf).call(this,t,e,k+2,i),x(this,ht,gf).call(this,t,k,n,i)):i.push(r,a)},Wb=function(t){const e=[],n=t.length;return x(this,ht,gf).call(this,t,0,n,e),e.push(t[n-2],t[n-1]),e.length<=4?null:e},Gb=function(t,e,n,i,r,a){const l=new Float32Array(a**2),c=-2*i**2,u=a>>1;for(let y=0;y<a;y++){const S=(y-u)**2;for(let m=0;m<a;m++)l[y*a+m]=Math.exp((S+(m-u)**2)/c)}const h=new Float32Array(256),d=-2*r**2;for(let y=0;y<256;y++)h[y]=Math.exp(y**2/d);const f=t.length,p=new Uint8Array(f),w=new Uint32Array(256);for(let y=0;y<n;y++)for(let S=0;S<e;S++){const m=y*e+S,v=t[m];let b=0,_=0;for(let k=0;k<a;k++){const T=y+k-u;if(!(T<0||T>=n))for(let P=0;P<a;P++){const R=S+P-u;if(R<0||R>=e)continue;const N=t[T*e+R],L=l[k*a+P]*h[Math.abs(N-v)];b+=N*L,_+=L}}const E=p[m]=Math.round(b/_);w[E]++}return[p,w]},Xb=function(t){const e=new Uint32Array(256);for(const n of t)e[n]++;return e},Sy=function(t){const e=t.length,n=new Uint8ClampedArray(e>>2);let i=-1/0,r=1/0;for(let l=0,c=n.length;l<c;l++){if(t[(l<<2)+3]===0){i=n[l]=255;continue}const h=n[l]=t[l<<2];h>i&&(i=h),h<r&&(r=h)}const a=255/(i-r);for(let l=0;l<e;l++)n[l]=(n[l]-r)*a;return n},_y=function(t){let e,n=-1/0,i=-1/0;const r=t.findIndex(c=>c!==0);let a=r,l=r;for(e=r;e<256;e++){const c=t[e];c>n&&(e-a>i&&(i=e-a,l=e-1),n=c,a=e)}for(e=l-1;e>=0&&!(t[e]>t[e+1]);e--);return e},qb=function(t){const e=t,{width:n,height:i}=t,{maxDim:r}=o(this,eo);let a=n,l=i;if(n>r||i>r){let f=n,p=i,w=Math.log2(Math.max(n,i)/r);const y=Math.floor(w);w=w===y?y-1:y;for(let m=0;m<w;m++){a=f,l=p,a>r&&(a=Math.ceil(a/2)),l>r&&(l=Math.ceil(l/2));const v=new OffscreenCanvas(a,l);v.getContext("2d").drawImage(t,0,0,f,p,0,0,a,l),f=a,p=l,t!==e&&t.close(),t=v.transferToImageBitmap()}const S=Math.min(r/a,r/l);a=Math.round(a*S),l=Math.round(l*S)}const u=new OffscreenCanvas(a,l).getContext("2d",{willReadFrequently:!0});u.filter="grayscale(1)",u.drawImage(t,0,0,t.width,t.height,0,0,a,l);const h=u.getImageData(0,0,a,l).data;return[x(this,ht,Sy).call(this,h),a,l]},A(_i,ht),A(_i,eo,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),A(_i,as,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class j0 extends Ob{constructor(){super(),super.updateProperties({fill:bt._defaultLineColor,"stroke-width":0})}clone(){const t=new j0;return t.updateAll(this),t}}class z0 extends Hp{constructor(t){super(t),super.updateProperties({stroke:bt._defaultLineColor,"stroke-width":1})}clone(){const t=new z0(this._viewParameters);return t.updateAll(this),t}}var vr,yn,wr,Ar;const rn=class rn extends tp{constructor(e){super({...e,mustBeCommitted:!0,name:"signatureEditor"});A(this,vr,!1);A(this,yn,null);A(this,wr,null);A(this,Ar,null);this._willKeepAspectRatio=!0,g(this,wr,e.signatureData||null),g(this,yn,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(e,n){bt.initialize(e,n),this._defaultDrawingOptions=new j0,this._defaultDrawnSignatureOptions=new z0(n.viewParameters)}static getDefaultDrawingOptions(e){const n=this._defaultDrawingOptions.clone();return n.updateProperties(e),n}static get supportMultipleDrawings(){return!1}static get typesMap(){return et(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!o(this,yn)}}static computeTelemetryFinalData(e){const n=e.get("hasDescription");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let e,n;const{_isCopy:i}=this;if(i&&(this._isCopy=!1,e=this.x,n=this.y),super.render(),this._drawId===null)if(o(this,wr)){const{lines:r,mustSmooth:a,areContours:l,description:c,uuid:u,heightInPage:h}=o(this,wr),{rawDims:{pageWidth:d,pageHeight:f},rotation:p}=this.parent.viewport,w=_i.processDrawnLines({lines:r,pageWidth:d,pageHeight:f,rotation:p,innerMargin:rn._INNER_MARGIN,mustSmooth:a,areContours:l});this.addSignature(w,h,c,u)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);return i&&(this._isCopy=!0,this._moveAfterPaste(e,n)),this.div}setUuid(e){g(this,Ar,e),this.addEditToolbar()}getUuid(){return o(this,Ar)}get description(){return o(this,yn)}set description(e){g(this,yn,e),super.addEditToolbar().then(n=>{n==null||n.updateEditSignatureButton(e)})}getSignaturePreview(){const{newCurves:e,areContours:n,thickness:i,width:r,height:a}=o(this,wr),l=Math.max(r,a),c=_i.processDrawnLines({lines:{curves:e.map(u=>({points:u})),thickness:i,width:r,height:a},pageWidth:l,pageHeight:l,rotation:0,innerMargin:0,mustSmooth:!1,areContours:n});return{areContours:n,outline:c.outline}}async addEditToolbar(){const e=await super.addEditToolbar();return e?(this._uiManager.signatureManager&&o(this,yn)!==null&&(await e.addEditSignatureButton(this._uiManager.signatureManager,o(this,Ar),o(this,yn)),e.show()),e):null}addSignature(e,n,i,r){const{x:a,y:l}=this,{outline:c}=g(this,wr,e);g(this,vr,c instanceof Ay),g(this,yn,i),this.div.setAttribute("data-l10n-args",JSON.stringify({description:i}));let u;o(this,vr)?u=rn.getDefaultDrawingOptions():(u=rn._defaultDrawnSignatureOptions.clone(),u.updateProperties({"stroke-width":c.thickness})),this._addOutlines({drawOutlines:c,drawingOptions:u});const[h,d]=this.parentDimensions,[,f]=this.pageDimensions;let p=n/f;p=p>=1?.5:p,this.width*=p/this.height,this.width>=1&&(p*=.9/this.width,this.width=.9),this.height=p,this.setDims(h*this.width,d*this.height),this.x=a,this.y=l,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(r),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!r,hasDescription:!!i}}),this.div.hidden=!1}getFromImage(e){const{rawDims:{pageWidth:n,pageHeight:i},rotation:r}=this.parent.viewport;return _i.process(e,n,i,r,rn._INNER_MARGIN)}getFromText(e,n){const{rawDims:{pageWidth:i,pageHeight:r},rotation:a}=this.parent.viewport;return _i.extractContoursFromText(e,n,i,r,a,rn._INNER_MARGIN)}getDrawnSignature(e){const{rawDims:{pageWidth:n,pageHeight:i},rotation:r}=this.parent.viewport;return _i.processDrawnLines({lines:e,pageWidth:n,pageHeight:i,rotation:r,innerMargin:rn._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:e,thickness:n}){e?this._drawingOptions=rn.getDefaultDrawingOptions():(this._drawingOptions=rn._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":n}))}serialize(e=!1){if(this.isEmpty())return null;const{lines:n,points:i,rect:r}=this.serializeDraw(e),{_drawingOptions:{"stroke-width":a}}=this,l={annotationType:q.SIGNATURE,isSignature:!0,areContours:o(this,vr),color:[0,0,0],thickness:o(this,vr)?0:a,pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?(l.paths={lines:n,points:i},l.uuid=o(this,Ar),l.isCopy=!0):l.lines=n,o(this,yn)&&(l.accessibilityData={type:"Figure",alt:o(this,yn)}),l}static deserializeDraw(e,n,i,r,a,l){return l.areContours?Ay.deserialize(e,n,i,r,a,l):ad.deserialize(e,n,i,r,a,l)}static async deserialize(e,n,i){var a;const r=await super.deserialize(e,n,i);return g(r,vr,e.areContours),g(r,yn,((a=e.accessibilityData)==null?void 0:a.alt)||""),g(r,Ar,e.uuid),r}};vr=new WeakMap,yn=new WeakMap,wr=new WeakMap,Ar=new WeakMap,I(rn,"_type","signature"),I(rn,"_editorType",q.SIGNATURE),I(rn,"_defaultDrawingOptions",null);let Ey=rn;var kt,ae,xr,wi,br,sc,Ai,no,Fs,vn,ic,lt,Kc,Qc,mf,yf,vf,ky,wf,Yb;class Cy extends bt{constructor(e){super({...e,name:"stampEditor"});A(this,lt);A(this,kt,null);A(this,ae,null);A(this,xr,null);A(this,wi,null);A(this,br,null);A(this,sc,"");A(this,Ai,null);A(this,no,!1);A(this,Fs,null);A(this,vn,!1);A(this,ic,!1);g(this,wi,e.bitmapUrl),g(this,br,e.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(e,n){bt.initialize(e,n)}static isHandlingMimeForPasting(e){return wm.includes(e)}static paste(e,n){n.pasteEditor(q.STAMP,{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var e;return{type:"stamp",hasAltText:!!((e=this.altTextData)!=null&&e.altText)}}static computeTelemetryFinalData(e){const n=e.get("hasAltText");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}async mlGuessAltText(e=null,n=!0){if(this.hasAltTextData())return null;const{mlManager:i}=this._uiManager;if(!i)throw new Error("No ML.");if(!await i.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:r,width:a,height:l}=e||this.copyCanvas(null,null,!0).imageData,c=await i.guess({name:"altText",request:{data:r,width:a,height:l,channels:r.length/(a*l)}});if(!c)throw new Error("No response from the AI service.");if(c.error)throw new Error("Error from the AI service.");if(c.cancel)return null;if(!c.output)throw new Error("No valid response from the AI service.");const u=c.output;return await this.setGuessedAltText(u),n&&!this.hasAltTextData()&&(this.altTextData={alt:u,decorative:!1}),u}remove(){var e;o(this,ae)&&(g(this,kt,null),this._uiManager.imageManager.deleteId(o(this,ae)),(e=o(this,Ai))==null||e.remove(),g(this,Ai,null),o(this,Fs)&&(clearTimeout(o(this,Fs)),g(this,Fs,null))),super.remove()}rebuild(){if(!this.parent){o(this,ae)&&x(this,lt,mf).call(this);return}super.rebuild(),this.div!==null&&(o(this,ae)&&o(this,Ai)===null&&x(this,lt,mf).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(o(this,xr)||o(this,kt)||o(this,wi)||o(this,br)||o(this,ae)||o(this,no))}get isResizable(){return!0}render(){if(this.div)return this.div;let e,n;return this._isCopy&&(e=this.x,n=this.y),super.render(),this.div.hidden=!0,this.addAltTextButton(),o(this,no)||(o(this,kt)?x(this,lt,yf).call(this):x(this,lt,mf).call(this)),this._isCopy&&this._moveAfterPaste(e,n),this._uiManager.addShouldRescale(this),this.div}setCanvas(e,n){const{id:i,bitmap:r}=this._uiManager.imageManager.getFromCanvas(e,n);n.remove(),i&&this._uiManager.imageManager.isValidId(i)&&(g(this,ae,i),r&&g(this,kt,r),g(this,no,!1),x(this,lt,yf).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;o(this,Fs)!==null&&clearTimeout(o(this,Fs)),g(this,Fs,setTimeout(()=>{g(this,Fs,null),x(this,lt,ky).call(this)},200))}copyCanvas(e,n,i=!1){var p;e||(e=224);const{width:r,height:a}=o(this,kt),l=new Li;let c=o(this,kt),u=r,h=a,d=null;if(n){if(r>n||a>n){const P=Math.min(n/r,n/a);u=Math.floor(r*P),h=Math.floor(a*P)}d=document.createElement("canvas");const w=d.width=Math.ceil(u*l.sx),y=d.height=Math.ceil(h*l.sy);o(this,vn)||(c=x(this,lt,vf).call(this,w,y));const S=d.getContext("2d");S.filter=this._uiManager.hcmFilter;let m="white",v="#cfcfd8";this._uiManager.hcmFilter!=="none"?v="black":(p=window.matchMedia)!=null&&p.call(window,"(prefers-color-scheme: dark)").matches&&(m="#8f8f9d",v="#42414d");const b=15,_=b*l.sx,E=b*l.sy,k=new OffscreenCanvas(_*2,E*2),T=k.getContext("2d");T.fillStyle=m,T.fillRect(0,0,_*2,E*2),T.fillStyle=v,T.fillRect(0,0,_,E),T.fillRect(_,E,_,E),S.fillStyle=S.createPattern(k,"repeat"),S.fillRect(0,0,w,y),S.drawImage(c,0,0,c.width,c.height,0,0,w,y)}let f=null;if(i){let w,y;if(l.symmetric&&c.width<e&&c.height<e)w=c.width,y=c.height;else if(c=o(this,kt),r>e||a>e){const v=Math.min(e/r,e/a);w=Math.floor(r*v),y=Math.floor(a*v),o(this,vn)||(c=x(this,lt,vf).call(this,w,y))}const m=new OffscreenCanvas(w,y).getContext("2d",{willReadFrequently:!0});m.drawImage(c,0,0,c.width,c.height,0,0,w,y),f={width:w,height:y,data:m.getImageData(0,0,w,y).data}}return{canvas:d,width:u,height:h,imageData:f}}static async deserialize(e,n,i){var S;let r=null,a=!1;if(e instanceof ub){const{data:{rect:m,rotation:v,id:b,structParent:_,popupRef:E},container:k,parent:{page:{pageNumber:T}},canvas:P}=e;let R,N;P?(delete e.canvas,{id:R,bitmap:N}=i.imageManager.getFromCanvas(k.id,P),P.remove()):(a=!0,e._hasNoCanvas=!0);const L=((S=await n._structTree.getAriaAttributes(`${T0}${b}`))==null?void 0:S.get("aria-label"))||"";r=e={annotationType:q.STAMP,bitmapId:R,bitmap:N,pageIndex:T-1,rect:m.slice(0),rotation:v,id:b,deleted:!1,accessibilityData:{decorative:!1,altText:L},isSvg:!1,structParent:_,popupRef:E}}const l=await super.deserialize(e,n,i),{rect:c,bitmap:u,bitmapUrl:h,bitmapId:d,isSvg:f,accessibilityData:p}=e;a?(i.addMissingCanvas(e.id,l),g(l,no,!0)):d&&i.imageManager.isValidId(d)?(g(l,ae,d),u&&g(l,kt,u)):g(l,wi,h),g(l,vn,f);const[w,y]=l.pageDimensions;return l.width=(c[2]-c[0])/w,l.height=(c[3]-c[1])/y,l.annotationElementId=e.id||null,p&&(l.altTextData=p),l._initialData=r,g(l,ic,!!r),l}serialize(e=!1,n=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i={annotationType:q.STAMP,bitmapId:o(this,ae),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:o(this,vn),structTreeParentId:this._structTreeParentId};if(e)return i.bitmapUrl=x(this,lt,wf).call(this,!0),i.accessibilityData=this.serializeAltText(!0),i.isCopy=!0,i;const{decorative:r,altText:a}=this.serializeAltText(!1);if(!r&&a&&(i.accessibilityData={type:"Figure",alt:a}),this.annotationElementId){const c=x(this,lt,Yb).call(this,i);if(c.isSame)return null;c.isSameAltText?delete i.accessibilityData:i.accessibilityData.structParent=this._initialData.structParent??-1}if(i.id=this.annotationElementId,n===null)return i;n.stamps||(n.stamps=new Map);const l=o(this,vn)?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(!n.stamps.has(o(this,ae)))n.stamps.set(o(this,ae),{area:l,serialized:i}),i.bitmap=x(this,lt,wf).call(this,!1);else if(o(this,vn)){const c=n.stamps.get(o(this,ae));l>c.area&&(c.area=l,c.serialized.bitmap.close(),c.serialized.bitmap=x(this,lt,wf).call(this,!1))}return i}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}}kt=new WeakMap,ae=new WeakMap,xr=new WeakMap,wi=new WeakMap,br=new WeakMap,sc=new WeakMap,Ai=new WeakMap,no=new WeakMap,Fs=new WeakMap,vn=new WeakMap,ic=new WeakMap,lt=new WeakSet,Kc=function(e,n=!1){if(!e){this.remove();return}g(this,kt,e.bitmap),n||(g(this,ae,e.id),g(this,vn,e.isSvg)),e.file&&g(this,sc,e.file.name),x(this,lt,yf).call(this)},Qc=function(){if(g(this,xr,null),this._uiManager.enableWaiting(!1),!!o(this,Ai)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&o(this,kt)){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&o(this,kt)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},mf=function(){if(o(this,ae)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(o(this,ae)).then(i=>x(this,lt,Kc).call(this,i,!0)).finally(()=>x(this,lt,Qc).call(this));return}if(o(this,wi)){const i=o(this,wi);g(this,wi,null),this._uiManager.enableWaiting(!0),g(this,xr,this._uiManager.imageManager.getFromUrl(i).then(r=>x(this,lt,Kc).call(this,r)).finally(()=>x(this,lt,Qc).call(this)));return}if(o(this,br)){const i=o(this,br);g(this,br,null),this._uiManager.enableWaiting(!0),g(this,xr,this._uiManager.imageManager.getFromFile(i).then(r=>x(this,lt,Kc).call(this,r)).finally(()=>x(this,lt,Qc).call(this)));return}const e=document.createElement("input");e.type="file",e.accept=wm.join(",");const n=this._uiManager._signal;g(this,xr,new Promise(i=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const r=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),x(this,lt,Kc).call(this,r)}i()},{signal:n}),e.addEventListener("cancel",()=>{this.remove(),i()},{signal:n})}).finally(()=>x(this,lt,Qc).call(this))),e.click()},yf=function(){var d;const{div:e}=this;let{width:n,height:i}=o(this,kt);const[r,a]=this.pageDimensions,l=.75;if(this.width)n=this.width*r,i=this.height*a;else if(n>l*r||i>l*a){const f=Math.min(l*r/n,l*a/i);n*=f,i*=f}const[c,u]=this.parentDimensions;this.setDims(n*c/r,i*u/a),this._uiManager.enableWaiting(!1);const h=g(this,Ai,document.createElement("canvas"));h.setAttribute("role","img"),this.addContainer(h),this.width=n/r,this.height=i/a,(d=this._initialOptions)!=null&&d.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),x(this,lt,ky).call(this),o(this,ic)||(this.parent.addUndoableEditor(this),g(this,ic,!0)),this._reportTelemetry({action:"inserted_image"}),o(this,sc)&&this.div.setAttribute("aria-description",o(this,sc))},vf=function(e,n){const{width:i,height:r}=o(this,kt);let a=i,l=r,c=o(this,kt);for(;a>2*e||l>2*n;){const u=a,h=l;a>2*e&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2)),l>2*n&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2));const d=new OffscreenCanvas(a,l);d.getContext("2d").drawImage(c,0,0,u,h,0,0,a,l),c=d.transferToImageBitmap()}return c},ky=function(){const[e,n]=this.parentDimensions,{width:i,height:r}=this,a=new Li,l=Math.ceil(i*e*a.sx),c=Math.ceil(r*n*a.sy),u=o(this,Ai);if(!u||u.width===l&&u.height===c)return;u.width=l,u.height=c;const h=o(this,vn)?o(this,kt):x(this,lt,vf).call(this,l,c),d=u.getContext("2d");d.filter=this._uiManager.hcmFilter,d.drawImage(h,0,0,h.width,h.height,0,0,l,c)},wf=function(e){if(e){if(o(this,vn)){const r=this._uiManager.imageManager.getSvgUrl(o(this,ae));if(r)return r}const n=document.createElement("canvas");return{width:n.width,height:n.height}=o(this,kt),n.getContext("2d").drawImage(o(this,kt),0,0),n.toDataURL()}if(o(this,vn)){const[n,i]=this.pageDimensions,r=Math.round(this.width*n*zr.PDF_TO_CSS_UNITS),a=Math.round(this.height*i*zr.PDF_TO_CSS_UNITS),l=new OffscreenCanvas(r,a);return l.getContext("2d").drawImage(o(this,kt),0,0,o(this,kt).width,o(this,kt).height,0,0,r,a),l.transferToImageBitmap()}return structuredClone(o(this,kt))},Yb=function(e){var l;const{pageIndex:n,accessibilityData:{altText:i}}=this._initialData,r=e.pageIndex===n,a=(((l=e.accessibilityData)==null?void 0:l.alt)||"")===i;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&r&&a,isSameAltText:a}},I(Cy,"_type","stamp"),I(Cy,"_editorType",q.STAMP);var so,rc,Os,Sr,xi,jn,_r,ac,io,os,bi,Re,Si,V,Er,Tt,Kb,As,Py,Ry,Af;const Yn=class Yn{constructor({uiManager:t,pageIndex:e,div:n,structTreeLayer:i,accessibilityManager:r,annotationLayer:a,drawLayer:l,textLayer:c,viewport:u,l10n:h}){A(this,Tt);A(this,so);A(this,rc,!1);A(this,Os,null);A(this,Sr,null);A(this,xi,null);A(this,jn,new Map);A(this,_r,!1);A(this,ac,!1);A(this,io,!1);A(this,os,null);A(this,bi,null);A(this,Re,null);A(this,Si,null);A(this,V);const d=[...o(Yn,Er).values()];if(!Yn._initialized){Yn._initialized=!0;for(const f of d)f.initialize(h,t)}t.registerEditorTypes(d),g(this,V,t),this.pageIndex=e,this.div=n,g(this,so,r),g(this,Os,a),this.viewport=u,g(this,Re,c),this.drawLayer=l,this._structTree=i,o(this,V).addLayer(this)}get isEmpty(){return o(this,jn).size===0}get isInvisible(){return this.isEmpty&&o(this,V).getMode()===q.NONE}updateToolbar(t){o(this,V).updateToolbar(t)}updateMode(t=o(this,V).getMode()){switch(x(this,Tt,Af).call(this),t){case q.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case q.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case q.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;for(const n of o(Yn,Er).values())e.toggle(`${n._type}Editing`,t===n._editorType);this.div.hidden=!1}hasTextLayer(t){var e;return t===((e=o(this,Re))==null?void 0:e.div)}setEditingState(t){o(this,V).setEditingState(t)}addCommands(t){o(this,V).addCommands(t)}cleanUndoStack(t){o(this,V).cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){var e;(e=o(this,Os))==null||e.div.classList.toggle("disabled",!t)}async enable(){g(this,io,!0),this.div.tabIndex=0,this.togglePointerEvents(!0);const t=new Set;for(const n of o(this,jn).values())n.enableEditing(),n.show(!0),n.annotationElementId&&(o(this,V).removeChangedExistingAnnotation(n),t.add(n.annotationElementId));if(!o(this,Os)){g(this,io,!1);return}const e=o(this,Os).getEditableAnnotations();for(const n of e){if(n.hide(),o(this,V).isDeletedAnnotationElement(n.data.id)||t.has(n.data.id))continue;const i=await this.deserialize(n);i&&(this.addOrRebuild(i),i.enableEditing())}g(this,io,!1)}disable(){var i;g(this,ac,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const t=new Map,e=new Map;for(const r of o(this,jn).values())if(r.disableEditing(),!!r.annotationElementId){if(r.serialize()!==null){t.set(r.annotationElementId,r);continue}else e.set(r.annotationElementId,r);(i=this.getEditableAnnotation(r.annotationElementId))==null||i.show(),r.remove()}if(o(this,Os)){const r=o(this,Os).getEditableAnnotations();for(const a of r){const{id:l}=a.data;if(o(this,V).isDeletedAnnotationElement(l))continue;let c=e.get(l);if(c){c.resetAnnotationElement(a),c.show(!1),a.show();continue}c=t.get(l),c&&(o(this,V).addChangedExistingAnnotation(c),c.renderAnnotationElement(a)&&c.show(!1)),a.show()}}x(this,Tt,Af).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const r of o(Yn,Er).values())n.remove(`${r._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),g(this,ac,!1)}getEditableAnnotation(t){var e;return((e=o(this,Os))==null?void 0:e.getEditableAnnotation(t))||null}setActiveEditor(t){o(this,V).getActive()!==t&&o(this,V).setActiveEditor(t)}enableTextSelection(){var t;if(this.div.tabIndex=-1,(t=o(this,Re))!=null&&t.div&&!o(this,Si)){g(this,Si,new AbortController);const e=o(this,V).combinedSignal(o(this,Si));o(this,Re).div.addEventListener("pointerdown",x(this,Tt,Kb).bind(this),{signal:e}),o(this,Re).div.classList.add("highlighting")}}disableTextSelection(){var t;this.div.tabIndex=0,(t=o(this,Re))!=null&&t.div&&o(this,Si)&&(o(this,Si).abort(),g(this,Si,null),o(this,Re).div.classList.remove("highlighting"))}enableClick(){if(o(this,Sr))return;g(this,Sr,new AbortController);const t=o(this,V).combinedSignal(o(this,Sr));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){var t;(t=o(this,Sr))==null||t.abort(),g(this,Sr,null)}attach(t){o(this,jn).set(t.id,t);const{annotationElementId:e}=t;e&&o(this,V).isDeletedAnnotationElement(e)&&o(this,V).removeDeletedAnnotationElement(t)}detach(t){var e;o(this,jn).delete(t.id),(e=o(this,so))==null||e.removePointerInTextLayer(t.contentDiv),!o(this,ac)&&t.annotationElementId&&o(this,V).addDeletedAnnotationElement(t)}remove(t){this.detach(t),o(this,V).removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){var e;t.parent!==this&&(t.parent&&t.annotationElementId&&(o(this,V).addDeletedAnnotationElement(t.annotationElementId),bt.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),(e=t.parent)==null||e.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),o(this,V).addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!o(this,io)),o(this,V).addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){var n;if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!o(this,xi)&&(t._focusEventsAllowed=!1,g(this,xi,setTimeout(()=>{g(this,xi,null),t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:o(this,V)._signal}),e.focus())},0))),t._structTreeParentId=(n=o(this,so))==null?void 0:n.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||(t.parent=this),t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),n=()=>{t.remove()};this.addCommands({cmd:e,undo:n,mustExec:!1})}getNextId(){return o(this,V).getId()}combinedSignal(t){return o(this,V).combinedSignal(t)}canCreateNewEmptyEditor(){var t;return(t=o(this,Tt,As))==null?void 0:t.canCreateNewEmptyEditor()}async pasteEditor(t,e){o(this,V).updateToolbar(t),await o(this,V).updateMode(t);const{offsetX:n,offsetY:i}=x(this,Tt,Ry).call(this),r=this.getNextId(),a=x(this,Tt,Py).call(this,{parent:this,id:r,x:n,y:i,uiManager:o(this,V),isCentered:!0,...e});a&&this.add(a)}async deserialize(t){var e;return await((e=o(Yn,Er).get(t.annotationType??t.annotationEditorType))==null?void 0:e.deserialize(t,this,o(this,V)))||null}createAndAddNewEditor(t,e,n={}){const i=this.getNextId(),r=x(this,Tt,Py).call(this,{parent:this,id:i,x:t.offsetX,y:t.offsetY,uiManager:o(this,V),isCentered:e,...n});return r&&this.add(r),r}addNewEditor(t={}){this.createAndAddNewEditor(x(this,Tt,Ry).call(this),!0,t)}setSelected(t){o(this,V).setSelected(t)}toggleSelected(t){o(this,V).toggleSelected(t)}unselect(t){o(this,V).unselect(t)}pointerup(t){var i;const{isMac:e}=Ae.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div||!o(this,_r)||(g(this,_r,!1),(i=o(this,Tt,As))!=null&&i.isDrawer&&o(this,Tt,As).supportMultipleDrawings))return;if(!o(this,rc)){g(this,rc,!0);return}const n=o(this,V).getMode();if(n===q.STAMP||n===q.SIGNATURE){o(this,V).unselectAll();return}this.createAndAddNewEditor(t,!1)}pointerdown(t){var i;if(o(this,V).getMode()===q.HIGHLIGHT&&this.enableTextSelection(),o(this,_r)){g(this,_r,!1);return}const{isMac:e}=Ae.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;if(g(this,_r,!0),(i=o(this,Tt,As))!=null&&i.isDrawer){this.startDrawingSession(t);return}const n=o(this,V).getActive();g(this,rc,!n||n.isEmpty())}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),o(this,os)){o(this,Tt,As).startDrawing(this,o(this,V),!1,t);return}o(this,V).setCurrentDrawingSession(this),g(this,os,new AbortController);const e=o(this,V).combinedSignal(o(this,os));this.div.addEventListener("blur",({relatedTarget:n})=>{n&&!this.div.contains(n)&&(g(this,bi,null),this.commitOrRemove())},{signal:e}),o(this,Tt,As).startDrawing(this,o(this,V),!1,t)}pause(t){if(t){const{activeElement:e}=document;this.div.contains(e)&&g(this,bi,e);return}o(this,bi)&&setTimeout(()=>{var e;(e=o(this,bi))==null||e.focus(),g(this,bi,null)},0)}endDrawingSession(t=!1){return o(this,os)?(o(this,V).setCurrentDrawingSession(null),o(this,os).abort(),g(this,os,null),g(this,bi,null),o(this,Tt,As).endDrawing(t)):null}findNewParent(t,e,n){const i=o(this,V).findParent(e,n);return i===null||i===this?!1:(i.changeParent(t),!0)}commitOrRemove(){return o(this,os)?(this.endDrawingSession(),!0):!1}onScaleChanging(){o(this,os)&&o(this,Tt,As).onScaleChangingWhenDrawing(this)}destroy(){var t,e;this.commitOrRemove(),((t=o(this,V).getActive())==null?void 0:t.parent)===this&&(o(this,V).commitOrRemove(),o(this,V).setActiveEditor(null)),o(this,xi)&&(clearTimeout(o(this,xi)),g(this,xi,null));for(const n of o(this,jn).values())(e=o(this,so))==null||e.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove();this.div=null,o(this,jn).clear(),o(this,V).removeLayer(this)}render({viewport:t}){this.viewport=t,po(this.div,t);for(const e of o(this,V).getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){o(this,V).commitOrRemove(),x(this,Tt,Af).call(this);const e=this.viewport.rotation,n=t.rotation;if(this.viewport=t,po(this.div,{rotation:n}),e!==n)for(const i of o(this,jn).values())i.rotate(n)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return o(this,V).viewParameters.realScale}};so=new WeakMap,rc=new WeakMap,Os=new WeakMap,Sr=new WeakMap,xi=new WeakMap,jn=new WeakMap,_r=new WeakMap,ac=new WeakMap,io=new WeakMap,os=new WeakMap,bi=new WeakMap,Re=new WeakMap,Si=new WeakMap,V=new WeakMap,Er=new WeakMap,Tt=new WeakSet,Kb=function(t){o(this,V).unselectAll();const{target:e}=t;if(e===o(this,Re).div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&o(this,Re).div.contains(e)){const{isMac:n}=Ae.platform;if(t.button!==0||t.ctrlKey&&n)return;o(this,V).showAllEditors("highlight",!0,!0),o(this,Re).div.classList.add("free"),this.toggleDrawing(),Jf.startHighlighting(this,o(this,V).direction==="ltr",{target:o(this,Re).div,x:t.x,y:t.y}),o(this,Re).div.addEventListener("pointerup",()=>{o(this,Re).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:o(this,V)._signal}),t.preventDefault()}},As=function(){return o(Yn,Er).get(o(this,V).getMode())},Py=function(t){const e=o(this,Tt,As);return e?new e.prototype.constructor(t):null},Ry=function(){const{x:t,y:e,width:n,height:i}=this.div.getBoundingClientRect(),r=Math.max(0,t),a=Math.max(0,e),l=Math.min(window.innerWidth,t+n),c=Math.min(window.innerHeight,e+i),u=(r+l)/2-t,h=(a+c)/2-e,[d,f]=this.viewport.rotation%180===0?[u,h]:[h,u];return{offsetX:d,offsetY:f}},Af=function(){for(const t of o(this,jn).values())t.isEmpty()&&t.remove()},I(Yn,"_initialized",!1),A(Yn,Er,new Map([ay,wy,Cy,Jf,Ey].map(t=>[t._editorType,t])));let Ty=Yn;var ls,je,ro,qh,wp,Qb,$s,My,Zb,Iy;const Yt=class Yt{constructor({pageIndex:t}){A(this,$s);A(this,ls,null);A(this,je,new Map);A(this,ro,new Map);this.pageIndex=t}setParent(t){if(!o(this,ls)){g(this,ls,t);return}if(o(this,ls)!==t){if(o(this,je).size>0)for(const e of o(this,je).values())e.remove(),t.append(e);g(this,ls,t)}}static get _svgFactory(){return et(this,"_svgFactory",new Kf)}draw(t,e=!1,n=!1){const i=Ie(Yt,qh)._++,r=x(this,$s,My).call(this),a=Yt._svgFactory.createElement("defs");r.append(a);const l=Yt._svgFactory.createElement("path");a.append(l);const c=`path_p${this.pageIndex}_${i}`;l.setAttribute("id",c),l.setAttribute("vector-effect","non-scaling-stroke"),e&&o(this,ro).set(i,l);const u=n?x(this,$s,Zb).call(this,a,c):null,h=Yt._svgFactory.createElement("use");return r.append(h),h.setAttribute("href",`#${c}`),this.updateProperties(r,t),o(this,je).set(i,r),{id:i,clipPathId:`url(#${u})`}}drawOutline(t,e){const n=Ie(Yt,qh)._++,i=x(this,$s,My).call(this),r=Yt._svgFactory.createElement("defs");i.append(r);const a=Yt._svgFactory.createElement("path");r.append(a);const l=`path_p${this.pageIndex}_${n}`;a.setAttribute("id",l),a.setAttribute("vector-effect","non-scaling-stroke");let c;if(e){const d=Yt._svgFactory.createElement("mask");r.append(d),c=`mask_p${this.pageIndex}_${n}`,d.setAttribute("id",c),d.setAttribute("maskUnits","objectBoundingBox");const f=Yt._svgFactory.createElement("rect");d.append(f),f.setAttribute("width","1"),f.setAttribute("height","1"),f.setAttribute("fill","white");const p=Yt._svgFactory.createElement("use");d.append(p),p.setAttribute("href",`#${l}`),p.setAttribute("stroke","none"),p.setAttribute("fill","black"),p.setAttribute("fill-rule","nonzero"),p.classList.add("mask")}const u=Yt._svgFactory.createElement("use");i.append(u),u.setAttribute("href",`#${l}`),c&&u.setAttribute("mask",`url(#${c})`);const h=u.cloneNode();return i.append(h),u.classList.add("mainOutline"),h.classList.add("secondaryOutline"),this.updateProperties(i,t),o(this,je).set(n,i),n}finalizeDraw(t,e){o(this,ro).delete(t),this.updateProperties(t,e)}updateProperties(t,e){var c;if(!e)return;const{root:n,bbox:i,rootClass:r,path:a}=e,l=typeof t=="number"?o(this,je).get(t):t;if(l){if(n&&x(this,$s,Iy).call(this,l,n),i&&x(c=Yt,wp,Qb).call(c,l,i),r){const{classList:u}=l;for(const[h,d]of Object.entries(r))u.toggle(h,d)}if(a){const h=l.firstChild.firstChild;x(this,$s,Iy).call(this,h,a)}}}updateParent(t,e){if(e===this)return;const n=o(this,je).get(t);n&&(o(e,ls).append(n),o(this,je).delete(t),o(e,je).set(t,n))}remove(t){o(this,ro).delete(t),o(this,ls)!==null&&(o(this,je).get(t).remove(),o(this,je).delete(t))}destroy(){g(this,ls,null);for(const t of o(this,je).values())t.remove();o(this,je).clear(),o(this,ro).clear()}};ls=new WeakMap,je=new WeakMap,ro=new WeakMap,qh=new WeakMap,wp=new WeakSet,Qb=function(t,[e,n,i,r]){const{style:a}=t;a.top=`${100*n}%`,a.left=`${100*e}%`,a.width=`${100*i}%`,a.height=`${100*r}%`},$s=new WeakSet,My=function(){const t=Yt._svgFactory.create(1,1,!0);return o(this,ls).append(t),t.setAttribute("aria-hidden",!0),t},Zb=function(t,e){const n=Yt._svgFactory.createElement("clipPath");t.append(n);const i=`clip_${e}`;n.setAttribute("id",i),n.setAttribute("clipPathUnits","objectBoundingBox");const r=Yt._svgFactory.createElement("use");return n.append(r),r.setAttribute("href",`#${e}`),r.classList.add("clip"),i},Iy=function(t,e){for(const[n,i]of Object.entries(e))i===null?t.removeAttribute(n):t.setAttribute(n,i)},A(Yt,wp),A(Yt,qh,0);let Ny=Yt;globalThis.pdfjsTestingUtils={HighlightOutliner:ly};globalThis.pdfjsLib={AbortException:jr,AnnotationEditorLayer:Ty,AnnotationEditorParamsType:it,AnnotationEditorType:q,AnnotationEditorUIManager:go,AnnotationLayer:sy,AnnotationMode:Ui,AnnotationType:$t,build:mk,ColorPicker:Zf,createValidAbsoluteUrl:G1,DOMSVGFactory:Kf,DrawLayer:Ny,FeatureTest:Ae,fetchData:ed,getDocument:Yx,getFilenameFromUrl:cC,getPdfFilenameFromUrl:uC,getUuid:Y1,getXfaPageViewport:hC,GlobalWorkerOptions:zs,ImageKind:Ud,InvalidPDFException:ym,isDataScheme:zp,isPdfFile:R0,isValidExplicitDest:ck,MathClamp:Be,noContextMenu:gs,normalizeUnicode:aC,OPS:Gf,OutputScale:Li,PasswordResponses:QE,PDFDataRangeTransport:Kx,PDFDateString:N0,PDFWorker:Jo,PermissionFlag:KE,PixelsPerInch:zr,RenderingCancelledException:P0,ResponseException:Xf,setLayerDimensions:po,shadow:et,SignatureExtractor:_i,stopEvent:Ut,SupportedImageMimeTypes:wm,TextLayer:_u,TouchManager:Yf,updateUrlHash:X1,Util:U,VerbosityLevel:Fp,version:gk,XfaLayer:Zx};const jk="/assets/pdf.worker-DHtGXOM1.mjs";zs.workerSrc=jk;const zk=()=>{const[s,t]=Hn.useState(null),[e,n]=Hn.useState(!1),[i,r]=Hn.useState(null),[a,l]=Hn.useState(null),[c,u]=Hn.useState(!1),h=(S="")=>{var m;return((m=S.split(".").pop())==null?void 0:m.toLowerCase())||""},d=async S=>{try{const m=await S.arrayBuffer(),v=await Yx(m).promise;let b="";for(let _=1;_<=v.numPages;_++){const k=await(await v.getPage(_)).getTextContent();b+=k.items.map(T=>T.str).join(" ")+`

`}return b||"No text could be extracted from PDF"}catch(m){return console.error("PDF extraction error:",m),"Could not extract text from PDF"}},f=async S=>{try{const m=await NE(()=>import("./index-BsD7eJty.js").then(_=>_.i),[]),v=await S.arrayBuffer();return(await m.extractRawText({arrayBuffer:v})).value||"No text could be extracted from Word document"}catch(m){return console.error("Word extraction error:",m),"Could not extract text from Word document"}},p=async S=>{var m;if((m=S.target.files)!=null&&m.length){n(!0),r(null),l(null);try{const v=S.target.files[0],b={...v,preview:URL.createObjectURL(v),content:""},_=h(v.name),E=v.type.toLowerCase();if(E.includes("pdf")||_==="pdf"?b.content=await d(v):E.includes("word")||E.includes("document")||["docx","doc"].includes(_)?b.content=await f(v):b.content=await d(v)||await f(v)||"Unsupported file type",t(b),b.content&&b.content!=="Unsupported file type"){const T=new GE(b.content).analyze();l(T)}}catch(v){r("Failed to process file. Please try again."),console.error("Processing error:",v)}finally{n(!1)}}},w=()=>{s!=null&&s.preview&&URL.revokeObjectURL(s.preview),t(null),l(null),u(!1)},y=S=>S>=85?"text-emerald-600":S>=70?"text-blue-600":S>=55?"text-amber-600":"text-red-600";return C.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100",children:C.jsxs("div",{className:"max-w-7xl mx-auto p-6",children:[C.jsxs("div",{className:"text-center mb-8",children:[C.jsx("div",{className:"flex items-center justify-center mb-4",children:C.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 p-3 rounded-2xl shadow-lg",children:C.jsx(lw,{className:"w-8 h-8 text-white"})})}),C.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-gray-800 to-gray-600 bg-clip-text text-transparent mb-3",children:"MakeResumeAI - AI Resume Analyzer"}),C.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"Transform your CV with AI-powered analysis. Get instant feedback, detailed scoring, and professional recommendations to boost your job application success rate."}),C.jsxs("div",{className:"mt-4 flex flex-wrap justify-center gap-2 text-sm text-gray-500",children:[C.jsx("span",{className:"bg-white/60 px-3 py-1 rounded-full",children:"✓ ATS Optimization"}),C.jsx("span",{className:"bg-white/60 px-3 py-1 rounded-full",children:"✓ Industry Insights"}),C.jsx("span",{className:"bg-white/60 px-3 py-1 rounded-full",children:"✓ Professional Scoring"}),C.jsx("span",{className:"bg-white/60 px-3 py-1 rounded-full",children:"✓ Actionable Tips"})]})]}),C.jsx("div",{className:"bg-white rounded-2xl shadow-xl overflow-hidden border border-gray-100",children:C.jsxs("div",{className:"p-8",children:[C.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-xl p-12 text-center transition-all duration-300 hover:border-blue-400 hover:bg-blue-50/30",children:C.jsxs("div",{className:"flex flex-col items-center justify-center",children:[C.jsx("div",{className:"bg-blue-100 p-4 rounded-full mb-4",children:C.jsx(VE,{className:"w-8 h-8 text-blue-600"})}),C.jsx("h3",{className:"text-xl font-semibold text-gray-700 mb-2",children:"Upload Your Resume for AI Analysis"}),C.jsx("p",{className:"text-gray-500 mb-6 max-w-md",children:"Upload your CV and get instant AI-powered feedback with detailed scoring, ATS optimization tips, and professional improvement recommendations."}),C.jsxs("label",{className:"px-6 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 cursor-pointer transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",children:[C.jsx("input",{type:"file",className:"hidden",accept:".pdf,.docx,.doc",onChange:p}),"Analyze My Resume"]}),C.jsx("p",{className:"text-xs text-gray-400 mt-3",children:"Supported formats: PDF, DOCX, DOC • Max 10MB • 100% Secure & Private"})]})}),e&&C.jsxs("div",{className:"mt-8 flex flex-col items-center justify-center py-12",children:[C.jsxs("div",{className:"relative",children:[C.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-blue-200 border-t-blue-600"}),C.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:C.jsx(lw,{className:"w-5 h-5 text-blue-600"})})]}),C.jsx("p",{className:"mt-4 text-gray-600 font-medium",children:"AI is analyzing your resume..."}),C.jsx("p",{className:"text-sm text-gray-500",children:"Extracting insights and generating recommendations"})]}),i&&C.jsx("div",{className:"mt-8 p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg",children:C.jsxs("div",{className:"flex items-center",children:[C.jsx(ow,{className:"w-5 h-5 mr-2"}),i]})}),s&&a&&C.jsxs("div",{className:"mt-8",children:[C.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6 flex items-center justify-between",children:[C.jsxs("div",{className:"flex items-center",children:[C.jsx(Wf,{className:"w-5 h-5 text-blue-500 mr-3"}),C.jsxs("div",{children:[C.jsx("span",{className:"font-medium text-gray-700",children:s.name}),C.jsxs("div",{className:"text-sm text-gray-500",children:[a.insights.wordCount," words • ",a.insights.pageEstimate," page(s) • AI Score: ",C.jsxs("span",{className:`font-bold ${y(a.score.overall)}`,children:[a.score.overall,"%"]})]})]})]}),C.jsxs("div",{className:"flex items-center space-x-2",children:[C.jsx("button",{onClick:()=>u(!c),className:"flex items-center text-sm text-blue-600 hover:text-blue-800 px-3 py-1 rounded-md hover:bg-blue-50",children:c?C.jsxs(C.Fragment,{children:[C.jsx(zE,{className:"w-4 h-4 mr-1"}),"Hide Text"]}):C.jsxs(C.Fragment,{children:[C.jsx(BE,{className:"w-4 h-4 mr-1"}),"View Text"]})}),C.jsx("button",{onClick:w,className:"text-gray-400 hover:text-gray-600 p-1 rounded-md hover:bg-gray-100",children:C.jsx(ow,{className:"w-5 h-5"})})]})]}),C.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-8",children:[C.jsx("div",{className:"xl:col-span-1",children:C.jsx(XE,{score:a.score,industryMatch:a.industryMatch})}),C.jsxs("div",{className:"xl:col-span-2",children:[C.jsxs("div",{className:"flex items-center mb-6",children:[C.jsx(DE,{className:"w-6 h-6 text-blue-600 mr-3"}),C.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"AI Analysis & Improvement Recommendations"})]}),C.jsx(qE,{advice:a.advice,insights:a.insights,strengths:a.strengths,criticalIssues:a.criticalIssues})]})]}),c&&C.jsxs("div",{className:"mt-8",children:[C.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[C.jsx(Wf,{className:"w-5 h-5 mr-2"}),"Extracted Resume Content"]}),C.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[C.jsx("div",{className:"bg-gray-50 px-4 py-2 border-b border-gray-200",children:C.jsx("span",{className:"text-sm text-gray-600",children:"Raw text extracted from your resume file"})}),C.jsx("div",{className:"p-6 bg-gray-50 max-h-96 overflow-y-auto",children:C.jsx("pre",{className:"whitespace-pre-wrap text-gray-700 font-mono text-sm leading-relaxed",children:s.content})})]})]})]})]})}),C.jsxs("div",{className:"text-center mt-8 text-gray-500 text-sm",children:[C.jsx("p",{children:"Powered by advanced AI technology • 100% secure and private • No data stored permanently"}),C.jsx("p",{className:"mt-2",children:"© 2024 MakeResumeAI - Professional Resume Analysis & CV Improvement Tool"})]})]})})};function Bk(){return C.jsx("div",{className:"min-h-screen bg-gray-50",children:C.jsx(zk,{})})}V1(document.getElementById("root")).render(C.jsx(Hn.StrictMode,{children:C.jsx(Bk,{})}));
